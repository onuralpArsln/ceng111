"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["commits","ui_packages_file-renderer-blob_FileRendererBlob_tsx"],{80855:(e,t,r)=>{r.d(t,{q:()=>n});function n(e){if(null==e)throw Error("Failed to load page data.")}},25365:(e,t,r)=>{var n,i=r(5475),a=r(96810),s=r(48055),o=r(52674),l=r(37589),d=r(24533),c=r(58081);function u(e){let t=(0,d.T)(),[r]=(0,c.useState)(t?.repo),[n]=(0,c.useState)(t?.currentUser);return(0,s.jsx)(l.M,{user:n,children:(0,s.jsx)(o.d,{repository:r,children:e.children})})}try{u.displayName||(u.displayName="App")}catch{}var h=r(73028),m=r(59889),f=r(6975),p=r(6866),x=r(71207),g=r(15631),y=r(19343),j=r(81248),b=r(22578),_=r(81950),v=r(22326),w=r(77461),C=r(7949),N=r(75299),S=r(54421),L=r(46008),R=r(85529),D=r(42483),k=r(63309),I=r(73290),Z=r(88216),E=r(97011),T=r(41436),P=r(8152),F=r(87623),A=r(21449),H=r(24167),U=r(63987),B=r(47422),M=r(42664),O=r(32190),$=r(99318),W=r(98833),z=r(48170);function V({data:e}){let t=(0,o.H)();return e.loading||0!==e.branches.length?(0,s.jsxs)(D.Z,{sx:{display:"flex",alignItems:"center",color:"fg.subtle",borderBottomStyle:"solid",borderColor:"border.default",borderWidth:"1px",p:3},children:[(0,s.jsx)(W.Z,{icon:R.GitBranchIcon,sx:{mr:2}}),e.loading?(0,s.jsx)(L.o,{width:"60px",variant:"rounded",height:"22px"}):e.branches.map(e=>(0,s.jsxs)(c.Fragment,{children:[(0,s.jsx)(z.Z,{href:(0,v.v5)({owner:t.ownerLogin,repo:t.name,branch:e.branch}),sx:{mx:1},children:e.branch}),e.prs.length>0?(0,s.jsxs)(s.Fragment,{children:["(",e.prs.map((t,r)=>(0,s.jsxs)(c.Fragment,{children:[(0,s.jsx)(G,{pullRequest:t}),r!==e.prs.length-1?(0,s.jsx)(s.Fragment,{children:",\xa0"}):null]},`pr-${t.repo.ownerLogin}-${t.repo.name}-${t.number}`)),")"]}):null]},e.branch))]}):null}function G({pullRequest:e}){let{repo:t,number:r,showPrefix:n}=e,i=n?`${t.ownerLogin}/${t.name}`:"";return(0,s.jsxs)(I.Z,{href:(0,v.xR)({repo:t,number:r}),sx:{color:"fg.subtle"},"data-hovercard-url":(0,v.Z0)({owner:t.ownerLogin,repo:t.name,pullRequestNumber:r}),children:[i,"#",r]})}try{V.displayName||(V.displayName="CommitBranchInfo")}catch{}try{G.displayName||(G.displayName="PullRequestLink")}catch{}var q=r(50919),Y=r(14786),J=r(59148);function K({data:e}){let t=(0,o.H)();if(0===e.tags.length)return null;let r=e.tags.length>2&&e.tags.length<25,n=e.tags.length>=25;return(0,s.jsxs)(D.Z,{sx:{display:"flex",alignItems:"center",borderBottomStyle:"solid",borderColor:"border.default",borderWidth:"1px",flexWrap:"wrap",p:3,gap:2},children:[(0,s.jsx)(W.Z,{icon:R.TagIcon,sx:{mr:2}}),(0,s.jsx)(I.Z,{href:(0,v.HY)({owner:t.ownerLogin,repo:t.name,tag:e.tags[0]}),sx:{color:"fg.default"},children:e.tags[0]}),r?(0,s.jsx)(Q,{tags:e.tags,repo:t}):null,n?(0,s.jsx)(X,{tags:e.tags,repo:t}):null,e.tags.length>1?(0,s.jsx)(I.Z,{href:(0,v.HY)({owner:t.ownerLogin,repo:t.name,tag:e.tags[e.tags.length-1]}),sx:{color:"fg.subtle"},children:e.tags[e.tags.length-1]}):null]})}function Q({tags:e,repo:t}){let[r,n]=(0,c.useState)(!1),i=(0,c.useRef)(null),a=(0,c.useCallback)(()=>{n(!0),requestAnimationFrame(()=>i.current?.focus())},[]);return r?(0,s.jsx)(s.Fragment,{children:e.slice(1,e.length-1).map((e,r)=>(0,s.jsx)(I.Z,{ref:0===r?i:null,href:(0,v.HY)({owner:t.ownerLogin,repo:t.name,tag:e}),sx:{color:"fg.subtle"},children:e},e))}):(0,s.jsx)(q.h,{"aria-label":"Show more tags",icon:R.KebabHorizontalIcon,size:"small",variant:"invisible",onClick:a})}function X({tags:e,repo:t}){let[r,n]=(0,c.useState)(!1),i=(0,c.useRef)(null);return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(q.h,{"aria-label":"Show all tags",icon:R.KebabHorizontalIcon,size:"small",variant:"invisible",onClick:()=>n(!0),ref:i}),r&&(0,s.jsx)(J.V,{title:`${e.length} tags`,onClose:()=>n(!1),returnFocusRef:i,width:"medium",height:e.length>=12?"small":"auto",renderBody:()=>(0,s.jsx)(Y.S,{sx:{overflowY:"auto",py:2},"data-testid":"tag-dialog-list",children:e.map(e=>(0,s.jsx)(Y.S.LinkItem,{href:(0,v.HY)({owner:t.ownerLogin,repo:t.name,tag:e}),children:e},e))})})]})}try{K.displayName||(K.displayName="CommitTagInfo")}catch{}try{Q.displayName||(Q.displayName="ExpandedTags")}catch{}try{X.displayName||(X.displayName="CommitTagsDialog")}catch{}var ee=r(51461);function et(){return(0,s.jsxs)(ee.Z,{variant:"warning",sx:{mb:4},children:[(0,s.jsx)(W.Z,{icon:R.AlertIcon,sx:{mr:2}}),(0,s.jsx)(E.Z,{sx:{overflow:"hidden"},children:"This commit does not belong to any branch on this repository, and may belong to a fork outside of the repository."})]})}try{et.displayName||(et.displayName="SpoofedCommitWarningBanner")}catch{}var er=r(61113);function en({oid:e,repo:t}){return(0,er.i)(e,t.id)?(0,s.jsxs)(ee.Z,{sx:{mb:4},children:[(0,s.jsx)(D.Z,{as:"img",src:"/images/modules/commit/flowers@2x.png",alt:"flower image",sx:{width:"88px",height:"49px",mr:4,mt:1,float:"left"}}),(0,s.jsx)("h2",{children:"Thanks for everything, Jim."}),(0,s.jsx)("p",{children:"We will miss you."})]}):null}try{en.displayName||(en.displayName="WeirichCommitBanner")}catch{}let ei={badgeLabel:"Alpha",feedbackLink:"https://github-grid.enterprise.slack.com/archives/C0357UQ03KN"},ea={badgeLabel:"Beta",feedbackLink:"https://gh.io/diff-refresh-feedback"};function es({commit:e}){let{feedbackLink:t,badgeLabel:r}=(0,C.y)("diff_ux_refresh_beta")?ea:ei,n=(0,o.H)(),{helpUrl:i}=(0,P.J)(),a=function(e){let[t,r]=(0,c.useState)(null);return(0,c.useEffect)(()=>{e&&(async()=>{let t=await (0,F.v)(e);try{if(t.ok){let e=await t.json();e&&r(e.data)}}catch(e){}})()},[e]),t}(`${(0,v.jP)({owner:n.ownerLogin,repo:n.name,commitish:e.oid})}/deferred_commit_data`),l="";try{l=a?.statusCheckStatus?.short_text?.split("checks")[0]?.trim()||""}catch{}let d=function(e){let t=(0,o.H)(),[r,n]=(0,c.useState)({branches:[],tags:[],loading:!0});return(0,c.useEffect)(()=>{let r=!1;return(async()=>{n({branches:[],tags:[],loading:!0});let i=await (0,F.v)((0,v.Yc)({owner:t.ownerLogin,repo:t.name,commitish:e}));if(!r)try{if(i.ok){let e=await i.json();e.loading=!1,e&&n({...e,loading:!1})}else n({branches:[],tags:[],loading:!1})}catch(e){n({branches:[],tags:[],loading:!1})}})(),function(){r=!0}},[t.ownerLogin,t.name,e]),r}(e.oid);return(0,s.jsxs)("div",{children:[d.loading||0!==d.branches.length?null:(0,s.jsx)(et,{}),(0,s.jsx)(en,{oid:e.oid,repo:n}),(0,s.jsxs)($.s,{children:[(0,s.jsxs)(D.Z,{sx:{display:"flex",backgroundColor:"canvas.subtle",p:3,borderTopLeftRadius:2,borderTopRightRadius:2,flexDirection:"column",borderBottomStyle:"solid",borderColor:"border.default",borderWidth:"1px"},children:[(0,s.jsxs)("div",{className:"d-flex flex-justify-end flex-md-justify-between flex-column-reverse flex-md-row gap-2",children:[(0,s.jsxs)("div",{className:"d-flex flex-items-center flex-wrap gap-2",children:[(0,s.jsx)(N.WZ,{html:e.shortMessageMarkdown,sx:{fontSize:2,fontWeight:"semibold"},className:"markdown-title"}),(0,s.jsx)(U.L,{oid:e.oid,status:a?.statusCheckStatus?.state,descriptionString:l,repo:n})]}),(0,s.jsxs)("div",{className:"d-flex gap-2 flex-items-center flex-justify-between flex-md-justify-end",children:[(0,s.jsxs)("div",{className:"d-flex flex-items-center gap-2",children:[(0,s.jsx)(k.Z,{variant:"success",sx:{verticalAlign:"middle"},children:r}),(0,s.jsx)(I.Z,{href:t,target:"_blank",rel:"noopener noreferrer",className:"no-wrap",children:"Give feedback"})]}),(0,s.jsx)(T.u,{text:"Browse the repository at this point in the history",children:(0,s.jsx)(Z.r,{as:I.Z,href:(0,v.Qi)({repo:n,action:"tree",commitish:e.oid}),leadingVisual:R.FileCodeIcon,children:"Browse files"})})]})]}),e.bodyMessageHtml&&(0,s.jsx)(N.WZ,{html:e.bodyMessageHtml,className:"ws-pre-wrap extended-commit-description-container",sx:{pt:2,wordBreak:"break-word",fontFamily:"var(--fontStack-monospace)",fontSize:"12px",color:"fg.muted"}})]}),(0,s.jsx)(V,{data:d}),(0,s.jsx)(K,{data:d}),(0,s.jsxs)("div",{className:"d-flex flex-justify-between p-3 gap-2 flex-column flex-md-row",children:[(0,s.jsx)(B.C,{commit:e,repo:n,settings:{fontColor:"fg.default",avatarSize:20,fontWeight:"bold"},children:a?a.signatureInformation?(0,s.jsx)("div",{className:"pl-2",children:(0,s.jsx)(S.G,{commitOid:e.oid,hasSignature:!0,verificationStatus:a.verifiedStatus,signature:{helpUrl:i,...a.signatureInformation}})}):null:(0,s.jsx)(L.o,{className:"ml-2",variant:"rounded",sx:{width:M.Zb}})}),(0,s.jsxs)("pre",{className:"color-fg-muted d-flex flex-items-center",children:[`${e.parents.length} parent${e.parents.length>1||0===e.parents.length?"s":""} `,e.parents.map((e,t)=>(0,s.jsxs)(c.Fragment,{children:[0!==t?" + ":"",(0,s.jsx)(I.Z,{to:(0,v.jP)({owner:n.ownerLogin,repo:n.name,commitish:e})+new URL(x.ssrSafeLocation.origin+x.ssrSafeLocation.pathname+x.ssrSafeLocation.search,x.ssrSafeLocation.origin).search,as:w.r,className:"color-fg-default Link--inTextBlock","data-hovercard-url":(0,v.QY)({owner:n.ownerLogin,repo:n.name,commitish:e}),children:(0,H.Q)(e)})]},e))," commit ",(0,s.jsx)(E.Z,{sx:{color:"fg.default"},children:(0,H.Q)(e.oid)}),(0,s.jsx)(O.J,{sha:e.oid,direction:"sw"})]})]})]})]})}try{es.displayName||(es.displayName="CommitInfo")}catch{}var eo=r(27748),el=r(50295);function ed({unavailableReason:e,commit:t}){let r=ec[e];return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)(eo.K,{"data-hpc":!0,padding:{narrow:"normal",regular:"spacious"},children:[(0,s.jsx)("h1",{className:"sr-only",children:t.shortMessage}),(0,s.jsx)(es,{commit:t})]}),(0,s.jsxs)(el.Z,{children:[(0,s.jsx)(el.Z.Visual,{children:r.visual}),(0,s.jsx)(el.Z.Heading,{children:r.heading}),(0,s.jsx)(el.Z.Description,{children:r.description}),r.secondaryAction]})]})}let ec={corrupt:{visual:(0,s.jsx)(R.AlertIcon,{}),heading:"Sorry, this diff is unavailable.",description:"The repository may be missing relevant data.",secondaryAction:(0,s.jsx)(el.Z.SecondaryAction,{href:(0,v.Le)(),children:"Please contact support for more information"})},"missing commits":{visual:(0,s.jsx)(R.AlertIcon,{}),heading:"Sorry, this diff is unavailable.",description:"The repository may be missing relevant data.",secondaryAction:(0,s.jsx)(el.Z.SecondaryAction,{href:(0,v.Le)(),children:"Please contact support for more information"})},timeout:{visual:(0,s.jsx)(R.HourglassIcon,{}),heading:"Sorry, this diff is taking too long to generate.",description:"It may be too large to display on GitHub."},"too busy":{visual:(0,s.jsx)(R.HourglassIcon,{}),heading:"Sorry, this diff is temporarily unavailable due to heavy server load.",description:"Please try again later."}};try{ed.displayName||(ed.displayName="CommitUnavailable")}catch{}var eu=r(32458),eh=r(12008),em=r(34603),ef=r(78720),ep=r(85193),ex=r(67941);let eg="/users/diffview",ey=(0,c.createContext)({hideWhitespace:!1,splitPreference:"split",updateHideWhitespace:()=>{},updateSplitPreference:()=>{}});function ej({viewSettings:e,children:t}){let r=(0,ep.s)(),n=function(e){let t=e,[r]=(0,ep.l)(),n=r.get("diff");return("split"===n||"unified"===n)&&(t=n),t}(e.splitPreference),i=function(e){let t=e,[r]=(0,ep.l)(),n=r.get("w");return"1"===n?t=!0:"0"===n&&(t=!1),t}(e.hideWhitespace),[a,o]=(0,c.useState)(n),[l,d]=(0,c.useState)(i),u=function(){let e=(0,ex.I)(`${eg}?diff=split`,"post"),t=(0,ex.I)(`${eg}?diff=unified`,"post");return async function(r){"split"===r?await e():"unified"===r&&await t()}}(),h=(0,c.useCallback)(e=>{(function(e,t){let r=new URL(window.location.href,window.location.origin);if(t){let n=encodeURIComponent(t);r.searchParams.set(e,n)}else r.searchParams.delete(e);window.history.replaceState({path:r.toString()},"",r.toString())})("diff",e),o(e),u(e)},[u]),m=(0,c.useCallback)(e=>{d(e),r(`${window.location.pathname}?w=${e?"1":"0"}`)},[r]),f=(0,c.useMemo)(()=>({hideWhitespace:l,splitPreference:a,updateHideWhitespace:m,updateSplitPreference:h}),[l,a,m,h]);return(0,s.jsx)(ey.Provider,{value:f,children:t})}function eb(){return(0,c.useContext)(ey)}try{ey.displayName||(ey.displayName="DiffViewSettingsContext")}catch{}try{ej.displayName||(ej.displayName="DiffViewSettingsProvider")}catch{}let e_={extraDiffEntries:[],loading:!0,error:!1};var ev=r(50429);function ew(e){if(!e)return"";let t=e.lastIndexOf(".");return!t||t<0?ev.ir:`.${e.substring(t+1)}`}let eC=(e,t=0)=>`calc(${e}px + ${t}px)`,eN={position:"sticky",zIndex:1,backgroundColor:"canvas.default","&::before":{bg:"canvas.default",content:'""',position:"absolute",display:"block",height:"100%",width:"calc(100% + 30px)",ml:"-14px",mr:-3}};var eS=r(75677);function eL(){return(0,d.T)().commentInfo}var eR=r(12582),eD=r(51246),ek=r(45677);function eI({oid:e,path:t,repo:r,isViewable:n=!0}){return(0,s.jsxs)(ek.P,{children:[(0,s.jsx)(ek.P.Anchor,{children:(0,s.jsx)(q.h,{"aria-label":"More options",icon:R.KebabHorizontalIcon,variant:"invisible"})}),(0,s.jsx)(ek.P.Overlay,{children:(0,s.jsxs)(Y.S,{children:[(0,s.jsxs)(Y.S.LinkItem,{href:(0,v.C9)({repo:r.name,owner:r.ownerLogin,filePath:t,commitish:e}),inactiveText:n?void 0:"Action unavailable",children:[(0,s.jsx)(Y.S.LeadingVisual,{children:(0,s.jsx)(R.EyeIcon,{})}),"View file"]}),(0,s.jsxs)(Y.S.Item,{inactiveText:"Action unavailable",children:[(0,s.jsx)(Y.S.LeadingVisual,{children:(0,s.jsx)(R.PencilIcon,{})}),"Edit file"]}),(0,s.jsxs)(Y.S.Item,{inactiveText:"Action unavailable",children:[(0,s.jsx)(Y.S.LeadingVisual,{children:(0,s.jsx)(R.TrashIcon,{})}),"Delete file"]})]})})]})}try{eI.displayName||(eI.displayName="BlobActionsMenu")}catch{}var eZ=r(12300),eE=r(74121);function eT({commitOid:e,path:t,proseDiffHtml:r,fileRendererInfo:n}){let{loaded:i,richDiffData:a}=function(e,t,r){let n=!!t.proseDiffHtml||!!t.fileRendererInfo,i=(0,o.H)(),[a,s]=(0,c.useState)(n),[l,d]=(0,c.useState)(t),u=(0,c.useCallback)(async()=>{let t=await (0,F.v)(`${(0,v.jP)({owner:i.ownerLogin,repo:i.name,commitish:e})}/rich_diff/${encodeURIComponent(r)}`);t.ok&&d(await t.json()),s(!0)},[e,r,i]);return(0,c.useEffect)(()=>{n||u()},[n,u]),{loaded:a,richDiffData:l}}(e,{proseDiffHtml:r,fileRendererInfo:n},t);return i?a.proseDiffHtml?(0,s.jsx)("div",{className:"prose-diff position-relative",children:(0,s.jsx)(N.wB,{html:a.proseDiffHtml})}):a.fileRendererInfo?(0,s.jsx)(eZ.default,{identityUuid:a.fileRendererInfo.identityUuid,type:a.fileRendererInfo.renderType,size:a.fileRendererInfo.size,url:a.fileRendererInfo.displayUrl}):(0,s.jsx)("div",{className:"d-flex flex-justify-center p-4",children:"This rich diff is not supported at the moment."}):(0,s.jsx)("div",{className:"d-flex flex-justify-center p-4",children:(0,s.jsx)(eE.Z,{size:"large"})})}try{eT.displayName||(eT.displayName="RichDiff")}catch{}let eP=c.memo(c.forwardRef(eF));function eF({diffEntryData:e,splitPreference:t,contextLinePathURL:r,recalcTotalHeightOfVirtualWindow:n,helpUrl:i,headerStickyOffset:a=0,repo:o,oid:u,index:m,ignoreWhitespace:f,virtualizer:p},x){let g=(0,l.x)(),y=function(){let e=(0,d.T)(),{commit:t}=e,r=eL(),n=(0,eD.uD)({commit:t,repo:e.repo,viewerCanReply:r.canComment}),{addComment:i,editComment:a}=(0,eR.f)(),s=(0,c.useCallback)(({filePath:e,onCompleted:t,onError:r,text:n,thread:a})=>{let[s,o]=a.id.split("::");if(!s||!o){r(Error("Invalid threadId"));return}i(n,e,o).then(e=>{e.comment?t?.(e.comment.id):r(Error("Failed to add comment"))})},[i]),o=(0,c.useCallback)(({text:e,diffLine:t,filePath:r,onCompleted:n,onError:a})=>{t&&t.position&&i(e,r,t.position.toString()).then(e=>{if(e.comment){let i=e.comment.id,a=`${r}::${t.position}`;n?.(a,i)}else a?.(Error("Failed to add comment"))})},[i]),l=(0,c.useCallback)(({comment:e,text:t,onCompleted:r,onError:n})=>{a(t,{id:e.databaseId,bodyVersion:e.bodyVersion}).then(e=>{e.updatedFields?r?.():n(Error("Failed to edit comment"))})},[a]);return(0,c.useMemo)(()=>({batchingEnabled:!1,commentSubjectType:"commit",multilineEnabled:!1,resolvingEnabled:!1,suggestedChangesEnabled:!1,lazyFetchReactionGroups:!0,lazyFetchEditHistory:!0,addThread:o,addThreadReply:s,deleteComment:eu.Z,editComment:l,pendingSuggestedChangesBatch:[],submitSuggestedChanges:eu.Z,addSuggestedChangeToPendingBatch:eu.Z,removeSuggestedChangeFromPendingBatch:eu.Z,addFileLevelThread:eu.Z,resolveThread:eu.Z,unresolveThread:eu.Z,fetchThread:n,commentBoxConfig:{pasteUrlsAsPlainText:!1,useMonospaceFont:!1}}),[o,s,l,n])}(),j=(0,c.useMemo)(()=>({filteredMarkers:[],activeGlobalMarkerID:"",decrementActiveMarker:eu.Z,incrementActiveMarker:eu.Z,onActivateGlobalMarkerNavigation:eu.Z}),[]),b=eL(),[_,v]=(0,c.useState)(e.current[m]),[w,C]=(0,c.useState)(_.collapsed),[N,S]=(0,c.useState)(_.defaultToRichDiff),[L,R]=(0,c.useState)(_.diffManuallyExpanded),k=(0,c.useRef)(!1),I=async function(e,t,r){let n=await (0,F.v)(`${t}?pathDigest=${r}${function(e){let t="";for(let r=0;r<e.length;r++)t+=`&lineRanges[]=${JSON.stringify(e[r])}`;return t}(e)}`);if(n.ok)return await n.json()??void 0},Z=(0,c.useRef)([]),E=async t=>{Z.current.push(t);let i=await I(Z.current,r,_.pathDigest);if(void 0!==i){let t={..._};t.diffLines=i.diffEntryWithContext,v(t),e.current[m]=t,n()}},T=async()=>{Z.current=[],k.current||((_.newTreeEntry?.lineCount??0)<5e3?Z.current.push({start:1,end:Math.max(_.oldTreeEntry?.lineCount??0,_.newTreeEntry?.lineCount??0)}):Z.current=function(e,t){let r=[];for(let t=0;t<e.length;t++)if("HUNK"===e[t].type){let n=e[t-1>=0?t-1:0],i=e[t+1<e.length?t+1:e.length-1],a=n?.blobLineNumber,s=i?.blobLineNumber;a&&s&&(r.push({start:a,end:a+40}),r.push({start:Math.max(s-40,1),end:s}))}let n=e[e.length-1].blobLineNumber;return n<t&&r.push({start:n,end:n+40}),r}(_.diffLines,_.newTreeEntry?.lineCount??0)),k.current=!k.current;let t=await I(Z.current,r,_.pathDigest);if(void 0!==t){let r={..._};r.diffLines=t.diffEntryWithContext,v(r),e.current[m]=r,n()}},P=(0,c.useCallback)(()=>{_.diffManuallyExpanded=!0,e.current[m].diffManuallyExpanded=!0,R(!0),n(),requestAnimationFrame(()=>{p?.scrollToIndex(m,{align:"center"})})},[e,_,m,n]);(0,c.useEffect)(()=>{v(e.current[m]),Z.current=[]},[f,m,e,u]);let A=(0,c.useMemo)(()=>{if((e.current[m]?.diffLines?.[0]?.blobLineNumber||0)>1)return!0;let t=e.current[m]?.diffLines?.length||0;return(e.current[m]?.diffLines?.[t-1]?.blobLineNumber||0)<(e.current[m]?.newTreeEntry?.lineCount||0)+1},[e.current[m]?.diffLines,e.current[m]?.newTreeEntry?.lineCount,m,e]),H=(0,c.useMemo)(()=>({avatarUrl:g?.avatarURL??"",diffViewPreference:t,isSiteAdmin:!1,login:g?.login??"",tabSizePreference:g?.tabSize??8,viewerCanComment:b.canComment,viewerCanApplySuggestion:!1}),[t,g?.avatarURL,g,g?.login,g?.tabSize]);return(0,s.jsxs)("div",{className:"position-relative",ref:x,children:[(0,s.jsx)(D.Z,{sx:{...eN,top:[eC(56,a),eC(64,a)]},children:(0,s.jsx)(eS.L,{areLinesExpanded:k.current,canExpandOrCollapseLines:A,defaultToRichDiff:_.defaultToRichDiff,fileLinkHref:`#diff-${_.pathDigest}`,isCollapsed:w,canToggleRichDiff:_.canToggleRichDiff,linesAdded:_.linesAdded,linesDeleted:_.linesDeleted,newMode:_.newTreeEntry?.mode,newPath:_.newTreeEntry?.path,oldMode:_.oldTreeEntry?.mode,oldPath:_.oldTreeEntry?.path,patchStatus:_.status,path:_.path,onToggleExpandAllLines:T,onToggleFileCollapsed:()=>{_.collapsed=!w,e.current[m].collapsed=!w,C(!w)},onToggleDiffDisplay:e=>S(e),rightSideContent:(0,s.jsx)(eI,{oid:u,path:_.path,repo:o,isViewable:!_.isSubmodule})})}),w?null:(0,s.jsx)("div",{className:"border position-relative rounded-bottom-2",children:N?(0,s.jsx)(eT,{commitOid:u,path:_.path,proseDiffHtml:_.proseDifffHtml,fileRendererInfo:_.renderInfo}):(0,s.jsx)(h.Q6,{shouldShowCopilot:!1,diffEntryData:_,baseHelpUrl:i,commentingEnabled:!0,commentBatchPending:!1,repositoryId:o.id.toString(),subject:{isInMergeQueue:!1,state:"OPEN"},subjectId:u,viewerData:H,addInjectedContextLines:E,commentingImplementation:y,markerNavigationImplementation:j,diffLinesManuallyUnhidden:L,onHandleLoadDiff:P})})]})}try{eP.displayName||(eP.displayName="Diff")}catch{}try{eF.displayName||(eF.displayName="DiffUnmemoized")}catch{}let eA=c.memo(eH);function eH(){return(0,s.jsx)(D.Z,{sx:{paddingTop:3,gap:2,justifyContent:"space-between",alignItems:"center"},children:(0,s.jsx)(D.Z,{sx:{gap:2},children:(0,s.jsxs)(D.Z,{sx:{borderRadius:2,border:"1px solid",borderColor:"border.subtle"},children:[(0,s.jsx)(D.Z,{sx:{alignItems:"center",gap:2,padding:3,borderBottom:"1px solid",borderBottomColor:"border.subtle",backgroundColor:"canvas.subtle",borderTopLeftRadius:2,borderTopRightRadius:2},children:(0,s.jsx)(L.o,{height:"sm",variant:"rounded",width:"140px"})}),(0,s.jsxs)(D.Z,{sx:{display:"flex",flexDirection:"column",gap:2,padding:3},children:[(0,s.jsx)(L.o,{height:"sm",variant:"rounded",width:"random"}),(0,s.jsx)(L.o,{height:"sm",variant:"rounded",width:"random"}),(0,s.jsx)(L.o,{height:"sm",variant:"rounded",width:"random"}),(0,s.jsx)(L.o,{height:"sm",variant:"rounded",width:"random"})]})]})})})}try{eA.displayName||(eA.displayName="LoadingContentBlock")}catch{}try{eH.displayName||(eH.displayName="LoadingContentBlockUnmemoized")}catch{}function eU({diffEntryData:e,contextLinePathURL:t,selectedPathDigest:r,unselectedFileExtensions:n,repo:i,oid:a,ignoreWhitespace:o}){let l=eb(),u=(0,c.useRef)(e),h=(0,c.useRef)(e),f=(0,c.useRef)(e.length>40),p=(0,c.useRef)(null),[g,y]=(0,c.useState)(o),[j,b]=(0,c.useState)(a),[_,v]=(0,c.useState)({});(0,c.useEffect)(()=>{n&&n.size>0?u.current=h.current.filter(e=>!n.has(ew(e.path))):u.current=h.current,f.current=u.current.length>40,w()},[n?.size]),(0,c.useEffect)(()=>{u.current=e,h.current=e,f.current=u.current.length>40,w(),y(o),b(a)},[t,e,e[0]?e[0].diffLines:void 0]);let w=(0,c.useCallback)(()=>v({}),[]),C=(0,d.T)(),N=(0,eh.M)(),S=function(e,t,r,n,i,a){let[s,o]=(0,c.useState)(e_),l=(0,c.useRef)([]),d=(0,c.useRef)(r);return(0,c.useEffect)(()=>{if(!n||!i)return;let a=!1,c=async(e,t,r)=>{o(e_);let i=await (0,F.v)(`${n}?start_entry=${e}&bytes=${t}&lines=${r}`);if(!a)try{if(i.ok){let e=await i.json();e&&(e.loading=e.loadMore,l.current=l.current.concat(e.extraDiffEntries),e.extraDiffEntries=l.current,e.loadMore&&d.current!==e.asyncDiffLoadInfo.startIndex?(d.current=e.asyncDiffLoadInfo.startIndex,o(e),setTimeout(()=>c(e.asyncDiffLoadInfo.startIndex,e.asyncDiffLoadInfo.byteCount,e.asyncDiffLoadInfo.lineShownCount),0)):(d.current===e.asyncDiffLoadInfo.startIndex?(e.error=!0,e.loading=!1):e.error=!1,o(e)))}else s.loading=!1,s.error=!0,s.extraDiffEntries=l.current,o(s)}catch(e){s.loading=!1,s.error=!0,s.extraDiffEntries=l.current,o(s)}};return c(r,e,t),function(){a=!0}},[e,t,i,r,n,a]),(0,c.useEffect)(()=>{l.current=[],d.current=r},[n,r,a]),s}(C.asyncDiffLoadInfo.byteCount,C.asyncDiffLoadInfo.lineShownCount,C.asyncDiffLoadInfo.startIndex,C.getRestOfDiffPathURL,C.moreDiffsToLoad,o);(0,c.useEffect)(()=>{u.current=u.current.concat(S.extraDiffEntries),h.current=u.current,n&&n.size>0&&(u.current=h.current.filter(e=>!n.has(ew(e.path)))),f.current=u.current.length>40,w()},[S.extraDiffEntries]);let L=(0,c.useRef)(null),R=(0,em.F)({parentRef:L,size:u.current.length,estimateSize:(0,c.useCallback)(e=>{var t;let r;return t=u.current[e],r=67,t?.collapsed?r:t?.newTreeEntry?.isGenerated&&!t?.diffManuallyExpanded?199:t?.isTooBig?104:(t?.diffLines&&(r+=25*t.diffLines.length),t?.newTreeEntry?.lineCount&&t.newTreeEntry.lineCount>(t?.diffLines[t?.diffLines.length-1]?.right??0)&&(r+=32),r)},[u.current.length,_]),useVirtualImpl:em.A,rangeExtractor(e){let t=x.ssrSafeLocation.hash.substring(1),r=(0,m.LA)(t),n=document.querySelector("[data-path-digest]:focus-within")?.getAttribute("data-path-digest"),i=u.current.findIndex(e=>e.pathDigest===n),a=u.current.findIndex(e=>r?.endsWith(e.pathDigest));return i<0&&a<0?(0,ef.M)(e):Array.from(new Set([...(0,ef.M)(e),...[i,a].filter(e=>e>-1)])).sort((e,t)=>e-t)}});return(0,c.useEffect)(()=>{let e=r.includes("R"),t=r.includes("L"),n=t||e,i=n?t?r.split("L")[0]:r.split("R")[0]:r,a=function(e,t){for(let r=0;r<t.length;r++)if(e===t[r]?.pathDigest)return r;return -1}(i??r,u.current);if(-1===a){if(S.error&&null!==p){let e=p.current?.childNodes[0];e?.focus(),e?.scrollIntoView({block:"center"})}return}if(f.current)R.scrollToIndex(a,{align:"center"}),requestAnimationFrame(()=>{if(n&&eB(L,r));else{let e=L.current?.querySelectorAll(`[aria-label="collapse file: ${u.current[a]?.path}"]`);e&&1===e.length&&e[0].focus()}});else if(n&&eB(L,r));else{let e=L.current?.querySelectorAll(`[data-diff-anchor=diff-${i}]`);if(e&&1===e.length){let t=e[0].getBoundingClientRect().top+(x.iG?.scrollY??0)-67-60;x.iG?.scrollTo(0,t);let r=L.current?.querySelectorAll(`[aria-label="collapse file: ${u.current[a]?.path}"]`);r&&1===r.length&&r[0].focus()}}},[r,S]),(0,s.jsxs)("div",{"data-hpc":!0,ref:L,children:[!f.current&&u.current.map((e,r)=>(0,s.jsx)("div",{style:{paddingTop:0===r?0:16,left:3,right:3},children:(0,s.jsx)(eP,{diffEntryData:u,index:r,splitPreference:l.splitPreference,contextLinePathURL:t,recalcTotalHeightOfVirtualWindow:eu.Z,repo:i,helpUrl:N.helpUrl,oid:j,ignoreWhitespace:g})},e.pathDigest)),f.current&&(0,s.jsx)("div",{style:{height:R.totalSize,width:"100%",position:"relative"},children:R.virtualItems.map(e=>{let r=u.current[e.index];return r?(0,s.jsx)("div",{ref:e.measureRef,"data-key":e.key,style:{position:"absolute",paddingTop:0===e.index?0:16,left:3,right:3,transform:`translateY(${e.start}px)`},children:(0,s.jsx)(eP,{diffEntryData:u,index:e.index,splitPreference:l.splitPreference,contextLinePathURL:t,recalcTotalHeightOfVirtualWindow:w,headerStickyOffset:-e.start,helpUrl:N.helpUrl,repo:i,oid:j,ignoreWhitespace:g,virtualizer:R})},r.pathDigest):null})}),C.moreDiffsToLoad&&(0,s.jsxs)(s.Fragment,{children:[S.loading&&(0,s.jsx)(eA,{}),S.error&&(0,s.jsx)("div",{style:{justifyContent:"center",paddingTop:"16px"},ref:p,children:(0,s.jsx)(ee.Z,{variant:"danger",tabIndex:0,children:(0,s.jsx)("div",{className:"d-flex flex-items-center",style:{justifyContent:"center"},children:"There was a problem loading the remainder of the diff."})})})]})]})}function eB(e,t){let r=e.current?.querySelectorAll(`[data-line-anchor=diff-${t}]`);return!!r&&1===r.length&&(r[0].focus(),!0)}try{eU.displayName||(eU.displayName="Diffs")}catch{}var eM=r(75308);function eO(){let{splitPreference:e,updateSplitPreference:t}=eb();return(0,s.jsxs)(Y.S.Group,{selectionVariant:"single",children:[(0,s.jsx)(Y.S.GroupHeading,{children:"Layout"}),(0,s.jsx)(Y.S.Item,{selected:"unified"===e,onSelect:()=>t("unified"),children:"Unified"}),(0,s.jsx)(Y.S.Item,{selected:"split"===e,onSelect:()=>t("split"),children:"Split"})]})}try{eO.displayName||(eO.displayName="DiffViewPreferenceToggle")}catch{}function e$(){let{hideWhitespace:e,updateHideWhitespace:t}=eb();return(0,s.jsxs)(Y.S.Group,{selectionVariant:"single",variant:"subtle",children:[(0,s.jsx)(Y.S.GroupHeading,{children:"Whitespace"}),(0,s.jsx)(Y.S.Item,{selected:e,onSelect:()=>t(!e),children:"Hide whitespace"})]})}try{e$.displayName||(e$.displayName="DiffWhitespaceToggle")}catch{}function eW(){return(0,s.jsxs)(ek.P,{children:[(0,s.jsx)(ek.P.Anchor,{children:(0,s.jsx)(q.h,{"aria-label":"Diff view settings",icon:R.GearIcon,sx:{ml:2},variant:"invisible"})}),(0,s.jsx)(ek.P.Overlay,{children:(0,s.jsxs)(Y.S,{children:[(0,s.jsx)(eO,{}),(0,s.jsx)(Y.S.Divider,{}),(0,s.jsx)(e$,{})]})})]})}try{eW.displayName||(eW.displayName="DiffViewSettings")}catch{}function ez({treeToggleElement:e,headerInfo:t}){let r=(0,c.useRef)(null),n=function(e){let[t,r]=(0,c.useState)(!1),n=(0,c.useCallback)(e=>{let n=e[e.length-1].intersectionRatio<1;n!==t&&r(n)},[t,r]);return(0,c.useEffect)(()=>{let t=e.current,r=new IntersectionObserver(n,{threshold:[1],rootMargin:"-1px 0px 0px 0px"});return e.current&&r.observe(e.current),()=>{t&&r.unobserve(t)}},[e,n]),t}(r),i=n?{display:["none","inherit"]}:{};return(0,s.jsxs)("div",{className:"d-flex flex-items-center flex-justify-between gap-2 pt-3 pt-lg-4 pb-2 position-sticky top-0 color-bg-default",style:{zIndex:2},ref:r,children:[(0,s.jsxs)("div",{className:"d-flex flex-items-center",children:[e,(0,s.jsxs)(eM.Z,{as:"h2",sx:{fontSize:2,mx:2},children:[t.filesChangedString," file",t.filesChanged>1?"s":""," changed"]}),(0,s.jsxs)(eS.X,{sx:i,isAddition:!0,children:["+",t.additions]}),(0,s.jsxs)(eS.X,{sx:i,isAddition:!1,children:["-",t.deletions]}),(0,s.jsx)(E.Z,{sx:{fontSize:0,ml:2,color:"fg.muted",whiteSpace:"nowrap",...i},children:"lines changed"})]}),(0,s.jsxs)("div",{className:"d-flex",children:[n&&(0,s.jsx)(eV,{}),(0,s.jsx)(eW,{})]})]})}let eV=({sx:e})=>(0,s.jsx)(Z.r,{leadingVisual:R.ArrowUpIcon,variant:"invisible",size:"small",sx:{color:"fg.default",height:"32px",...e},onClick:e=>{e.preventDefault(),window.scrollTo({top:0,behavior:"smooth"})},children:"Top"});try{ez.displayName||(ez.displayName="DiffsHeader")}catch{}try{eV.displayName||(eV.displayName="GoToTopButton")}catch{}var eG=r(46263),eq=r(39173),eY=r(51952);let eJ="diff_file_tree";function eK({diffs:e,onFileSelected:t,diffsHeader:r,unselectedFileExtensions:n,onFileExtensionsChange:i}){let[a,o]=(0,c.useState)(""),l=(0,c.useRef)(null),d=(0,c.useMemo)(()=>new Set(e.map(e=>ew(e.path))),[e]),u=e;n&&n.size>0&&(u=u.filter(e=>!n.has(ew(e.path))));let h=a?u.filter(e=>e.path.toLowerCase().includes(a.toLowerCase())):u;return(0,s.jsxs)("div",{className:"d-flex flex-column gap-2",id:eJ,children:[(0,s.jsx)("h2",{className:"sr-only",children:"File tree"}),(0,s.jsx)("div",{className:"d-md-none",ref:l,children:r}),(0,s.jsx)(eQ,{filterText:a,onFilterTextChange:o,fileExtensions:d,unselectedFileExtensions:n,onFileExtensionsChange:i}),(0,s.jsx)(eq.rm,{activeFilePath:"",diffs:h,onSelect:e=>{t(e,(0,eY.ZV)(window.innerWidth)<=eY._G.medium?"close_tree":void 0)}})]})}function eQ({filterText:e,onFilterTextChange:t,fileExtensions:r,unselectedFileExtensions:n,onFileExtensionsChange:i}){let a=(0,c.useRef)((0,eG.D)(e=>t(e),250));return(0,s.jsx)(ev.LG,{filterText:e,fileExtensions:r,unselectedFileExtensions:n,onFilterTextChange:e=>a.current(e),onFilterChange:(e,t)=>{i(e,t.extension)}})}try{eK.displayName||(eK.displayName="FileTree")}catch{}try{eQ.displayName||(eQ.displayName="FileFilter")}catch{}function eX({diffEntryData:e,contextLinePathURL:t,repo:r,oid:n}){let i=eb(),a=(0,c.useRef)(e),o=(0,eh.M)(),l=(0,d.T)();return(0,s.jsx)("div",{"data-hpc":!0,children:e.map((e,d)=>(0,s.jsx)("div",{children:(0,s.jsx)(eP,{diffEntryData:a,index:d,helpUrl:o.helpUrl,splitPreference:i.splitPreference,contextLinePathURL:t,recalcTotalHeightOfVirtualWindow:eu.Z,repo:r,ignoreWhitespace:l.ignoreWhitespace,oid:n})},e.pathDigest))})}try{eX.displayName||(eX.displayName="SSRDiffs")}catch{}var e0=r(65379);let e1=c.forwardRef(({expanded:e,testid:t,ariaLabel:r,ariaControls:n,onToggleExpanded:i,sx:a,alignment:o,dataHotkey:l,className:d,tooltipDirection:c},u)=>(0,s.jsx)(e0.Z,{"aria-label":r,id:`expand-button-${t}`,direction:c,children:(0,s.jsx)(q.h,{ref:u,"data-testid":e?`collapse-${t}`:`expand-${t}`,"aria-labelledby":`expand-button-${t}`,"aria-expanded":e,"aria-controls":n,icon:e?"left"===o?R.SidebarExpandIcon:R.SidebarCollapseIcon:"left"===o?R.SidebarCollapseIcon:R.SidebarExpandIcon,sx:{color:"fg.muted",...a},"data-hotkey":l,onClick:e=>{i(e)},variant:"invisible",className:d})}));e1.displayName="ExpandButton";let e2=(0,p.rB)();function e3(){(0,y.V)(!0);let e=(0,d.T)(),{splitPagePaneHiddenSx:t,splitPageContentHidden:r,treeToggleElement:n,collapseTree:i}=function(e,t){let r=async function(e,t){if(!t)return;let r=new FormData;r.set("file_tree_visible",e?"true":"false"),(0,F.Q)((0,v.s3)(t),{method:"PUT",body:r,headers:{Accept:"application/json"}})},[n]=(0,g.D)(()=>!1,!0,[]),i=(0,l.x)(),a=(0,c.useRef)(null),o=(0,c.useRef)(null),[d,u]=(0,c.useState)(t),[h,m]=(0,c.useState)(!1),f=(0,c.useCallback)(()=>{(0,eY.ZV)(window.innerWidth)<=eY._G.medium?(m(!0),requestAnimationFrame(()=>o.current?.focus())):(u(!0),r(!0,i),requestAnimationFrame(()=>a.current?.focus()))},[i,r]),p=(0,c.useCallback)(()=>{(0,eY.ZV)(window.innerWidth)<=eY._G.medium?(m(!1),requestAnimationFrame(()=>o.current?.focus())):(u(!1),r(!1,i),requestAnimationFrame(()=>a.current?.focus()))},[i,r]),x=(0,c.useMemo)(()=>(0,s.jsx)(e1,{expanded:d,alignment:"left",ariaLabel:d?"Collapse file tree":"Expand file tree",tooltipDirection:"se",testid:"file-tree-button",ariaControls:e,ref:a,onToggleExpanded:()=>{d?p():f()},sx:{height:"32px",position:"relative"},className:"d-none d-md-flex"}),[d,e,p,f]),y=(0,c.useMemo)(()=>(0,s.jsx)(e1,{expanded:h,alignment:"left",ariaLabel:h?"Collapse file tree":"Expand file tree",tooltipDirection:"se",testid:"file-tree-button",ariaControls:e,ref:o,onToggleExpanded:()=>{h?p():f()},sx:{height:"32px",position:"relative"},className:"d-md-none"}),[h,e,p,f]),j=(0,c.useMemo)(()=>(0,s.jsxs)(s.Fragment,{children:[y,x]}),[y,x]);return{splitPagePaneHiddenSx:n&&!t?{display:"none"}:{flexDirection:["column","column","inherit"],"@media screen and (max-width: 768px)":h?{mt:-3}:{display:"none"},"@media screen and (min-width: 769px)":d?{height:"100vh",maxHeight:"100vh !important"}:{display:"none"}},splitPageContentHidden:{narrow:h,regular:!1},expandTree:f,collapseTree:p,treeToggleElement:j,treeToggleRef:a}}(eJ,e.fileTreeExpanded),[a,o]=(0,c.useState)(new Set),[u]=(0,g.D)(()=>!1,!0,[]),[p,w]=(0,c.useState)(""),C=(0,c.useCallback)((e,t)=>{(0,m.Ze)(`diff-${e.pathDigest}`),w(e.pathDigest),"close_tree"===t&&i()},[i]),N=(0,c.useCallback)((e,t)=>{let r=new Set(a);"selectFileExtension"===e?r.delete(t):"unselectFileExtension"===e&&r.add(t),o(r)},[a]);(0,c.useEffect)(()=>{o(new Set)},[e.commit]),(0,c.useEffect)(()=>{let e=x.iG?.location.hash;if(e?.indexOf("diff-")!==-1){let t=e?.split("diff-");t&&2===t.length&&w(t[1]??"")}},[]);let S=(0,c.useMemo)(()=>({hideWhitespace:e.ignoreWhitespace,splitPreference:e.splitViewPreference}),[e.ignoreWhitespace,e.splitViewPreference]);(0,c.useEffect)(()=>{(x.iG?.scrollY??0)>0&&x.iG?.scrollTo(0,0)},[e.path]);let L=()=>(0,s.jsx)(ez,{treeToggleElement:n,headerInfo:e.headerInfo});return e.unavailableReason?(0,s.jsx)(ed,{commit:e.commit,unavailableReason:e.unavailableReason}):(0,s.jsx)(b.RelayEnvironmentProvider,{environment:e2,children:(0,s.jsxs)(j.jw,{children:[(0,s.jsxs)(j.jw.Header,{children:[(0,s.jsx)("h1",{className:"sr-only",children:e.commit.shortMessage}),(0,s.jsx)(es,{commit:e.commit})]}),(0,s.jsx)(j.jw.Pane,{position:"start",sticky:!0,sx:t,divider:{regular:"line",narrow:"none"},widthStorageKey:"diff-tree-pane-width",resizable:!0,children:(0,s.jsx)(eK,{diffs:e.files,onFileSelected:C,unselectedFileExtensions:a,diffsHeader:(0,s.jsx)(L,{}),onFileExtensionsChange:N})}),(0,s.jsx)(j.jw.Content,{as:"div",width:"full",hidden:r,padding:"none",sx:{p:[3,3,3,4],pt:[0,0,0,0]},children:(0,s.jsx)(h.jR,{children:(0,s.jsxs)(ej,{viewSettings:S,children:[(0,s.jsx)(L,{}),u?(0,s.jsx)(eX,{diffEntryData:e.diffEntryData,contextLinePathURL:e.contextLinePathURL,repo:e.repo,oid:e.commit.oid}):(0,s.jsx)(eU,{ignoreWhitespace:e.ignoreWhitespace,diffEntryData:e.diffEntryData,contextLinePathURL:e.contextLinePathURL,unselectedFileExtensions:a,selectedPathDigest:p,repo:e.repo,oid:e.commit.oid}),(0,s.jsx)(_.W,{commit:e.commit,commentInfo:e.commentInfo}),(0,s.jsx)(f.G7,{})]})})})]})})}try{e3.displayName||(e3.displayName="Commit")}catch{}try{(n=DiffsHeader).displayName||(n.displayName="DiffsHeader")}catch{}function e4({url:e}){return(0,s.jsx)(s.Fragment,{children:(0,s.jsx)(D.Z,{className:"text-center",children:(0,s.jsxs)("p",{className:"color-fg-muted f6 mt-4",children:["Seeing something unexpected? Take a look at the",(0,s.jsxs)(I.Z,{inline:!0,href:e,children:[" ","GitHub commits guide"]}),"."]})})})}try{e4.displayName||(e4.displayName="CommitHelpMessage")}catch{}let e5=(0,c.createContext)({since:null,until:null,author:null,currentBlobPath:"",pagination:{hasNextPage:!1,hasPreviousPage:!1,endCursor:"",startCursor:""},newPath:null,originalBranch:null});function e8({filters:e,children:t}){return(0,s.jsx)(e5.Provider,{value:e,children:t})}function e6(){return(0,c.useContext)(e5)}try{e5.displayName||(e5.displayName="FilterContext")}catch{}try{e8.displayName||(e8.displayName="FilterProvider")}catch{}var e7=r(1998),e9=r(20748);function te(){let e=e6();return e.newPath&&e.originalBranch}function tt(){let e=(0,o.H)(),t=e6();return te()?(0,s.jsx)(e9.c,{sx:{pt:1,pb:0},children:(0,s.jsxs)(D.Z,{sx:{display:"flex",alignItems:"baseline"},children:[(0,s.jsx)(e9.c.Heading,{as:"h3",title:`Renamed to ${t.newPath}`,"data-testid":"commit-note-title"}),(0,s.jsx)(w.r,{to:(0,v.w2)({owner:e.ownerLogin,repo:e.name,ref:t.originalBranch,path:t.newPath}),children:"(Browse History)"})]})}):null}function tr(){let e=(0,A.E3)();return e?.hasRenameCommits?(0,s.jsx)(e9.c,{children:(0,s.jsxs)(D.Z,{sx:{display:"flex",alignItems:"baseline"},children:[(0,s.jsx)(e9.c.Heading,{as:"h3",title:`Renamed from ${e?.oldName}`,"data-testid":"commit-note-title"}),(0,s.jsx)(w.r,{to:e?.historyUrl,children:"(Browse History)"})]})}):null}function tn(){let e=(0,A.E3)();return e?.hasRenameCommits?null:(0,s.jsx)(e9.c,{clipTimeline:"bottom",children:(0,s.jsx)(e9.c.Heading,{as:"h3",title:"End of commit history for this file","data-testid":"commit-note-title"})})}function ti(){let e=e6(),t=(0,A.NN)();return!e.currentBlobPath||e.currentBlobPath&&e.pagination.hasNextPage?null:(0,s.jsxs)(s.Fragment,{children:[t&&(0,s.jsx)(e9.c,{leadingVisual:(0,s.jsx)(eE.Z,{size:"small"})}),!t&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(tr,{}),(0,s.jsx)(tn,{})]})]})}try{tt.displayName||(tt.displayName="RenamedToHistory")}catch{}try{tr.displayName||(tr.displayName="RenamedFromHistory")}catch{}try{tn.displayName||(tn.displayName="EndOfFileHistory")}catch{}try{ti.displayName||(ti.displayName="EndOfFile")}catch{}function ta({commitGroups:e,deferredDataUrl:t,softNavToCommit:r}){let n=e6(),i=(0,o.H)(),a=function(e){let[t,r]=(0,c.useState)(A.Mh);return(0,c.useEffect)(()=>{if(!e)return;let t=!1;return(async()=>{r(A.Mh);let n=await (0,F.v)(e);if(!t)try{if(n.ok){let e=await n.json();e.loading=!1,e&&r(e)}else r(A.wI)}catch(e){r(A.wI)}})(),function(){t=!0}},[e]),t}(t);return(0,s.jsxs)("div",{className:"mb-3","data-hpc":!0,children:[(0,s.jsx)(eM.Z,{as:"h2",className:"sr-only",children:"Commit History"}),(0,s.jsx)(e7.h,{leadingContent:(0,s.jsx)(tt,{}),commitGroups:e,trailingContent:(0,s.jsx)(ti,{}),repository:i,deferredCommitData:a,shouldClipTimeline:function(){let e=te(),t=e6();return!e&&!t.pagination.hasPreviousPage}(),currentBlobPath:n.currentBlobPath,softNavToCommit:r})]})}try{ta.displayName||(ta.displayName="CommitList")}catch{}var ts=r(14136),to=r(51526);function tl({timeoutMessage:e}){let t=e6();return""!==e?(0,s.jsx)($.s,{children:(0,s.jsx)(D.Z,{"data-hpc":!0,children:(0,s.jsxs)(el.Z,{children:[(0,s.jsx)(el.Z.Visual,{children:(0,s.jsx)(R.HourglassIcon,{})}),(0,s.jsx)(el.Z.Heading,{children:"Sorry, this commit history is taking too long to generate. "}),(0,s.jsxs)(el.Z.Description,{children:[(0,s.jsx)(s.Fragment,{children:"Refresh the page to try again, or view this history locally using this command:"}),(0,s.jsx)(to.Z,{"aria-label":"View commit history locally command",value:e,readOnly:!0,onChange:()=>{},trailingAction:(0,s.jsx)(to.Z.Action,{onClick:()=>{(0,ts.z)(e)},icon:R.CopyIcon,"aria-label":"Copy to clipboard",sx:{color:"fg.subtle"}}),sx:{display:"flex",justifyContent:"center"}})]})]})})}):(0,s.jsx)($.s,{children:(0,s.jsx)(D.Z,{"data-hpc":!0,children:(0,s.jsxs)(el.Z,{children:[(0,s.jsx)(el.Z.Visual,{children:(0,s.jsx)(R.GitCommitIcon,{})}),(0,s.jsx)(el.Z.Heading,{children:"No commits history"}),(0,s.jsx)(el.Z.Description,{children:(0,s.jsxs)(s.Fragment,{children:["There isn't any commit history to show here",null!==t.since||null!==t.until?" for the selected date range":""]})})]})})})}try{tl.displayName||(tl.displayName="CommitsBlankState")}catch{}var td=r(44355),tc=r(75922),tu=r(98641),th=r(63595),tm=r(18656),tf=r(15205);async function tp(e){let t=await (0,F.v)(e);return t.ok?await t.json():void 0}let tx=new Map,tg=(0,tf.Z)(tp,{cache:tx});function ty(e,t){let r=new URL(x.ssrSafeLocation.origin+x.ssrSafeLocation.pathname+x.ssrSafeLocation.search,x.ssrSafeLocation.origin),n=r.searchParams;for(let e of t)n.has(e)&&n.delete(e);for(let[t,r]of Object.entries(e))n.set(t,r.toString());return r.pathname+r.search}var tj=r(80803);let tb=(0,c.lazy)(()=>Promise.resolve().then(r.bind(r,13948)).then(e=>({default:e.DatePicker}))),t_=()=>(0,s.jsx)(W.Z,{icon:R.CalendarIcon,sx:{my:"2px",color:"fg.muted"}});function tv({repo:e,refInfo:t,path:r,author:n,contributorsUrl:i,since:a,until:l,sx:d={}}){let u=t.name;u===t.currentOid&&(u=(0,H.Q)(t.currentOid));let h=(0,ep.s)(),m=function(e){let t=(0,o.H)(),[r,n]=(0,c.useState)({users:[],error:!1,loading:!0});return(0,c.useEffect)(()=>{let t=!1;return(async()=>{n({users:[],error:!1,loading:!0});let r=await tg(e);if(t)return;let i=[],a=!1;try{r?i=r.authors:a=!0}catch(e){a=!0}n({users:i,error:a,loading:!1})})(),function(){t=!0}},[t,"",e,"all"]),r}(i),f=c.useMemo(()=>{let e=(0,th.D)(a??""),t=(0,th.D)(l??"");return(0,tm.J)(e)&&(0,tm.J)(t)?{from:e,to:t}:null},[a,l]),p=r?.split("/");return(0,s.jsxs)(D.Z,{sx:{display:"flex",flexDirection:"row",justifyContent:"space-between",gap:2,...d},children:[r&&(0,s.jsx)(D.Z,{sx:{display:"flex",alignItems:"center"},children:(0,s.jsxs)(D.Z,{sx:{display:"flex",alignItems:"baseline",flexDirection:["column","row"]},children:[(0,s.jsx)(eM.Z,{as:"h2",className:"sr-only",children:"Breadcrumbs"}),(0,s.jsx)(E.Z,{sx:{color:"fg.default",whiteSpace:"nowrap"},children:"History for"}),(0,s.jsxs)(tu.Z,{sx:{ml:1},children:[(0,s.jsx)(tu.Z.Item,{href:(0,v.w2)({owner:e.ownerLogin,repo:e.name}),children:e.name}),p.map((r,n,i)=>{let a=(0,v.w2)({owner:e.ownerLogin,repo:e.name,ref:t.name,path:i.slice(0,n+1).join("/")}),o=n===i.length-1;return(0,s.jsx)(tu.Z.Item,{sx:{whiteSpace:"normal",...o?{fontWeight:"bold"}:{}},href:a,selected:o,children:r},a)})]}),(0,s.jsxs)(D.Z,{sx:{whiteSpace:"nowrap"},children:[(0,s.jsx)(E.Z,{sx:{mr:2,ml:[0,2],color:"fg.default"},children:"on"}),(0,s.jsx)(z.Z,{href:(0,v.Qi)({repo:e,commitish:t.name,action:"tree"}),children:u})]})]})}),!r&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eM.Z,{as:"h2",className:"sr-only",children:"Branch selector"}),(0,s.jsx)(td.cq,{cacheKey:t.listCacheKey,canCreate:!1,hotKey:"w",currentCommitish:u,getHref:t=>(0,v.w2)({owner:e.ownerLogin,repo:e.name,ref:t}),selectedRefType:"tree"===t.refType?"branch":t.refType,defaultBranch:e.defaultBranch,owner:e.ownerLogin,repo:e.name,idEnding:"commits"})]}),(0,s.jsxs)(D.Z,{sx:{display:"flex",flexDirection:["column","row"],gap:2},children:[(0,s.jsx)(eM.Z,{as:"h2",className:"sr-only",children:"User selector"}),(0,s.jsx)(tc.s,{defaultText:"All users",width:"medium",usersState:m,showTypedInUser:!0,currentUser:n??void 0,onOpenChange:e=>e,onSelect:e=>{e.login!==n?.login&&h(ty({author:e.login},["author","before","after"]))},renderCustomFooter:()=>(0,s.jsx)(Y.S.LinkItem,{href:ty({},["author"]),children:"View commits for all users"})}),(0,s.jsxs)(c.Suspense,{fallback:(0,s.jsx)(Z.r,{leadingVisual:t_,trailingVisual:R.TriangleDownIcon,children:"All time"}),children:[(0,s.jsx)(eM.Z,{as:"h2",className:"sr-only",children:"Datepicker"}),(0,s.jsx)(tb,{variant:"range",value:f,maxDate:new Date,minDate:new Date(e.createdAt),showTodayButton:!0,showClearButton:!0,compressedHeader:!0,onChange:e=>{if(!e){h(ty({},["since","until"]));return}let t=function(e){if(e)return{startDate:(0,tj.c)(e.from,{representation:"date"}),endDate:(0,tj.c)(e.to,{representation:"date"})}}(e);if(!t)return;let{startDate:r,endDate:n}=t;h(ty({since:r,until:n},["before","after"]))},placeholder:"All time",anchor:({children:e,...t})=>(0,s.jsx)(Z.r,{...t,"data-testid":"date-picker-commits",leadingVisual:t_,trailingVisual:R.TriangleDownIcon,children:e})})]})]})]})}try{tb.displayName||(tb.displayName="DatePicker")}catch{}try{t_.displayName||(t_.displayName="StyledCalendarIcon")}catch{}try{tv.displayName||(tv.displayName="ListHeader")}catch{}var tw=r(33831);function tC({paginationInfo:e}){let t=e.hasPreviousPage,r=e.hasNextPage,n=e=>e?{"aria-disabled":!0,sx:{backgroundColor:"transparent",border:"none",cursor:"default",color:"primer.fg.disabled",fontWeight:"normal"},onClick:e=>e.preventDefault()}:{};return t||r?(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(eM.Z,{as:"h2",className:"sr-only",children:"Pagination"}),(0,s.jsx)(D.Z,{sx:{display:"flex",justifyContent:"center",mt:2},children:(0,s.jsxs)(tw.Z,{children:[(0,s.jsx)(Z.r,{as:w.r,to:tN(e,!1),sx:{color:"accent.fg",fontWeight:"normal"},...n(!t),tabIndex:0,variant:"invisible","data-testid":"pagination-prev-button",leadingVisual:t?()=>(0,s.jsx)(W.Z,{icon:R.ChevronLeftIcon,sx:{color:"accent.fg"}}):null,children:"Previous"}),(0,s.jsx)(Z.r,{as:w.r,to:tN(e,!0),sx:{color:"accent.fg",fontWeight:"normal"},...n(!r),tabIndex:0,variant:"invisible","data-testid":"pagination-next-button",trailingVisual:r?()=>(0,s.jsx)(W.Z,{icon:R.ChevronRightIcon,sx:{color:"accent.fg"}}):null,children:"Next"})]})})]}):null}function tN(e,t){return ty(t?{after:e.endCursor}:{before:e.startCursor},[t?"before":"after"])}try{tC.displayName||(tC.displayName="Pagination")}catch{}var tS=r(81313);function tL({children:e,title:t}){return(0,s.jsxs)(tS.X,{rowGap:"none",children:[(0,s.jsx)(tS.X.Header,{divider:"line",sx:{mb:3},children:(0,s.jsx)(D.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:(0,s.jsx)(eM.Z,{as:"h1",sx:{fontSize:4,fontWeight:"normal",pb:2},id:"commits-pagehead",children:t})})}),(0,s.jsx)(tS.X.Content,{as:"div",children:(0,s.jsx)(D.Z,{children:e})})]})}try{tL.displayName||(tL.displayName="Layout")}catch{}function tR(){let e=(0,o.H)(),t=(0,P.J)(),r=(0,d.T)(),n=r.filters,i=r.commitGroups,a=r.metadata.softNavToCommit;return(0,c.useEffect)(()=>{if(!x.ssrSafeLocation.hash&&window.scrollY>0){let e=document.querySelector("#commits-pagehead");e?.scrollIntoView()}},[r.filters.pagination,r.filters.since,r.filters.until]),(0,s.jsx)(e8,{filters:r.filters,children:(0,s.jsxs)(tL,{title:"Commits",children:[(0,s.jsx)(tv,{repo:e,contributorsUrl:r.metadata.deferredContributorUrl,since:n.since,until:n.until,author:n.author,refInfo:r.refInfo,path:n.currentBlobPath,sx:{mb:3}}),0===i.length&&(0,s.jsx)(tl,{timeoutMessage:r.timedOutMessage}),i.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(ta,{commitGroups:i,deferredDataUrl:r.metadata.deferredDataUrl,softNavToCommit:a}),(0,s.jsx)(tC,{paginationInfo:n.pagination})]}),r.metadata.showProfileHelp&&(0,s.jsx)(e4,{url:`${t.helpUrl}/articles/troubleshooting-commits-on-your-timeline`})]})})}try{tR.displayName||(tR.displayName="Commits")}catch{}(0,a.g)("commits",()=>({App:u,routes:[(0,i.g)({path:"/:owner/:repo/commits",Component:tR}),(0,i.g)({path:"/:owner/:repo/commits/:ref",Component:tR}),(0,i.g)({path:"/:owner/:repo/commits/:ref/:path/*",Component:tR}),(0,i.g)({path:"/:owner/:repo/commit/:oid",Component:e3}),(0,i.g)({path:"/:owner/:repo/commit/:oid/:path/*",Component:e3}),(0,i.g)({path:"/_view_fragments/Voltron::CommitFragmentsController/show/:owner/:repo/:name/repo_layout",Component:e3})]}))},67941:(e,t,r)=>{r.d(t,{I:()=>a});var n=r(58081),i=r(90044);function a(e,t){let r=(0,i.F)(e,t);return(0,n.useCallback)(async n=>{let i=t;if(!r)throw Error(`No authenticity token found for method ${i} and path ${e}`);return n||(n={}),s(n,"X-Requested-With","XMLHttpRequest"),n.body instanceof URLSearchParams&&"delete"===i&&(n.body.append("_method","delete"),i="post"),n.body instanceof URLSearchParams||n.body instanceof FormData?n.body.append("authenticity_token",r):s(n,"Scoped-CSRF-Token",r),await fetch(e,{...n,method:i})},[e,t,r])}function s(e,t,r){e.headers??(e.headers=new Headers);let n=e.headers;if(n instanceof Headers)n.set(t,r);else if(Array.isArray(n)){let e=n.findIndex(([e])=>e===t);-1===e?n.push([t,r]):n[e]=[t,r]}else n[t]=r}},75922:(e,t,r)=>{r.d(t,{s:()=>b});var n=r(48055),i=r(79804),a=r(85529),s=r(42483),o=r(45677),l=r(98833),d=r(97011),c=r(14786),u=r(51526),h=r(74121),m=r(51461),f=r(58081),p=r(63984);let x=f.memo(function({user:e,isCurrent:t,onSelect:r}){return(0,n.jsxs)(c.S.Item,{selected:t,onSelect:()=>{r&&r(e)},children:[(0,n.jsx)(c.S.LeadingVisual,{children:(0,n.jsx)(i.O,{src:e.primaryAvatarUrl,square:e.path.startsWith("/apps/")})}),e.login,(0,n.jsx)(c.S.Description,{children:e.name})]})});try{x.displayName||(x.displayName="UserItem")}catch{}function g(e){return e.users.length>20?(0,n.jsx)(j,{...e}):(0,n.jsx)(y,{...e})}function y({users:e,currentUser:t,onSelect:r,sx:i={}}){return(0,n.jsx)(s.Z,{sx:{maxHeight:330,overflowY:"auto",...i},children:e.map(e=>(0,n.jsx)(x,{user:e,isCurrent:e.login===t?.login,onSelect:r},e.login))})}function j({users:e,currentUser:t,onSelect:r,sx:i={}}){return(0,n.jsx)(p.H,{items:e,itemHeight:33,sx:{maxHeight:330,overflowY:"auto",...i},makeKey:e=>e.login,renderItem:e=>(0,n.jsx)(x,{user:e,isCurrent:e.login===t?.login,onSelect:r},e.login)})}try{g.displayName||(g.displayName="UsersList")}catch{}try{y.displayName||(y.displayName="FullUsersList")}catch{}try{j.displayName||(j.displayName="VirtualUsersList")}catch{}function b(e){let{defaultText:t,usersState:r,currentUser:u,onSelect:h,hotKey:m,onOpenChange:p,renderCustomFooter:x,size:y,showTypedInUser:j=!1,width:b="large",label:N=""}=e,[S,L]=(0,f.useState)(""),R=function(e,t){let r=t.trim().toLowerCase();return r?e.filter(e=>e.login.toLowerCase().includes(r)||e.name?.toLowerCase().includes(r)):e}(r.users,S);return(0,n.jsx)(s.Z,{children:(0,n.jsxs)(o.P,{onOpenChange:p,children:[(0,n.jsx)(o.P.Button,{"data-hotkey":m,size:y,"data-testid":"user-selector-button",children:(0,n.jsxs)(s.Z,{sx:{display:"flex"},children:[(0,n.jsx)(s.Z,{sx:{mr:2},children:u?(0,n.jsx)(i.O,{size:16,src:u.primaryAvatarUrl,square:u.path.startsWith("/apps/")}):(0,n.jsx)(l.Z,{icon:a.PeopleIcon,size:"small",sx:{color:"fg.muted"}})}),(0,n.jsx)(s.Z,{sx:{maxWidth:125,overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:u?(0,n.jsxs)(d.Z,{children:[N,u.login]}):(0,n.jsx)(d.Z,{children:t})})]})}),(0,n.jsx)(o.P.Overlay,{width:b,children:(0,n.jsxs)(c.S,{showDividers:!0,selectionVariant:"single",children:[(0,n.jsx)(_,{defaultText:S,onFilterChange:L}),(0,n.jsx)(c.S.Divider,{}),r.loading?(0,n.jsx)(v,{}):r.error?(0,n.jsx)(w,{}):0===R.length?(0,n.jsx)(C,{showTypedInUser:j,filterText:S,onSelect:h}):(0,n.jsx)(g,{users:R,currentUser:u,onSelect:h,sx:x?{pb:"10px",pt:1}:{pt:1}}),x&&(0,n.jsx)(c.S.Divider,{sx:{marginTop:0}}),x?.()]})})]})})}function _({onFilterChange:e,defaultText:t}){return(0,n.jsx)(c.S.Group,{sx:{px:2},children:(0,n.jsx)(u.Z,{leadingVisual:a.SearchIcon,value:t,sx:{width:"100%"},placeholder:"Find a user...",onChange:t=>e(t.target.value)})})}function v(){return(0,n.jsx)(s.Z,{sx:{display:"flex",justifyContent:"center",p:2},children:(0,n.jsx)(h.Z,{size:"medium","aria-label":"Loading users..."})})}function w(){return(0,n.jsx)(m.Z,{variant:"danger",children:"Could not load users"})}function C({showTypedInUser:e,filterText:t,onSelect:r}){return e?(0,n.jsx)(c.S.Item,{sx:{display:"flex",justifyContent:"center",mb:2},onSelect:()=>{r&&r({login:t,name:t,path:"",primaryAvatarUrl:""})},children:(0,n.jsxs)(n.Fragment,{children:["Filter on author\xa0",(0,n.jsx)(s.Z,{as:"span",sx:{fontWeight:600},children:t})]})}):(0,n.jsx)(s.Z,{sx:{p:3,display:"flex",justifyContent:"center"},children:"Nothing to show"})}try{b.displayName||(b.displayName="UserSelector")}catch{}try{_.displayName||(_.displayName="UserFilter")}catch{}try{v.displayName||(v.displayName="Loading")}catch{}try{w.displayName||(w.displayName="LoadingFailed")}catch{}try{C.displayName||(C.displayName="UsersZeroState")}catch{}},12300:(e,t,r)=>{r.r(t),r.d(t,{default:()=>m});var n,i=r(48055),a=r(15631),s=r(51461),o=r(42483),l=r(74121),d=r(97011),c=r(58081);function u(e){e&&(e.load=e.hello=null,e.helloTimer&&(clearTimeout(e.helloTimer),e.helloTimer=null),e.loadTimer&&(clearTimeout(e.loadTimer),e.loadTimer=null))}function h(e,t){e&&e.postMessage&&e.postMessage(JSON.stringify(t),"*")}function m({identityUuid:e,size:t,type:r,url:d}){let[m]=(0,a.D)(()=>window.location.origin,"https://www.github.com",[]),p=new URL(d,m).origin,{renderState:x,errorMsg:g,iFrameRef:y,containerRef:j}=function(e){let[t,r]=function(e){let[t,r]=(0,c.useState)(e),n=(0,c.useRef)(t);return[n,e=>{n.current=e,r(e)}]}("LOADING"),n=(0,c.useRef)(null),i=(0,c.useRef)(null),a=(0,c.useRef)(null),s=(0,c.useRef)({untimed:!0}),o=(0,c.useCallback)(t=>(function(e,t,r,n,i,a,s){if(e.origin!==t)return;let o=function(e){var t;let r=e.data;if(!r)return null;if("string"==typeof r)try{r=JSON.parse(r)}catch{return null}return"object"==typeof(t=r)&&t&&"render"===t.type&&"string"==typeof t.body&&"object"==typeof t.payload?r:null}(e);if(!o){a("ERROR");return}let l=o.body,d=null!=o.payload?o.payload:void 0,c=r.current?.contentWindow;switch(l){case"hello":(i.current??{untimed:!0}).hello=Date.now(),h(c,{type:"render:cmd",body:{cmd:"ack",ack:!0}}),h(c,{type:"render:cmd",body:{cmd:"branding",branding:!1}});break;case"error":case"error:fatal":case"error:invalid":d&&s(d.error??null),a("ERROR");break;case"loading":a("LOADING");break;case"loaded":a("LOADED");break;case"ready":d&&"number"==typeof d.height&&n.current&&(n.current.style.height=`${d.height}px`),a("READY");break;case"resize":d&&"number"==typeof d.height&&n.current&&(n.current.style.height=`${d.height}px`);break;case"code_rendering_service:container:get_size":h(c,{type:"render:cmd",body:{cmd:"code_rendering_service:container:size","code_rendering_service:container:size":{width:n.current?.getBoundingClientRect().width}}});break;case"code_rendering_service:markdown:get_data":if(!r.current||!n.current)return;!function(e,t){let r=e.getAttribute("data-content");if(!r)return;let n={type:"render:cmd",body:{cmd:"code_rendering_service:data:ready","code_rendering_service:data:ready":{data:JSON.parse(r).data,width:t.getBoundingClientRect().width}}};h(e.contentWindow,n)}(r.current,n.current)}})(t,e,i,a,s,r,e=>n.current=e),[e,r]);return(0,c.useEffect)(()=>{u(s.current);let e=e=>{("LOADING"===t.current||"LOADED"===t.current)&&(!e||s.current.hello)&&r("ERROR")};return s.current={load:Date.now(),hello:null,helloTimer:window.setTimeout(e,1e4,!0),loadTimer:window.setTimeout(e,45e3)},()=>{u(s.current)}},[t,r]),(0,c.useEffect)(()=>(window.addEventListener("message",o),()=>window.removeEventListener("message",o)),[o]),{renderState:t.current,errorMsg:n.current,iFrameRef:i,containerRef:a}}(p);if("ipynb"===r&&t>3e7||t>2e8)return(0,i.jsx)(s.Z,{variant:"danger",children:"Sorry, this is too big to display."});let b=x!==n.READY?{height:"1px",width:"1px",position:"fixed",bottom:0,right:0}:{height:"100%",width:"100%"};return(0,i.jsx)(o.Z,{sx:{width:"100%",display:"flex",justifyContent:"center"},children:(0,i.jsxs)(o.Z,{"data-hpc":!0,"data-host":p,"data-type":r,ref:j,sx:{width:1024,...x!==n.ERROR?{borderBottomLeftRadius:"6px",borderBottomRightRadius:"6px",lineHeight:"0",padding:5,textAlign:"center"}:{},...x===n.READY?{height:"500px",padding:0,background:"none"}:{}},children:[x===n.ERROR?(0,i.jsx)(f,{error:g}):x!==n.READY?(0,i.jsx)(l.Z,{size:"large",sx:{mx:"auto"}}):null,x!==n.ERROR&&(0,i.jsx)(o.Z,{as:"iframe",ref:y,src:`${d}#${e}`,sandbox:"allow-scripts allow-same-origin allow-top-navigation",sx:{border:0,display:"block",...b},name:e,title:"File display",children:"Viewer requires iframe."})]})})}function f({error:e}){if(!e)return(0,i.jsx)(s.Z,{variant:"danger",children:"Unable to render code block"});let t=e.split("\n");return(0,i.jsxs)(s.Z,{variant:"danger",children:[(0,i.jsx)(d.Z,{as:"p",sx:{fontWeight:"bold"},children:"Error rendering embedded code"}),(0,i.jsx)(d.Z,{as:"p",children:t.map((e,t)=>(0,i.jsxs)(c.Fragment,{children:[e,(0,i.jsx)("br",{})]},`error-line-${t}`))})]})}!function(e){e.ERROR="ERROR",e.LOADING="LOADING",e.LOADED="LOADED",e.READY="READY"}(n||(n={}));try{m.displayName||(m.displayName="FileRendererBlob")}catch{}try{f.displayName||(f.displayName="FileRendererErrorMessage")}catch{}},5475:(e,t,r)=>{r.d(t,{g:()=>n});function n({path:e,Component:t,shouldNavigateOnError:r,transitionType:n,children:i}){return{path:e,Component:t,coreLoader:async function({location:e}){let t;try{let r=`${e.pathname}${e.search}`;t=await window.fetch(r,{headers:{Accept:"application/json","X-Requested-With":"XMLHttpRequest","X-GitHub-Target":"dotcom"}})}catch(e){return{type:r?"route-handled-error":"error",error:{type:"fetchError"}}}if(t.redirected)return{type:"redirect",url:t.url};if(!t.ok)return{type:r?"route-handled-error":"error",error:{type:"httpError",httpStatus:t.status}};try{let e=await t.json();return{type:"loaded",data:e,title:e.title}}catch(e){return{type:r?"route-handled-error":"error",error:{type:"badResponseError"}}}},loadFromEmbeddedData:function({embeddedData:e}){return{data:e,title:e.title}},transitionType:n,children:i}}},30953:(e,t,r)=>{r.d(t,{K:()=>o});var n=r(48055),i=r(79804),a=r(42483),s=r(21673);function o({zIndex:e,altText:t,hovercardUrl:r,src:o,square:l,icon:d,iconColor:c,backgroundColor:u,backgroundSx:h,sx:m,size:f=20}){return(0,n.jsxs)(a.Z,{sx:{position:"relative",display:"flex",gap:2,alignItems:"center",...e,...m},children:[(0,n.jsx)(i.O,{alt:t,"data-hovercard-url":r,size:f,square:l,src:o}),(0,n.jsx)(s.J,{icon:d,iconColor:c,size:12,backgroundColor:u,backgroundSx:h})]})}try{o.displayName||(o.displayName="StatusAvatar")}catch{}},21673:(e,t,r)=>{r.d(t,{J:()=>s});var n=r(48055),i=r(42483),a=r(98833);function s({iconColor:e,icon:t,size:r=12,backgroundColor:s="fg.onEmphasis",absolute:o=!0,backgroundSx:l}){let d,c;return 12===r?(d="10px",c="1px"):20===r?(d="16px",c="2px"):(d="16px",c="4px"),(0,n.jsxs)(i.Z,{sx:{display:"flex",borderRadius:"100px",...o?{position:"absolute",bottom:-1,right:-1,boxShadow:"0 0 0 2px var(--bgColor-default, var(--color-canvas-default))",backgroundColor:"var(--bgColor-default, var(--color-canvas-default))"}:{position:"relative"},...l},children:[(0,n.jsx)(i.Z,{sx:{display:"flex",position:"absolute",borderRadius:"100px",width:d,height:d,left:c,top:c,backgroundColor:s}}),(0,n.jsx)(a.Z,{icon:t,size:r,sx:{color:e,position:"relative"}})]})}try{s.displayName||(s.displayName="StatusIcon")}catch{}}},e=>{var t=t=>e(e.s=t);e.O(0,["react-lib","vendors-node_modules_dompurify_dist_purify_js","vendors-node_modules_primer_octicons-react_dist_index_esm_js-node_modules_primer_react_lib-es-541a38","vendors-node_modules_primer_react_lib-esm_Box_Box_js","vendors-node_modules_primer_react_lib-esm_FeatureFlags_FeatureFlags_js-node_modules_github_ca-9009bd","vendors-node_modules_primer_react_lib-esm_Button_Button_js","vendors-node_modules_primer_react_lib-esm_TooltipV2_Tooltip_js","vendors-node_modules_primer_behaviors_dist_esm_focus-zone_js","vendors-node_modules_primer_react_node_modules_primer_octicons-react_dist_index_esm_mjs","vendors-node_modules_primer_react_lib-esm_ActionList_index_js","vendors-node_modules_primer_react_lib-esm_TextInput_TextInput_js","vendors-node_modules_primer_react_lib-esm_AnchoredOverlay_AnchoredOverlay_js","vendors-node_modules_primer_react_lib-esm_FormControl_FormControl_js","vendors-node_modules_primer_react_lib-esm_ActionMenu_ActionMenu_js","vendors-node_modules_react-router-dom_dist_index_js","vendors-node_modules_primer_react_lib-esm_SelectPanel_SelectPanel_js","vendors-node_modules_github_relative-time-element_dist_index_js","vendors-node_modules_braintree_browser-detection_dist_browser-detection_js-node_modules_githu-fd5530","vendors-node_modules_react-relay_index_js","vendors-node_modules_date-fns_format_mjs","vendors-node_modules_primer_react_lib-esm_ConfirmationDialog_ConfirmationDialog_js","vendors-node_modules_primer_react_lib-esm_Heading_Heading_js-node_modules_primer_react_lib-es-38c617","vendors-node_modules_date-fns_addWeeks_mjs-node_modules_date-fns_addYears_mjs-node_modules_da-827f4f","vendors-node_modules_primer_react_lib-esm_PageLayout_PageLayout_js-node_modules_github_hydro--f8521d","vendors-node_modules_primer_react_lib-esm_Avatar_Avatar_js-node_modules_primer_react_lib-esm_-864296","vendors-node_modules_primer_react_lib-esm_Popover_Popover_js-node_modules_date-fns_difference-a582b2","vendors-node_modules_primer_react_lib-esm_Button_LinkButton_js-node_modules_primer_react_lib--dc4139","vendors-node_modules_primer_react_lib-esm_AvatarStack_AvatarStack_js-node_modules_primer_reac-6dc608","vendors-node_modules_github_quote-selection_dist_index_js-node_modules_primer_react_lib-esm_B-48712a","ui_packages_react-core_register-app_ts","ui_packages_list-view_list-view_ts","ui_packages_relay-environment_relay-environment_ts","ui_packages_item-picker_components_RepositoryPicker_tsx","ui_packages_date-picker_date-picker_ts","ui_packages_issue-create_dialog_CreateIssueDialogEntry_tsx","ui_packages_ref-selector_RefSelector_tsx","ui_packages_analytics-provider_analytics-provider_ts-ui_packages_commenting_hooks_use-markdow-ff15c9","ui_packages_commit-attribution_index_ts-ui_packages_commit-checks-status_index_ts-ui_packages-59a8e3","ui_packages_diff-file-header_diff-file-header_ts-ui_packages_diff-file-tree_diff-file-tree_ts-e2f8a0"],()=>t(25365)),e.O()}]);
//# sourceMappingURL=commits-b8413ce2d09b.js.map