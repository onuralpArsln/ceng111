"use strict";(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([["ui_packages_diff-file-header_diff-file-header_ts-ui_packages_diff-file-tree_diff-file-tree_ts-e2f8a0"],{85782:(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});let i={kind:"InlineDataFragment",name:"useFetchCommitThreadCommitComment"};i.hash="1ae58e39387fb525a2e2cbc71008f683";let a=i},12582:(e,t,n)=>{n.d(t,{f:()=>d});var i=n(52674),a=n(32458),r=n(22326),l=n(24533),s=n(87623),o=n(58081);function d(){let e=(0,i.H)(),{commit:t}=(0,l.T)(),n=`/${(0,r.j9)(e.ownerLogin)}/${(0,r.j9)(e.name)}/commit_comment/create`,d=`/${(0,r.j9)(e.ownerLogin)}/${(0,r.j9)(e.name)}/commit_comment`,c=(0,o.useCallback)(async(e,i,a)=>{let r=new FormData;r.append("commit_id",t.oid),r.append("comment[body]",e),i&&a&&(r.append("path",i),r.append("position",a.toString()));let l=await (0,s.Q)(n,{method:"POST",body:r});return l.ok?{error:null,comment:(await l.json()).comment}:{error:Error("Failed to add comment"),comment:null}},[t.oid,n]),u=(0,o.useCallback)(async(e,t)=>{let n=new FormData;n.append("_method","put"),n.append("commit_comment[id]",t.id.toString()),n.append("commit_comment[body]",e),n.append("commit_comment[bodyVersion]",t.bodyVersion);let i=await (0,s.Q)(d,{method:"POST",body:n});if(!i.ok)return{error:Error("Failed to edit comment"),updatedFields:null};{let e=await i.json();return{error:null,updatedFields:{body:e.source,bodyVersion:e.bodyVersion,htmlBody:e.body}}}},[d]),m=a.Z;return(0,o.useMemo)(()=>({addComment:c,editComment:u,deleteComment:m}),[c,m,u])}},8152:(e,t,n)=>{n.d(t,{J:()=>a});var i=n(12008);function a(){return(0,i.M)()}},51246:(e,t,n)=>{n.d(t,{WU:()=>d,uD:()=>o});var i=n(22326),a=n(71207),r=n(87623),l=n(58081);n(22578);var s=n(24167);function o({repo:e,commit:t,viewerCanReply:n}){return(0,l.useCallback)(a=>new Promise(async(l,s)=>{let[o,c]=a.split("::");if(!o||!c){s(Error("Invalid threadId"));return}let u=await (0,r.v)((0,i.bs)({owner:e.ownerLogin,repo:e.name,commitOid:t.oid,path:o,position:c}));if(u.ok){let i=await u.json();l(i.comments?{commentsData:{comments:i.comments.map(n=>d(n,t,e))},id:a,viewerCanReply:n}:void 0)}else s(Error("Failed to fetch thread"))}),[t,e,n])}function d(e,t,n){return{publishedAt:void 0,state:"",viewerRelationship:"",id:e.relayId,databaseId:e.id,body:e.body,bodyHTML:e.htmlBody,bodyVersion:e.bodyVersion,createdAt:e.createdAt,url:`${a.iG?.location}#${e.urlFragment}`,authorAssociation:e.authorAssociation?.toUpperCase(),author:{id:e.author.id,login:e.author.login,avatarUrl:e.author.avatarUrl,url:""},isHidden:e.isHidden,lastUserContentEdit:e.lastUserContentEdit,minimizedReason:e.minimizedReason,subjectType:"commit",viewerCanMinimize:e.viewerCanMinimize,viewerCanSeeMinimizeButton:e.viewerCanMinimize,viewerCanSeeUnminimizeButton:e.viewerCanMinimize,viewerCanDelete:e.viewerCanDelete,viewerCanUpdate:e.viewerCanUpdate,viewerCanReport:e.viewerCanReport,viewerCanReportToMaintainer:e.viewerCanReportToMaintainer,viewerCanBlockFromOrg:e.viewerCanBlockFromOrg,viewerCanUnblockFromOrg:e.viewerCanUnblockFromOrg,viewerDidAuthor:e.viewerDidAuthor,reference:{number:void 0,text:(0,s.Q)(t.oid),author:{login:t.authors.length>0?t.authors[0]?.login??"":""}},repository:{id:n.id.toString(),isPrivate:n.private,name:n.name,owner:{id:n.ownerLogin,login:n.ownerLogin,url:""}}}}n(85782)},24167:(e,t,n)=>{n.d(t,{Q:()=>i});function i(e){return e.slice(0,7)}},61113:(e,t,n)=>{n.d(t,{i:()=>i});function i(e,t){return"d28fac7f18aeacb00d8ad3460a0a5a901617c2d4"===e&&15803047===t}},34996:(e,t,n)=>{n.d(t,{Rm:()=>R,hA:()=>y,dc:()=>x,sR:()=>eO,Kg:()=>eE,sf:()=>eC,VM:()=>eM,am:()=>eI,uN:()=>u});var i=n(48055),a=n(87250),r=n(42483),l=n(58081);let{getItem:s,removeItem:o,setItem:d}=(0,n(56363)._)("localStorage"),c=(e,t)=>{let{diffSide:n,filePath:i,line:a,subjectId:r}=e;if(t)return`PullRequest:${r}-File:${i}`;if(void 0!==a&&void 0!==n)return`PullRequest:${r}-File:${i}-Line:${a}-DiffSide:${n}`;throw Error("Cannot build diff line comment cache key for a comment without a line number or diff side")};function u({diffSide:e,filePath:t,handlePersistedCommentExists:n,line:i,subjectId:a,threadId:r,fileLevelComment:u}){let m,h;let f=(0,l.useMemo)(()=>r||(r??c({diffSide:e,filePath:t,line:i,subjectId:a},u)),[e,t,i,a,r,u]),{hasPersistedComment:p,removePersistedCommentFromStorage:g}=(m=s(f),h=!!m?.text?.trim(),(0,l.useEffect)(()=>{h&&n?.(m)},[h]),{hasPersistedComment:h,removePersistedCommentFromStorage:()=>{o(f),h=!1,m=null}});return{hasPersistedComment:p,persistCommentToStorage:e=>{let t={text:e.text};e.startLine&&e.startSide&&(t={...t,startLine:e.startLine,startSide:e.startSide}),d(f,t)},removePersistedCommentFromStorage:g}}function m(e,t){for(let n of function e(t,n=[]){if(""===t)return n;let i=t.match(h());if(!i)return n;let a=i.groups.fence;if(!a)return n;let r=a.includes("~")?"~":"`",l=t.match(function(e,t){let n=h([e],t);return RegExp(`${n.source}(?:\r?
)(?<suggestion>.*?)(?:\r?
)^ {0,3}${e}{${t},}[ 	]*$`,"ms")}(r,a.length));if(!l)return n;let s=0,o=i.groups.indent;""!==o&&(s=o.length);let d=l.groups.suggestion;if(s>0){let e=RegExp(`^ {0,${s}}`,"m");d=d.replace(e,"")}return n.push(d),e(t.slice(l.index+l[0].length),n)}(e))if(n===t)return{isValid:!1,errorMessage:"Suggested change cannot be the same as the original line"};return{isValid:!0,errorMessage:""}}function h(e=["`","~"],t){let n=t?`{${t}}`:"{3,}",i=e.map(e=>`${e}${n}`);return RegExp(`^(?<indent> {0,3})(?<fence>${i.join("|")})suggestion[ 	]*$`,"m")}var f=n(5833);let p=(0,l.createContext)(null),g=()=>(0,l.useContext)(p),x=p.Provider;try{p.displayName||(p.displayName="ConversationMarkdownSubjectContext")}catch{}let y=(0,l.forwardRef)(({children:e,...t},n)=>{let a=g();return(0,i.jsx)(f.q,{...t,ref:n,placeholder:"Leave a comment",actions:e,subject:a??void 0,showLabel:!1})});function b({batchPending:e,batchingEnabled:t,commentBoxConfig:n,condensed:s,fileLevelComment:o,filePath:d,focusOnMount:c,isReplying:h,lineNumber:f,onAddComment:p,onCancelComment:g,onPersistedCommentExists:x,side:b,subjectId:C,threadId:j,suggestedChangesConfig:v}){let[N,S]=(0,l.useState)(""),[w,L]=(0,l.useState)(!1),[k,I]=(0,l.useState)(),E=(0,l.useRef)(null),{persistCommentToStorage:D,removePersistedCommentFromStorage:T}=u({diffSide:b,filePath:d,line:f,subjectId:C,threadId:j,handlePersistedCommentExists:({text:e})=>{e&&(S(e),x?.())},fileLevelComment:!!o});(0,l.useEffect)(()=>{c&&setTimeout(()=>E.current?.focus(),100)},[c]);let R=({submitBatch:e})=>{L(!0),I(void 0);let t=m(N,v?.sourceContentFromDiffLines??"");if(!t.isValid){I(t.errorMessage),L(!1);return}p?.({commentText:N,onCompleted(){L(!1),F()},onError(e){L(!1);let t="Failed to save comment";e.message&&(t=`${t}: ${e.message}`),I(t)},submitBatch:e})},O=()=>R({submitBatch:!1}),A=()=>R({submitBatch:!0}),F=()=>{T(),S(""),g?.()},_={footer:{justifyContent:h?"end":"space-between","> div:first-child":{display:s||h?"none":"flex"},...s&&{"> div:last-child":{display:"flex",flexDirection:"column",width:"100%"}}}};return(0,i.jsx)(r.Z,{sx:{display:"flex",flexDirection:"column",fieldset:{minWidth:0,width:["100%"]}},children:(0,i.jsxs)(y,{ref:E,label:"Add diff comment",sx:_,value:N,onChange:e=>{I(void 0),D({text:e}),S(e)},onPrimaryAction:t?O:A,userSettings:n,suggestedChangesConfig:v,markdownErrorMessage:k,children:[g&&(0,i.jsx)(a.n,{disabled:w,sx:{py:1,px:2},variant:"default",onClick:F,children:"Cancel"}),!e&&(0,i.jsx)(a.n,{disabled:w||!N.length,sx:{py:1,px:2},variant:t?"default":"primary",onClick:A,children:h?"Reply":"Add comment"}),t&&(0,i.jsx)(a.n,{disabled:w||!N.length,sx:{py:1,px:2},variant:"primary",onClick:O,children:e?"Add review comment":"Start a review"})]})})}y.displayName="ConversationCommentBox";try{b.displayName||(b.displayName="AddCommentEditor")}catch{}var C=n(59434),j=n(44459),v=n(48542),N=n(17840),S=n(74121),w=n(9770),L=n(51526),k=n(17791),I=n(59148);function E({children:e,footerButtons:t}){let{containerRef:n}=(0,N.v)({bindKeys:v.Qw.ArrowHorizontal|v.Qw.Tab,focusInStrategy:"closest"});return t?(0,i.jsx)(I.V.Footer,{ref:n,children:(0,i.jsxs)(r.Z,{sx:{display:"flex",flexDirection:"column"},children:[(0,i.jsx)(r.Z,{sx:{display:"flex",flexDirection:"row",gap:2,justifyContent:"flex-end"},children:(0,i.jsx)(I.V.Buttons,{buttons:t})}),e]})}):null}let D={CHANGE_COMMIT_MESSAGE:"CHANGE_COMMIT_MESSAGE",CHANGE_EXTENDED_DESCRIPTION:"CHANGE_EXTENDED_DESCRIPTION"};function T(e,t){switch(t.type){case D.CHANGE_COMMIT_MESSAGE:return{...e,commitMessage:t.payload};case D.CHANGE_EXTENDED_DESCRIPTION:return{...e,extendedDescription:t.payload};default:return console.error("Unknown suggested change action."),e}}function R({authorLogins:e,batchSize:t,onClose:n,onCommit:a}){let s=(0,j.Z)(),{sendAnalyticsEvent:o}=(0,C.z)(),[d,c]=(0,l.useState)(!1),[u,m]=(0,l.useState)(),[h,f]=(0,l.useReducer)(T,{commitMessage:1===e.length?`Apply suggestion from @${e[0]}`:1===new Set(e).size?`Apply suggestions from @${e[0]}`:"Apply suggestions from code review",extendedDescription:""}),p=(0,l.useCallback)((e,t,n)=>{if(!s())return;let i="There was an error trying to commit changes";n?i+=`: ${n}`:i+=".",c(!1),m(i)},[s]),g=(0,l.useCallback)(()=>{s()&&(c(!1),u&&m(void 0))},[u,s]),x=(0,l.useCallback)(()=>{d||(c(!0),o("comments.commit_suggestion","COMMIT_SUGGESTION_DIALOG_BUTTON",{batchSize:t}),a(`${h.commitMessage}

${h.extendedDescription}`,p,g))},[t,h.commitMessage,h.extendedDescription,g,p,d,a,o]);return(0,i.jsxs)(I.V,{title:"Apply suggestion",renderFooter:()=>(0,i.jsx)(E,{footerButtons:[{content:"Cancel",onClick:n},{content:(0,i.jsxs)(r.Z,{as:"span",sx:{display:"flex",flexDirection:"row",alignItems:"center"},children:["Commit changes",d&&(0,i.jsx)(S.Z,{size:"small",sx:{ml:1}})]}),onClick:x,buttonType:"primary"}],children:u&&(0,i.jsx)(w.Z.Validation,{sx:{mt:2,pt:1,justifyContent:"flex-end"},variant:"error",children:u})}),onClose:n,children:[(0,i.jsxs)(w.Z,{sx:{mb:2},children:[(0,i.jsx)(w.Z.Label,{children:"Commit message"}),(0,i.jsx)(L.Z,{block:!0,name:"commit_message",onChange:e=>f({type:D.CHANGE_COMMIT_MESSAGE,payload:e.target.value}),value:h.commitMessage})]}),(0,i.jsxs)(w.Z,{children:[(0,i.jsx)(w.Z.Label,{children:"Extended description (optional)"}),(0,i.jsx)(k.ZP,{block:!0,rows:3,placeholder:"Add an optional description...",onChange:e=>f({type:D.CHANGE_EXTENDED_DESCRIPTION,payload:e.target.value}),value:h.extendedDescription})]})]})}try{E.displayName||(E.displayName="DialogFooter")}catch{}try{R.displayName||(R.displayName="ApplySuggestionDialog")}catch{}var O=n(32458),A=n(2708);let F=(0,l.createContext)({});function _({children:e}){let[t,n]=(0,l.useState)(!1),a=(0,l.useMemo)(()=>({isDialogOpen:t,setIsDialogOpen:n}),[t,n]);return(0,i.jsx)(F.Provider,{value:a,children:e})}let M=()=>(0,l.useContext)(F);try{F.displayName||(F.displayName="DialogStateContext")}catch{}try{_.displayName||(_.displayName="DialogStateProvider")}catch{}var P=n(85529),$=n(50919),B=n(98399),U=n(97011);function Z({markerId:e,markers:t}){let n=t.findIndex(t=>t.id===e);return(0,i.jsxs)(U.Z,{sx:{color:"fg.muted"},children:[(0,i.jsx)(U.Z,{sx:{fontWeight:500,color:"fg.default"},children:n+1})," of"," ",(0,i.jsx)(U.Z,{sx:{fontWeight:500,color:"fg.default"},children:t.length})]})}function H({markerId:e,markerNavigationImplementation:t,onNavigate:n}){let{incrementActiveMarker:a,decrementActiveMarker:l,filteredMarkers:s}=t;return s.find(t=>t.id===e)&&s.length>1?(0,i.jsxs)(r.Z,{sx:{pr:1,display:"flex",flexDirection:"row",alignItems:"center"},children:[(0,i.jsx)($.h,{"aria-label":"Load previous marker",icon:P.ChevronLeftIcon,variant:"invisible",onClick:()=>{l(e),n()}}),(0,i.jsx)($.h,{"aria-label":"Load next marker",icon:P.ChevronRightIcon,variant:"invisible",onClick:()=>{a(e),n()}}),(0,i.jsx)(r.Z,{sx:{ml:1},children:(0,i.jsx)(Z,{markerId:e,markers:s})})]}):null}try{Z.displayName||(Z.displayName="MarkerPosition")}catch{}try{H.displayName||(H.displayName="GlobalMarkerNavigation")}catch{}function V({annotation:e,markerNavigationImplementation:t,onClose:n,ghostUser:a}){return(0,i.jsxs)(r.Z,{sx:{width:"clamp(240px, 100vw, 540px)"},children:[(0,i.jsx)(r.Z,{sx:{borderBottom:"1px solid",borderBottomColor:"border.default",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",p:1,background:"canvas.default"},children:(0,i.jsxs)(r.Z,{sx:{display:"flex",flexDirection:"row",width:"100%",alignItems:"center"},children:[(0,i.jsx)(H,{markerId:e.id,markerNavigationImplementation:t,onNavigate:n}),(0,i.jsx)(r.Z,{sx:{display:"flex",flexDirection:"row",gap:1,alignItems:"center",justifyContent:"right",flexGrow:1},children:(0,i.jsx)($.h,{"aria-label":"Close annotation",icon:P.XIcon,variant:"invisible",onClick:n})})]})}),(0,i.jsx)(B.q,{annotation:e,ghostUser:a})]})}try{V.displayName||(V.displayName="AnnotationDialog")}catch{}var G=n(12159),z=n(79804),K=n(45677),q=n(14786),W=n(98833),Q=n(26004);function X({anchorRef:e,annotations:t,handleOpenChange:n,threads:a,onShowAnnotation:l,onShowCommentThread:s,ghostUser:o=G.H.ghostUser}){function d(e){return{display:"-webkit-box",overflow:"hidden","-webkit-box-orient":"vertical","-webkit-line-clamp":e.toString(),maxWidth:"unset"}}return(0,i.jsx)(K.P,{anchorRef:e,open:!0,onOpenChange:n,children:(0,i.jsx)(K.P.Overlay,{width:"small",children:(0,i.jsx)("div",{children:(0,i.jsxs)(q.S,{children:[t.map(e=>(0,i.jsxs)(q.S.Item,{onSelect:()=>l(e.id),children:[(0,i.jsx)(q.S.LeadingVisual,{sx:{mr:2},children:(0,i.jsx)(Q.rD,{annotationLevel:e.annotationLevel},e.id)}),(0,i.jsxs)(r.Z,{sx:{...d(2)},children:[e.checkSuite.name," /"," ",(0,i.jsx)(U.Z,{sx:{fontWeight:400,color:"fg.muted"},children:e.checkRun.name})]}),(0,i.jsx)(q.S.Description,{variant:"block",children:(0,i.jsx)(r.Z,{sx:{...d(1)},children:e.title})}),(0,i.jsx)(q.S.TrailingVisual,{children:(0,i.jsx)(W.Z,{icon:P.ArrowRightIcon})})]},e.id)),a.map(e=>(0,i.jsxs)(q.S.Item,{onSelect:()=>s(e.id),children:[(0,i.jsx)(q.S.LeadingVisual,{sx:{mr:2},children:(0,i.jsx)(z.O,{alt:e.author.login,size:20,src:e.author.avatarUrl??o.avatarUrl})}),"Thread by ",e.author.login,(0,i.jsxs)(q.S.Description,{variant:"block",children:[e.commentCount," comment",e.commentCount>1?"s":""]}),(0,i.jsx)(q.S.TrailingVisual,{children:(0,i.jsx)(W.Z,{icon:P.ArrowRightIcon})})]},e.id))]})})})})}try{X.displayName||(X.displayName="MarkersListActionMenu")}catch{}var J=n(88049),Y=n(63309),ee=n(41436);let et=({onClick:e,id:t,children:n})=>(0,i.jsx)(r.Z,{as:"button",type:"button",id:t,sx:{display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"left",fontWeight:400,color:"fg.muted",width:"100%",backgroundColor:"canvas.default",border:"1px solid",borderColor:"border.default",cursor:"text",borderRadius:2,height:"var(--control-medium-size)",lineHeight:"var(--text-body-lineHeight-medium)",px:2},onClick:e,children:n});try{et.displayName||(et.displayName="CompactCommentButton")}catch{}function en(e,t="r"){history.replaceState(null,"",`#${t}${e}`)}var ei=n(79295),ea=n(50156),er=n(94470),el=n(40584),es=n(75299),eo=n(71207),ed=n(63451),ec=n(64530),eu=n(88216);function em({commentingImplementation:e,suggestedChange:t}){let{sendAnalyticsEvent:n}=(0,C.z)();return(0,i.jsx)(r.Z,{sx:{display:"flex",flexDirection:"row-reverse"},children:(0,i.jsx)(eu.r,{variant:"primary",onClick:()=>{n("comments.add_suggested_change_to_batch","ADD_SUGGESTED_CHANGE_TO_BATCH_BUTTON"),e.addSuggestedChangeToPendingBatch(t)},children:"Add suggestion to batch"})})}try{em.displayName||(em.displayName="AddToExistingBatch")}catch{}var eh=n(33831);let ef={addSuggestionToBatch:{text:"Add suggestion to batch"},applySuggestion:{text:"Apply suggestion"}};function ep({commentingImplementation:e,onOpenDialog:t,suggestedChange:n}){let{sendAnalyticsEvent:a}=(0,C.z)(),[s,o]=(0,l.useState)(ef.addSuggestionToBatch),[d,c]=(0,l.useState)(!1),u=(0,l.useRef)(null),m=(0,l.useRef)(null),h=()=>c(!d),{addSuggestedChangeToPendingBatch:f}=e,p=(0,l.useCallback)(()=>{s===ef.addSuggestionToBatch&&(f(n),a("comments.add_suggested_change_to_batch","ADD_SUGGESTED_CHANGE_TO_BATCH_BUTTON")),s===ef.applySuggestion&&t(m)},[f,t,s,a,n]);return(0,i.jsx)(r.Z,{sx:{display:"flex",flexDirection:"row-reverse"},children:(0,i.jsxs)(eh.Z,{children:[(0,i.jsx)(eu.r,{variant:"primary",onClick:p,ref:m,children:s.text}),(0,i.jsx)($.h,{ref:u,"aria-haspopup":"true","aria-label":"More suggestion batching options",icon:P.TriangleDownIcon,size:"medium",variant:"primary",onClick:h}),(0,i.jsx)(K.P,{anchorRef:u,open:d,onOpenChange:h,children:(0,i.jsx)(K.P.Overlay,{width:"medium",children:(0,i.jsx)(q.S,{selectionVariant:"single",children:Object.keys(ef).map(e=>{let t=ef[e];return(0,i.jsx)(q.S.Item,{selected:s===t,onSelect:()=>o(t),children:t.text},e)})})})})]})})}try{ep.displayName||(ep.displayName="ApplyOrAddToBatch")}catch{}function eg({reason:e,sx:t}){return(0,i.jsx)(r.Z,{sx:{m:2,...t},children:(0,i.jsx)(U.Z,{as:"small",sx:{color:"fg.muted"},children:e})})}try{eg.displayName||(eg.displayName="CodeSuggestionUnavailable")}catch{}function ex({commentingImplementation:e,onOpenDialog:t,suggestedChange:n}){let a=(0,l.useRef)(null),s=(0,l.useCallback)(()=>{t(a)},[t]),o=e.pendingSuggestedChangesBatch.length,{sendAnalyticsEvent:d}=(0,C.z)();return(0,i.jsxs)(r.Z,{sx:{display:"flex",justifyContent:"space-between",flexDirection:"row"},children:[(0,i.jsx)(Y.Z,{variant:"attention",sx:{my:"auto"},children:"Pending in batch"}),(0,i.jsxs)(r.Z,{sx:{display:"flex",gap:2},children:[(0,i.jsx)(eu.r,{size:"medium",variant:"danger",onClick:()=>{e.removeSuggestedChangeFromPendingBatch(n),d("comments.remove_suggested_change_from_batch","REMOVE_SUGGESTED_CHANGE_FROM_BATCH_BUTTON")},children:"Remove from batch"}),(0,i.jsx)(eu.r,{ref:a,size:"medium",count:o,variant:"primary",onClick:s,children:`Apply suggestion${o>1?"s":""}`})]})]})}try{ex.displayName||(ex.displayName="CommitOrRemoveFromBatch")}catch{}function ey({commentingImplementation:e,suggestedChange:t}){let{setIsDialogOpen:n}=M(),[a,s]=(0,l.useState)(!1),o=(0,l.useRef)(),{pendingSuggestedChangesBatch:d,submitSuggestedChanges:c}=e,u=(0,ei.MM)(t,d),m=0===d.length,{isValid:h,reason:f}=(0,ei.RN)(t,d),p=(0,l.useMemo)(()=>u?d:[t],[u,d,t]),g=(0,l.useCallback)(e=>{s(e),n?.(e)},[n]),x=(0,l.useCallback)(()=>{if(g(!1),o.current){let e=o.current.current;setTimeout(()=>e?.focus())}},[g]),y=(0,l.useCallback)(e=>{g(!0),o.current=e},[g,o]),b=(0,l.useCallback)((e,t,n)=>{c({suggestedChanges:p,commitMessage:e,onCompleted:()=>{x(),n()},onError:t})},[x,c,p]);return(0,i.jsxs)(r.Z,{sx:{p:2,borderTop:"1px solid",borderColor:"border.default"},children:[u&&(0,i.jsx)(ex,{commentingImplementation:e,suggestedChange:t,onOpenDialog:y}),!u&&!h&&f&&(0,i.jsx)(eg,{reason:f,sx:{m:0}}),!u&&m&&(0,i.jsx)(ep,{commentingImplementation:e,suggestedChange:t,onOpenDialog:y}),!u&&h&&!m&&(0,i.jsx)(em,{commentingImplementation:e,suggestedChange:t}),a&&(0,i.jsx)(R,{authorLogins:p.map(e=>e.authorLogin),batchSize:p.length,onClose:x,onCommit:b})]})}try{ey.displayName||(ey.displayName="CodeSuggestionActions")}catch{}function eb({applySuggestedChangesValidationData:e,comment:t,commentBodyRef:n,commentingImplementation:a,filePath:r,isOutdated:s,isThreadResolved:o,subject:d,suggestedChangesConfig:c,threadId:u,viewerData:m}){let h=function(e,t,n,i,a){let[r,s]=(0,l.useState)();return(0,ed.b)(()=>{if(!e.current||"LINE"!==t.subjectType)return;let r=[...e.current.getElementsByClassName("js-apply-changes")];if(r.length>0){let e=[];for(let l of r){let r=l?.closest("div.js-suggested-changes-blob");if(!r)continue;let s=[...r.querySelectorAll(".js-blob-code-addition")];a.lineRange&&e.push({authorLogin:t.author?.login??"ghost",commentId:t.id,path:n,ref:l,suggestion:s.map(e=>e.textContent),lineRange:a.lineRange,threadId:i})}s(e)}},[a.lineRange,t.author?.login,t.bodyHTML,t.id,t.subjectType,e,n,i]),r}(n,t,r,u,e);return(0,i.jsx)(i.Fragment,{children:h?.length&&h.map(n=>{let{isValid:r,reason:l}=(0,ei.eE)({suggestedChange:n,isOutdated:s,isPending:"PENDING"===t.state,isResolved:o,pullRequestIsClosed:d?.state!=="OPEN",pullRequestIsInMergeQueue:!!d?.isInMergeQueue,userCanApplySuggestion:!!m?.viewerCanApplySuggestion,applySuggestedChangesValidationData:e,suggestedChangesConfig:c});return!r&&l?(0,ec.createPortal)((0,i.jsx)(eg,{reason:l}),n.ref):(0,ec.createPortal)((0,i.jsx)(ey,{commentingImplementation:a,suggestedChange:n}),n.ref)})})}try{eb.displayName||(eb.displayName="SuggestedChangeView")}catch{}function eC({isAnchorable:e=!1,index:t=0,isLastChild:n,isOutdated:a,isThreadResolved:s,anchorPrefix:o="r",comment:d,commentingImplementation:c,filePath:h,hideActions:p,onRefreshThread:g,subjectId:x,subject:b,threadCommentCount:C,threadId:j,threadsConnectionId:v,suggestedChangesConfig:N,applySuggestedChangesValidationData:S,viewerData:w,ghostUser:L=G.H.ghostUser}){let{addToast:k}=(0,J.V6)(),[I,E]=(0,l.useState)(!1),[D,T]=(0,l.useState)(d.body),[R,A]=(0,l.useState)(!1),[F,_]=(0,l.useState)(),{persistCommentToStorage:M,removePersistedCommentFromStorage:P}=u({subjectId:x,filePath:h,fileLevelComment:"FILE"===d.subjectType,threadId:d.id,handlePersistedCommentExists:({text:e})=>{e&&T(e)}}),{editComment:$,deleteComment:B,lazyFetchReactionGroups:U,lazyFetchEditHistory:Z}=c,H=(0,l.useRef)(null),V=(0,l.useRef)(null),z=()=>{H.current?.focus()};(0,l.useEffect)(()=>{I&&setTimeout(z)},[I]);let K=(0,l.useCallback)(()=>{A(!0);let e=m(D,N?.sourceContentFromDiffLines??"");if(!e.isValid){_(e.errorMessage),A(!1);return}$({text:D,comment:d,onCompleted:()=>{E(!1),A(!1),P(),g?.(j)},onError:()=>{A(!1),k({type:"error",message:"Failed to update comment"})}})},[k,D,d,$,g,P,N,j]),q=d.currentDiffResourcePath?.split("#r").pop(),W=q?`${o}${q}`:void 0,Q=W&&eo.ssrSafeLocation?new URL(`${eo.ssrSafeLocation.pathname}#${W}`,eo.ssrSafeLocation.origin).toString():void 0,X=(0,l.useRef)(null);(0,l.useEffect)(()=>{e&&q&&W&&window.location.hash.split("#").pop()===W&&(en(q,o),X.current?.focus())},[o,W,q,e]);let Y={outline:"2px solid",outlineColor:"accent.fg",outlineOffset:"-2px",boxShadow:"none"},ee=t>0,et=t>1,ei=c.suggestedChangesEnabled;return(0,i.jsxs)(r.Z,{ref:X,id:e?W:void 0,tabIndex:-1,sx:{"&:not(:first-child)":{backgroundColor:"canvas.inset"},"&:first-child + div":{borderTop:"1px solid",borderColor:"border.muted"},":target":Y,":focus":Y,pb:ee?0:2},children:[et&&(0,i.jsx)(r.Z,{sx:{display:"flex",pl:ee?1:0},children:(0,i.jsx)(r.Z,{sx:{ml:4,height:8,borderLeft:"1px solid",borderColor:"border.default"}})}),(0,i.jsx)(r.Z,{sx:{px:3,pt:et?0:2,pb:0},children:(0,i.jsx)(ea.y,{headingProps:{as:"h5"},avatarUrl:d.author?.avatarUrl??L.avatarUrl,comment:{...d,url:Q??"",referenceText:d.reference.text??`#${d.reference.number}`},commentRef:X,deleteComment:()=>{B({commentId:d.id,onCompleted:()=>{g?.(j)},onError:()=>{A(!1),k({type:"error",message:"Failed to delete comment"})},threadCommentCount:C,threadId:j,threadsConnectionId:v,filePath:h})},editComment:()=>{E(!0)},hideComment:O.Z,isMinimized:d.isHidden,commentAuthorLogin:d.author?.login??L.login,navigate:O.Z,commentSubjectAuthorLogin:d.reference?.author?.login??"",commentSubjectType:c.commentSubjectType,onReplySelect:O.Z,unhideComment:O.Z,hideActions:p,lazyFetchEditHistory:Z,isReply:!0})}),(0,i.jsxs)(r.Z,{sx:{display:"flex",pl:ee?1:0},children:[ee&&(0,i.jsx)(r.Z,{sx:{ml:4,mr:1,pl:3,borderLeft:"1px solid",borderColor:"border.default",...n&&{borderImage:"linear-gradient(to bottom, var(--borderColor-default, var(--color-border-default)), rgba(0, 0, 0, 0)) 1 100%"}}}),I?(0,i.jsx)(r.Z,{sx:{pr:2,pl:ee?0:2,pb:2,pt:1,flexGrow:1},children:(0,i.jsxs)(y,{ref:H,label:"Update comment",value:D,onChange:e=>{M({text:e}),T(e),_(void 0)},onPrimaryAction:K,userSettings:c.commentBoxConfig,suggestedChangesConfig:N,markdownErrorMessage:F,children:[(0,i.jsx)(f.n,{variant:"default",onClick:()=>{E(!1),P(),T(d.body)},children:"Cancel"}),(0,i.jsx)(f.n,{disabled:R||!D.length,variant:"primary",onClick:K,children:"Update"})]})}):(0,i.jsx)(r.Z,{sx:ee?{pb:2,pr:2,overflowX:"auto",width:"100%"}:{px:3,pb:2,width:"100%"},children:d.bodyHTML&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(es.wB,{ref:V,className:"markdown-body","comment-testid":`Comment body html for comment ${d.id}`,html:d.bodyHTML,sx:{mt:1,fontSize:1}}),(0,i.jsx)(r.Z,{sx:{display:"flex",flexDirection:"column",mt:3},children:U?(0,i.jsx)(l.Suspense,{fallback:(0,i.jsx)(el.m,{}),children:(0,i.jsx)(er.ReactionViewerQueryComponent,{id:d.id})}):(0,i.jsx)(er.ReactionViewer,{reactionGroups:d,subjectId:d.id})}),ei&&S&&(0,i.jsx)(eb,{comment:d,commentBodyRef:V,commentingImplementation:c,filePath:h,isOutdated:a,isThreadResolved:s,threadId:j,suggestedChangesConfig:N,applySuggestedChangesValidationData:S,subject:b,viewerData:w})]})})]})]})}try{eC.displayName||(eC.displayName="ReviewThreadComment")}catch{}var ej=n(46455),ev=n(6975),eN=n(86010);function eS({line:e,children:t}){return(0,i.jsx)("td",{className:"diff-line-number",style:{backgroundColor:(0,ej.dF)(e.type,!0),textAlign:"center"},children:(0,i.jsx)("code",{children:t})})}function ew({line:e}){return(0,i.jsx)("td",{colSpan:4,style:{backgroundColor:"var(--bgColor-accent-muted, var(--color-accent-subtle))",flexGrow:1},valign:"top",children:(0,i.jsxs)(r.Z,{sx:{display:"flex",flexDirection:"row"},children:[(0,i.jsx)(ev.fx,{}),(0,i.jsx)("code",{className:"diff-text-cell hunk",children:(0,i.jsx)(es.sF,{className:"diff-text-inner color-fg-muted",html:e.html})})]})})}function eL({line:e,tabSize:t}){let n="HUNK"===e.type,a="ADDITION"!==e.type,r="DELETION"!==e.type,{getTextIndent:s,getPaddingLeft:o}=(0,l.useMemo)(()=>(0,ev.pE)(e.text,t),[e,t]),d="ADDITION"===e.type?"+":"DELETION"===e.type?"-":void 0;return(0,i.jsxs)("tr",{children:[n&&(0,i.jsx)(ew,{line:e}),!n&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eS,{line:e,children:a&&e.left}),(0,i.jsx)(eS,{line:e,children:r&&e.right}),(0,i.jsx)("td",{className:"diff-text-cell",style:{backgroundColor:(0,ej.dF)(e.type,!1)},children:(0,i.jsxs)("code",{className:(0,eN.W)("diff-text syntax-highlighted-line",{addition:"ADDITION"===e.type,deletion:"DELETION"===e.type}),children:[!!d&&(0,i.jsx)("span",{className:"diff-text-marker",children:d}),(0,i.jsx)(es.sF,{className:"diff-text-inner",html:e.html,style:{backgroundColor:(0,ej.dF)(e.type,!1),paddingLeft:o(),textIndent:s()}})]})})]})]})}function ek({sx:e,lines:t,lineWidth:n,tabSize:a}){let l=t.map((e,t)=>(0,i.jsx)(eL,{line:e,tabSize:a},t));return(0,i.jsx)(r.Z,{as:"table",className:"tab-size","data-tab-size":a,sx:{borderTop:0,borderBottom:0,borderLeft:1,borderRight:1,borderStyle:"solid",borderColor:"border.muted",...e},children:(0,i.jsx)(ev.wj,{lineWidth:n,children:l})})}function eI({sx:e,tabSize:t,thread:n,hideHeaderDetails:a,diffTableSx:l}){if(!n.subject?.diffLines||n.subject?.diffLines.length<1)return null;let s=(0,ej.Gi)(n.subject.diffLines);return(0,i.jsxs)(r.Z,{sx:{m:3,border:0,borderBottomWidth:6,borderStyle:"solid",borderColor:"border.muted",borderBottomLeftRadius:2,borderBottomRightRadius:2,...e},children:[!a&&(0,i.jsx)(r.Z,{sx:{borderWidth:1,borderStyle:"solid",borderTopLeftRadius:2,borderTopRightRadius:2,borderColor:"border.muted",color:"fg.muted",px:2,py:1},children:(0,i.jsxs)(U.Z,{sx:{fontSize:0,color:"fg.muted"},children:["Line"," ",(0,ev._2)({originalStartLine:n.subject.originalStartLine,originalEndLine:n.subject.originalEndLine,startDiffSide:n.subject.startDiffSide,endDiffSide:n.subject.endDiffSide}),", commit ",(0,i.jsx)("code",{children:n.subject.pullRequestCommit?.commit.abbreviatedOid})]})}),(0,i.jsx)(ek,{lineWidth:s,lines:n.subject.diffLines,tabSize:t,sx:l})]})}try{eS.displayName||(eS.displayName="StaticLineNumberCell")}catch{}try{ew.displayName||(ew.displayName="StaticHunkCell")}catch{}try{eL.displayName||(eL.displayName="StaticUnifiedDiffRow")}catch{}try{ek.displayName||(ek.displayName="StaticUnifiedDiffLines")}catch{}try{eI.displayName||(eI.displayName="StaticUnifiedDiffPreview")}catch{}function eE({batchingEnabled:e,batchPending:t,commentAnchorPrefix:n,commentingImplementation:a,commentsConnectionId:s,filePath:o,hideDiffPreview:d,onRefreshThread:c,repositoryId:u,subject:m,subjectId:h,tabSize:f,thread:p,threadsConnectionId:g,shouldLimitHeight:x=!0,suggestedChangesConfig:y,viewerData:j,ghostUser:v}){let[N,S]=(0,l.useState)(!1),{sendAnalyticsEvent:w}=(0,C.z)(),{addThreadReply:L}=a;if(null===p.commentsData.comments||p.commentsData.comments.length<1)return null;let k=(0,ei.aF)(p),I="LINE"===p.subjectType?{lineRange:k}:void 0;return(0,i.jsx)(r.Z,{"data-testid":"review-thread",children:(0,i.jsxs)(r.Z,{sx:x?{maxHeight:"40vh",overflowY:"auto"}:{},children:[!d&&p.isOutdated&&(0,i.jsx)(eI,{tabSize:f??4,thread:p}),p.commentsData.comments.map((e,t)=>(0,i.jsx)(eC,{isAnchorable:!0,index:t,isLastChild:t===p.commentsData.comments.length-1,anchorPrefix:n,comment:e,commentConnectionId:p.commentsData.__id,commentingImplementation:a,filePath:o,isOutdated:p.isOutdated,repositoryId:u,subject:m,subjectId:h,threadId:p.id,onRefreshThread:c,threadCommentCount:p.commentsData.comments.length,threadsConnectionId:g,isThreadResolved:!!p.isResolved,suggestedChangesConfig:y,applySuggestedChangesValidationData:I,viewerData:j,ghostUser:v},e.id)),p.viewerCanReply&&(0,i.jsxs)(r.Z,{sx:{backgroundColor:"canvas.inset",borderBottomLeftRadius:2,borderBottomRightRadius:2,p:2},children:[N&&(0,i.jsx)(b,{batchingEnabled:e,batchPending:t,commentBoxConfig:a.commentBoxConfig,condensed:!1,fileLevelComment:!0,filePath:o,focusOnMount:!0,isReplying:!0,onCancelComment:()=>{S(!1),w("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON")},repositoryId:u,subjectId:h,threadId:p.id,onAddComment:({commentText:e,onCompleted:t,onError:n,submitBatch:i})=>{let a=[];p.commentsData.__id&&a.push(p.commentsData.__id),s&&a.push(s),L({commentsConnectionIds:a,filePath:o,thread:p,text:e,submitBatch:i,onCompleted:e=>{e&&en(e.toString()),t?.(),c?.(p.id)},onError:n,threadsConnectionId:g}),w("comments.add","ADD_COMMENT_BUTTON")},suggestedChangesConfig:y}),!N&&(0,i.jsx)(et,{onClick:()=>{w("comments.start_thread_reply","REPLY_TO_THREAD_INPUT_BUTTON"),S(!0)},children:"Write a reply"})]})]})})}try{eE.displayName||(eE.displayName="ReviewThread")}catch{}function eD({children:e}){return(0,i.jsx)(U.Z,{sx:{fontWeight:500,color:"fg.default"},children:e})}function eT({thread:e}){if(!e?.diffSide||!e.line||!e.startLine||!e.startDiffSide)return null;let t="LEFT"===e.startDiffSide?"L":"R",n="LEFT"===e.diffSide?"L":"R";return(0,i.jsxs)(U.Z,{sx:{color:"fg.muted"},children:["\xb7 Comment on lines"," ",(0,i.jsxs)(eD,{children:[t,e.startLine]})," ","to"," ",(0,i.jsxs)(eD,{children:[n,e.line]})]})}function eR({commentingImplementation:e,filePath:t,onClose:n,onRefreshThread:a,thread:s,threads:o,threadsConnectionId:d,markerNavigationImplementation:c,ghostUser:u,...m}){let{sendAnalyticsEvent:h}=(0,C.z)(),{resolveThread:f,unresolveThread:p,resolvingEnabled:g}=e,x=o.find(e=>e.id===s.id),y=s.commentsData.comments.length>0,b=!!s.isResolved,{addToast:j}=(0,J.V6)(),v=x?.commentsConnectionId;return y?(0,i.jsxs)(r.Z,{sx:{width:"clamp(240px, 100vw, 540px)"},children:[(0,i.jsx)(r.Z,{sx:{borderBottom:"1px solid",borderBottomColor:"border.default",display:"flex",flexDirection:"column",justifyContent:"space-between",alignItems:"center",p:1,background:"canvas.default"},children:(0,i.jsxs)(r.Z,{sx:{display:"flex",flexDirection:"row",width:"100%",alignItems:"center"},children:[(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(H,{markerId:s.id,markerNavigationImplementation:c,onNavigate:n}),(0,i.jsx)(eT,{thread:x})]}),(0,i.jsxs)(r.Z,{sx:{display:"flex",flexDirection:"row",gap:1,alignItems:"center",justifyContent:"right",flexGrow:1},children:[b&&(0,i.jsx)(Y.Z,{variant:"done",size:"large",children:"Resolved"}),g&&(0,i.jsx)(ee.u,{text:b?"Unresolve conversation":"Resolve conversation",type:"label",direction:"w",id:"resolve-conversation",children:(0,i.jsx)($.h,{"aria-labelledby":"resolve-conversation",icon:b?P.CheckCircleFillIcon:P.CheckCircleIcon,sx:{color:b?"var(--fgColor-done, var(--color-done-fg)) !important":void 0},variant:"invisible",onClick:b?()=>{p({thread:s,onCompleted:()=>a(s.id),onError:()=>{j({type:"error",message:"Failed to unresolve thread"})}}),h("comments.unresolve_thread","RESOLVE_CONVERSATION_BUTTON")}:()=>{f({thread:s,onCompleted:()=>a(s.id),onError:()=>{j({type:"error",message:"Failed to resolve thread"})}}),h("comments.resolve_thread","RESOLVE_CONVERSATION_BUTTON")}})}),(0,i.jsx)($.h,{"aria-label":"Close thread",icon:P.XIcon,variant:"invisible",onClick:n})]})]})}),(0,i.jsx)(l.Suspense,{fallback:(0,i.jsxs)(r.Z,{sx:{height:"90px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",color:"fg.muted",fontSize:0},children:[(0,i.jsx)(S.Z,{}),(0,i.jsx)("p",{children:"Loading comments"})]}),children:(0,i.jsx)(eE,{commentingImplementation:e,commentsConnectionId:v,filePath:t,onRefreshThread:a,thread:s,threadsConnectionId:d,...m,ghostUser:u})})]}):null}try{eD.displayName||(eD.displayName="Emphasis")}catch{}try{eT.displayName||(eT.displayName="MultineLineThreadBanner")}catch{}try{eR.displayName||(eR.displayName="ReviewThreadDialog")}catch{}function eO(e){return(0,i.jsx)(_,{children:(0,i.jsx)(eA,{...e})})}function eA({annotations:e,commentingImplementation:t,conversationAnchorRef:n,conversationListAnchorRef:a,conversationListThreads:s,isMarkerListOpen:o,fileAnchor:d,filePath:c,onAnnotationSelected:u,onCloseConversationDialog:m,onCloseConversationList:h,onThreadSelected:f,returnFocusRef:p,selectedAnnotationId:g,selectedThreadId:x,threadsConnectionId:y,markerNavigationImplementation:b,suggestedChangesConfig:C,ghostUser:j,...v}){let{isDialogOpen:N}=M(),[w,L]=(0,l.useState)(),{fetchThread:k}=t,I=(0,l.useCallback)(()=>!N&&m(),[N,m]),E=async e=>{L(void 0);let t=s.find(t=>t.id===e)?.isOutdated;L(await k(e,t))},D=(0,l.useMemo)(()=>{if(d&&w&&w.subject?.startDiffSide&&w.subject?.endDiffSide&&w.subject?.startLine&&w.subject?.endLine&&C?.configureSuggestedChangesFromLineRange){let e=w.subject?.startLine??w?.subject?.endLine,t=w.subject?.startDiffSide??w?.subject?.endDiffSide,n={diffAnchor:d,endLineNumber:w?.subject?.endLine,endOrientation:w.subject?.endDiffSide==="LEFT"?"left":"right",startLineNumber:e,firstSelectedLineNumber:e,firstSelectedOrientation:"LEFT"===t?"left":"right",startOrientation:"LEFT"===t?"left":"right"};return C?.configureSuggestedChangesFromLineRange(n)}},[d,w,C]);(0,l.useEffect)(()=>{!x&&w?L(void 0):x&&x!==w?.id&&E(x)},[k,x]);let T=x||g,R=g?e.find(e=>e.id===g):void 0;return(0,i.jsx)(i.Fragment,{children:T?(0,i.jsx)(A.w,{align:"end",anchorRef:n,focusZoneSettings:{disabled:!0},open:!0,focusTrapSettings:{disabled:!0},renderAnchor:null,overlayProps:{anchorSide:"outside-right","aria-label":`${x?"Pull Request Review Thread":"Pull Request Check Annotation"}`,id:"conversation-dialog",returnFocusRef:p,role:"dialog",sx:{width:"clamp(240px, 100vw, 540px)",borderRadius:2},onClickOutside:O.Z,onKeyDown:e=>{"Escape"!==e.key&&e.stopPropagation()}},onClose:I,children:w?(0,i.jsx)(eR,{commentingImplementation:t,filePath:c,thread:w,threads:s,threadsConnectionId:y,onClose:I,onThreadSelected:f,onRefreshThread:E,markerNavigationImplementation:b,suggestedChangesConfig:D,ghostUser:j,...v}):R?(0,i.jsx)(V,{annotation:R,markerNavigationImplementation:b,onClose:I,ghostUser:j}):(0,i.jsxs)(r.Z,{sx:{height:"90px",alignItems:"center",display:"flex",flexDirection:"column",justifyContent:"center",color:"fg.muted",fontSize:0},children:[(0,i.jsx)(S.Z,{}),(0,i.jsx)("p",{children:"Loading comments"})]})}):o&&(0,i.jsx)(X,{anchorRef:a,annotations:e,handleOpenChange:h,threads:s,onShowCommentThread:f,onShowAnnotation:u,ghostUser:j})})}try{eO.displayName||(eO.displayName="Markers")}catch{}try{eA.displayName||(eA.displayName="MarkersInternal")}catch{}var eF=n(75308);function e_({addCommentDialogTitle:e,isLeftSide:t,filePath:n,lineNumber:a,onAddComment:l,onClose:s,viewerData:o,threadsConnectionId:d,...c}){return(0,i.jsxs)(r.Z,{sx:{px:2,pb:2,pt:1},children:[(0,i.jsxs)(r.Z,{sx:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,i.jsxs)(eF.Z,{as:"h4",sx:{fontSize:1,ml:2,py:2},children:[(0,i.jsx)(z.O,{alt:o.login,size:24,src:o.avatarUrl||"",sx:{mr:2}}),(0,i.jsx)(U.Z,{children:e??"Add a comment"})]}),s&&(0,i.jsx)($.h,{variant:"invisible",icon:P.XIcon,onClick:s,"aria-label":"Cancel"})]}),(0,i.jsx)(b,{focusOnMount:!0,condensed:!1,fileLevelComment:!1,filePath:n,lineNumber:a,onAddComment:({commentText:e,onCompleted:t,onError:i,submitBatch:a})=>{l({text:e,onError:i,onCompleted:(e,n)=>{n&&en(n.toString()),t?.(e,n)},submitBatch:a,filePath:n,threadsConnectionId:d})},onCancelComment:s,side:t?"LEFT":"RIGHT",...c})]})}try{e_.displayName||(e_.displayName="StartThreadComment")}catch{}function eM({align:e="end",anchorRef:t,isOpen:n,returnFocusRef:a,onCloseCommentDialog:r,suggestedChangesConfig:s,...o}){let{sendAnalyticsEvent:d}=(0,C.z)(),c=(0,l.useMemo)(()=>{if(n&&s?.configureSuggestedChangesFromLineRange)return s.configureSuggestedChangesFromLineRange(s?.selectedDiffRowRange,s?.shouldStartNewConversationWithSuggestedChange)},[n,s]);return n?(0,i.jsx)(A.w,{align:e,anchorRef:t,focusZoneSettings:{disabled:!0},open:n,renderAnchor:null,focusTrapSettings:{disabled:!0},overlayProps:{id:"conversation-dialog",role:"dialog",width:"xlarge",returnFocusRef:a,sx:{borderRadius:2},"aria-label":"Add a comment",onClickOutside:O.Z,onKeyDown:e=>{"Escape"!==e.key&&e.stopPropagation()}},onClose:r,children:(0,i.jsx)(e_,{onClose:()=>{r(),d("comments.cancel_thread_reply","CANCEL_REVIEW_THREAD_BUTTON")},suggestedChangesConfig:c,...o})}):null}try{eM.displayName||(eM.displayName="StartConversation")}catch{}n(43360),O.Z,O.Z,O.Z,O.Z,O.Z,O.Z,O.Z,O.Z,O.Z,O.Z,O.Z,O.Z,O.Z},79295:(e,t,n)=>{function i(e,t){return t.some(t=>a(t,e))}function a(e,t){return e.commentId===t.commentId&&e.path===t.path&&e.suggestion.length===t.suggestion.length&&r(e.suggestion,t.suggestion)}n.d(t,{MM:()=>i,RN:()=>o,aF:()=>d,eE:()=>s,l3:()=>a});let r=(e,t)=>e.length===t.length&&!e.some((e,n)=>e!==t[n]),l={USER_CANNOT_APPLY_SUGGESTION:"You do not have permission to apply this suggestion.",PULL_REQUEST_IS_CLOSED:"This suggestion cannot be applied because the pull request is closed.",PULL_REQUEST_IS_IN_MERGE_QUEUE:"This suggestion cannot be applied because the pull request is queued to merge.",IS_OUTDATED:"This suggestion is outdated and cannot be applied.",IS_PENDING:"This suggestion is part of a pending comment and cannot be applied.",IS_RESOLVED:"This suggestion is part of a resolved comment and cannot be applied.",UNCHANGED_CODE:"This suggestion is invalid because no changes were made to the code.",INVALID_RANGE:"Unable to commit due to other pending changes affecting this line.",BATCH_TOO_BIG:"Unable to commit due to too many changes in the batch.",DELETED_LINES:"Unable to apply suggestions on deleted lines.",RANGE_NOT_PROVIDED:"This suggestion does not have a valid line range.",UNABLE_TO_DETERMINE_VALIDITY:"Unable to determine the validity of this suggestion."};function s({suggestedChange:e,isOutdated:t,isPending:n,isResolved:i,pullRequestIsClosed:a,pullRequestIsInMergeQueue:r,userCanApplySuggestion:s,applySuggestedChangesValidationData:o,suggestedChangesConfig:d}){let{lineRange:c}=o;if(t)return{isValid:!1,reason:l.IS_OUTDATED};if(n)return{isValid:!1,reason:l.IS_PENDING};if(i)return{isValid:!1,reason:l.IS_RESOLVED};if(a)return{isValid:!1,reason:l.PULL_REQUEST_IS_CLOSED};if(r)return{isValid:!1,reason:l.PULL_REQUEST_IS_IN_MERGE_QUEUE};if(!s)return{isValid:!1,reason:l.USER_CANNOT_APPLY_SUGGESTION};if(!c)return{isValid:!1,reason:l.RANGE_NOT_PROVIDED};if(!d)return{isValid:!1,reason:l.UNABLE_TO_DETERMINE_VALIDITY};if(!d?.isValidSuggestionRange)return{isValid:!1,reason:l.DELETED_LINES};let u=d?.sourceContentFromDiffLines,m=e.suggestion.join("\n");return 0!==e.suggestion.length&&m===u?{isValid:!1,reason:l.UNCHANGED_CODE}:{isValid:!0}}function o(e,t){let n={isValid:!1,reason:l.INVALID_RANGE},i={isValid:!1,reason:l.BATCH_TOO_BIG};return t.length>=50?i:t.find(t=>t.threadId===e.threadId)||function(e,t){for(let a of t)if(e.path===a.path){var n,i;return n=e.lineRange,i=a.lineRange,n.endLineNumber>=i.startLineNumber&&n.startLineNumber<=i.endLineNumber}return!1}(e,t)?n:{isValid:!0}}function d(e){if(!e||"LINE"!==e.subjectType||!e.subject)return;let t=e.subject.startDiffSide??e.subject.endDiffSide;if(!t)return;if(e.isOutdated&&e.subject.originalStartLine&&e.subject.originalEndLine)return{endLineNumber:e.subject.originalEndLine,endOrientation:e.subject.endDiffSide||"RIGHT",startLineNumber:e.subject.originalStartLine,startOrientation:t};if(!e.subject.endLine||!e.subject.endDiffSide)return;let n=e.subject.startLine??e?.subject.endLine;return{endLineNumber:e.subject.endLine,endOrientation:e.subject.endDiffSide,startLineNumber:n,startOrientation:t||"RIGHT"}}},43360:(e,t,n)=>{var i;n.d(t,{A:()=>i}),function(e){e.Failure="FAILURE",e.Notice="NOTICE",e.Warning="WARNING"}(i||(i={}))},54734:(e,t,n)=>{n.d(t,{B:()=>i});function i(){document.querySelector('#__primerPortalRoot__ div[role="dialog"]')&&document.dispatchEvent(new KeyboardEvent("keydown",{key:"Escape",code:"Escape",ctrlKey:!0}))}},27010:(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});let i=function(){var e=[{alias:null,args:null,kind:"ScalarField",name:"oid",storageKey:null},{alias:null,args:null,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"databaseId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null}],storageKey:null}],storageKey:null}];return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useFileDiffReference_Comparison",selections:[{alias:null,args:null,concreteType:"Commit",kind:"LinkedField",name:"oldCommit",plural:!1,selections:e,storageKey:null},{alias:null,args:null,concreteType:"Commit",kind:"LinkedField",name:"newCommit",plural:!1,selections:e,storageKey:null}],type:"PullRequestComparison",abstractKey:null}}();i.hash="fb70959c69497160ff44b9b0c7820e08";let a=i},72558:(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});let i=function(){var e={alias:null,args:null,kind:"ScalarField",name:"path",storageKey:null},t=[e,{alias:null,args:null,kind:"ScalarField",name:"size",storageKey:null}];return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useFileDiffReference_DiffEntry",selections:[{alias:null,args:null,kind:"ScalarField",name:"pathDigest",storageKey:null},e,{alias:null,args:null,kind:"ScalarField",name:"rawUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isBinary",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isSubmodule",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isLfsPointer",storageKey:null},{alias:null,args:null,concreteType:"TreeEntry",kind:"LinkedField",name:"oldTreeEntry",plural:!1,selections:t,storageKey:null},{alias:null,args:null,concreteType:"TreeEntry",kind:"LinkedField",name:"newTreeEntry",plural:!1,selections:t,storageKey:null}],type:"PullRequestDiffEntry",abstractKey:null}}();i.hash="f853615ae640634aad832da060f944cf";let a=i},93212:(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});let i=function(){var e={defaultValue:null,kind:"LocalArgument",name:"endOid"},t={defaultValue:null,kind:"LocalArgument",name:"pullRequestId"},n={defaultValue:null,kind:"LocalArgument",name:"startOid"},i=[{kind:"Variable",name:"id",variableName:"pullRequestId"}],a=[{kind:"Variable",name:"endOid",variableName:"endOid"},{kind:"Variable",name:"startOid",variableName:"startOid"}],r={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},l={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},s=[{alias:null,args:null,kind:"ScalarField",name:"oid",storageKey:null},{alias:null,args:null,concreteType:"Repository",kind:"LinkedField",name:"repository",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"databaseId",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"name",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"url",storageKey:null},{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"owner",plural:!1,selections:[r,{alias:null,args:null,kind:"ScalarField",name:"login",storageKey:null},l],storageKey:null},l],storageKey:null},l];return{fragment:{argumentDefinitions:[e,t,n],kind:"Fragment",metadata:null,name:"DiffChatWrapper_ComparisonQuery",selections:[{alias:"pullRequest",args:i,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[{alias:null,args:a,concreteType:"PullRequestComparison",kind:"LinkedField",name:"comparison",plural:!1,selections:[{args:null,kind:"FragmentSpread",name:"useFileDiffReference_Comparison"}],storageKey:null}],type:"PullRequest",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[t,n,e],kind:"Operation",name:"DiffChatWrapper_ComparisonQuery",selections:[{alias:"pullRequest",args:i,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[r,{kind:"InlineFragment",selections:[{alias:null,args:a,concreteType:"PullRequestComparison",kind:"LinkedField",name:"comparison",plural:!1,selections:[{alias:null,args:null,concreteType:"Commit",kind:"LinkedField",name:"oldCommit",plural:!1,selections:s,storageKey:null},{alias:null,args:null,concreteType:"Commit",kind:"LinkedField",name:"newCommit",plural:!1,selections:s,storageKey:null}],storageKey:null}],type:"PullRequest",abstractKey:null},l],storageKey:null}]},params:{id:"fb6fd29b2f37f48929378e605adb454a",metadata:{},name:"DiffChatWrapper_ComparisonQuery",operationKind:"query",text:null}}}();i.hash="e34cdc5b305060e84f51c908a09989a0";let a=i},19236:(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});let i=function(){var e=[{defaultValue:null,kind:"LocalArgument",name:"diffEntryId"}],t=[{kind:"Variable",name:"id",variableName:"diffEntryId"}],n={alias:null,args:null,kind:"ScalarField",name:"path",storageKey:null},i=[n,{alias:null,args:null,kind:"ScalarField",name:"size",storageKey:null}];return{fragment:{argumentDefinitions:e,kind:"Fragment",metadata:null,name:"DiffChatWrapper_DiffEntryQuery",selections:[{alias:"diffEntry",args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{kind:"InlineFragment",selections:[{args:null,kind:"FragmentSpread",name:"useFileDiffReference_DiffEntry"}],type:"PullRequestDiffEntry",abstractKey:null}],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:e,kind:"Operation",name:"DiffChatWrapper_DiffEntryQuery",selections:[{alias:"diffEntry",args:t,concreteType:null,kind:"LinkedField",name:"node",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null},{kind:"InlineFragment",selections:[{alias:null,args:null,kind:"ScalarField",name:"pathDigest",storageKey:null},n,{alias:null,args:null,kind:"ScalarField",name:"rawUrl",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isBinary",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isSubmodule",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"isLfsPointer",storageKey:null},{alias:null,args:null,concreteType:"TreeEntry",kind:"LinkedField",name:"oldTreeEntry",plural:!1,selections:i,storageKey:null},{alias:null,args:null,concreteType:"TreeEntry",kind:"LinkedField",name:"newTreeEntry",plural:!1,selections:i,storageKey:null}],type:"PullRequestDiffEntry",abstractKey:null},{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:"7c9df64c41ef33594dd0882be84ef373",metadata:{},name:"DiffChatWrapper_DiffEntryQuery",operationKind:"query",text:null}}}();i.hash="064698bd6869b0c7d063a68d0b3666d8";let a=i},16790:(e,t,n)=>{n.r(t),n.d(t,{default:()=>a});let i=function(){var e={alias:null,args:null,kind:"ScalarField",name:"isCopilotDotcomChatEnabled",storageKey:null};return{fragment:{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"DiffChatWrapper_ViewerQuery",selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"viewer",plural:!1,selections:[e],storageKey:null}],type:"Query",abstractKey:null},kind:"Request",operation:{argumentDefinitions:[],kind:"Operation",name:"DiffChatWrapper_ViewerQuery",selections:[{alias:null,args:null,concreteType:"User",kind:"LinkedField",name:"viewer",plural:!1,selections:[e,{alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null}],storageKey:null}]},params:{id:"16bed8244ee96ad06b6638dbb86dd0ff",metadata:{},name:"DiffChatWrapper_ViewerQuery",operationKind:"query",text:null}}}();i.hash="4d1f99d4dad28f392f7ea1a3cecbcfff";let a=i},75170:(e,t,n)=>{n.d(t,{U:()=>o});var i=n(58081),a=n(22578);let r=n(27010),l=n(72558),s=({oldCommit:e,newCommit:t},{oldTreeEntry:n,newTreeEntry:i,...a})=>{if(!(a.isBinary||a.isSubmodule||a.isLfsPointer||!i||(n?.size??0)>1048576)&&!((i.size??0)>1048576))return{type:"file-diff",id:`diff-${a.pathDigest}`,url:a.rawUrl??"",baseFile:n?{type:"file",repoID:e.repository.databaseId??0,repoName:e.repository.name,repoOwner:e.repository.owner.login,path:n.path??"",commitOID:e.oid,url:`${e.repository.url}/raw/${e.oid}/${n.path}`,ref:e.oid}:null,headFile:{type:"file",repoID:t.repository.databaseId??0,repoName:t.repository.name,repoOwner:t.repository.owner.login,path:i.path??"",commitOID:t.oid,url:`${t.repository.url}/raw/${t.oid}/${i.path}`,ref:t.oid},head:null,base:null}},o=(e,t)=>{let n=(0,a.useFragment)(r,e),o=(0,a.useFragment)(l,t);return(0,i.useMemo)(()=>s(n,o),[n,o])}},75677:(e,t,n)=>{n.d(t,{L:()=>p,X:()=>h});var i=n(48055),a=n(85529),r=n(42483),l=n(50919),s=n(73290),o=n(98833),d=n(72278),c=n(41436),u=n(38495),m=n(14136);function h({children:e,isAddition:t,sx:n}){return(0,i.jsx)(r.Z,{sx:{color:t?"success.fg":"danger.fg",ml:1,fontWeight:"bold",fontSize:0,...n},children:e})}try{h.displayName||(h.displayName="LinesChangedCounterLabel")}catch{}function f({newPath:e,oldPath:t,status:n}){let r=e&&e.startsWith("."),l=t&&t.startsWith("."),s=r?(0,i.jsxs)(i.Fragment,{children:["\u200E",e]}):(0,i.jsx)(i.Fragment,{children:e}),o=l?(0,i.jsxs)(i.Fragment,{children:["\u200E",t]}):(0,i.jsx)(i.Fragment,{children:t});return"RENAMED"===n?(0,i.jsxs)("code",{children:[o," ",(0,i.jsx)(a.ArrowRightIcon,{})," ",s]}):"DELETED"===n||"REMOVED"===n?(0,i.jsx)("code",{children:o}):(0,i.jsx)("code",{children:s})}function p({additionalLeftSideContent:e,areLinesExpanded:t,canExpandOrCollapseLines:n,defaultToRichDiff:p,isCollapsed:g,canToggleRichDiff:x,linesAdded:y,linesDeleted:b,fileLinkHref:C,newMode:j,newPath:v,oldMode:N,oldPath:S,onCopyPath:w,onHeaderClick:L,onToggleDiffDisplay:k,onToggleExpandAllLines:I,onToggleFileCollapsed:E,patchStatus:D,path:T,rightSideContent:R}){return(0,i.jsxs)(r.Z,{sx:{position:"relative",alignItems:"center",bg:"canvas.subtle",border:"1px solid",borderColor:"border.default",borderRadius:2,borderBottomLeftRadius:g?2:0,borderBottomRightRadius:g?2:0,display:"flex",p:2,mb:"-1px"},children:[(0,i.jsx)(l.h,{"aria-label":g?`expand file: ${T}`:`collapse file: ${T}`,icon:g?a.ChevronRightIcon:a.ChevronDownIcon,variant:"invisible",onClick:E,sx:{flexShrink:0}}),e,(0,i.jsxs)(r.Z,{sx:{pl:1,pr:1,flexGrow:1,display:"flex",alignItems:"center",overflow:"hidden"},children:[(0,i.jsx)(r.Z,{as:"h3",sx:{fontSize:1,fontWeight:"unset",overflow:"hidden",whiteSpace:"nowrap",textOverflow:"ellipsis",direction:"rtl"},children:(0,i.jsx)(s.Z,{className:"Link--primary",href:C,onClick:L,children:(0,i.jsx)(f,{newPath:v,oldPath:S,status:D})})}),(0,i.jsx)(m.m,{sx:{ml:1,flexShrink:0},textToCopy:v??S??"",ariaLabel:"Copy file name to clipboard",tooltipProps:{direction:"s"},onCopy:w}),(0,u.DC)(D,N,j)&&(0,i.jsxs)(r.Z,{sx:{p:2},children:[(0,i.jsx)("code",{children:N}),(0,i.jsx)(o.Z,{icon:a.ArrowRightIcon,sx:{mx:1}}),(0,i.jsx)("code",{children:j})]}),n&&I&&(0,i.jsx)(c.u,{text:t?`collapse non diff lines: ${T}`:`expand all lines: ${T}`,direction:"s",children:(0,i.jsx)(l.h,{"aria-label":t?`collapse non diff lines: ${T}`:`expand all lines: ${T}`,icon:t?a.FoldIcon:a.UnfoldIcon,variant:"invisible",className:t?"":"js-expand-all-difflines-button","data-file-path":T,onClick:I,sx:{flexShrink:0}})})]}),(0,i.jsxs)(r.Z,{sx:{display:"flex",flexGrow:1,justifyContent:"flex-end",mr:2},children:[y>0&&(0,i.jsxs)(h,{isAddition:!0,children:["+",y]}),b>0&&(0,i.jsxs)(h,{isAddition:!1,children:["-",b]})]}),x&&(0,i.jsxs)(d.s,{"aria-label":"File view",size:"small",sx:{mx:2},onChange:k?e=>k(1===e):void 0,children:[(0,i.jsx)(d.s.IconButton,{"aria-label":"Display the source diff",defaultSelected:!p,icon:a.CodeIcon}),(0,i.jsx)(d.s.IconButton,{"aria-label":"Display the rich diff",defaultSelected:p,icon:a.FileIcon})]}),R]})}try{f.displayName||(f.displayName="FileName")}catch{}try{p.displayName||(p.displayName="DiffFileHeader")}catch{}},38495:(e,t,n)=>{function i(e){return void 0!==e.linesChanged&&0!==e.linesChanged}function a(e,t,n){return"MODIFIED"===e&&t!==n}function r(e){return"COPIED"===e.status&&!i(e)}function l(e){return"RENAMED"===e.status&&!i(e)}function s(e){return!!e.oldTreeEntry&&null===e.newTreeEntry}function o(e){return!!e.truncatedReason}n.d(t,{DC:()=>a,PW:()=>l,V_:()=>o,_R:()=>h,eb:()=>s,l3:()=>m,vY:()=>r,zR:()=>u});let d=["maximum diff size exceeded.","maximum number of lines exceeded."],c=/^maximum file count exceeded/;function u(e){let t=e;return d.includes(e)?t="Sorry, we could not display the changes to this file because there were too many other changes to display.":c.test(e)&&(t="Sorry, we could not display the changes to this file because there were too many other files to display."),t}function m(e){return!!e.newTreeEntry?.isGenerated}function h(e){return 0===e.linesChanged}},39173:(e,t,n)=>{n.d(t,{rm:()=>S,mQ:()=>C,B_:()=>y});var i=n(48055),a=n(85529),r=n(58081),l=n(41676),s=n(24815);function o(e,t,n){if(!t.has(e))throw TypeError("attempted to "+n+" private field on non-instance");return t.get(e)}function d(e,t){var n=o(e,t,"get");return n.get?n.get.call(e):n.value}function c(e,t,n){!function(e,t){if(t.has(e))throw TypeError("Cannot initialize the same private elements twice on an object")}(e,t),t.set(e,n)}function u(e,t,n){var i=o(e,t,"set");return!function(e,t,n){if(t.set)t.set.call(e,n);else{if(!t.writable)throw TypeError("attempted to set read only private field");t.value=n}}(e,i,n),n}function m(e,t){return e.name.localeCompare(t.name)}function h(e,t){return e.fileName.localeCompare(t.fileName)}function f(e){return e.diff}var p=new WeakMap;let FileNode=class FileNode{constructor(e){c(this,p,{writable:!0,value:void 0}),this.diff=e,this.filePath=this.diff.path,u(this,p,this.filePath.split("/")),this.fileName=d(this,p)[d(this,p).length-1],this.directoryParts=d(this,p).slice(0,d(this,p).length-1)}};var g=new WeakMap;let DirectoryNode=class DirectoryNode{getOrCreateDirectory(e){let t=d(this,g).get(e);if(!t){let n=this.path?`${this.path}/`:"";t=new DirectoryNode(e,`${n}${e}`),this.directories.push(t),d(this,g).set(e,t)}return t}sort(){for(let e of(this.directories.sort(m),this.files.sort(h),this.directories))e.sort()}getOrderedDiffs(){let e=this.files.map(f);for(let t of this.directories)e.push(...t.getOrderedDiffs());return e}constructor(e,t){c(this,g,{writable:!0,value:void 0}),this.name=e,this.path=t,this.directories=[],this.files=[],u(this,g,new Map)}};function x(e){let t=new DirectoryNode("","");for(let n of e.map(e=>new FileNode(e))){let e=t;for(let t of n.directoryParts)e=e.getOrCreateDirectory(t);e.files.push(n)}return t.sort(),t}function y(e){return x(e.filter(e=>!!e)).getOrderedDiffs()}var b=n(98833);function C({status:e}){switch(e){case"ADDED":case"COPIED":return(0,i.jsx)(b.Z,{size:16,icon:a.FileAddedIcon,className:"fgColor-success"});case"DELETED":return(0,i.jsx)(b.Z,{size:16,icon:a.FileRemovedIcon,className:"fgColor-danger"});case"RENAMED":return(0,i.jsx)(b.Z,{size:16,icon:a.FileMovedIcon,className:"fgColor-attention"});default:return(0,i.jsx)(b.Z,{size:16,icon:a.FileIcon,className:"fgColor-muted"})}}try{C.displayName||(C.displayName="FileStatusIcon")}catch{}var j=n(29065);let v=(0,r.memo)(function({file:e,depth:t,isActive:n,onSelect:o}){let d=r.useRef(null),c=(0,j.a)({focusRowRef:d,mouseRowRef:d}),u=(e.diff.totalCommentsCount??0)+(e.diff.totalAnnotationsCount??0);return(0,i.jsxs)(l.L.Item,{defaultExpanded:!0,"aria-level":t,current:n,id:e.diff.path,onSelect:()=>o?.(e.diff),ref:d,children:[(0,i.jsx)(l.L.LeadingVisual,{children:(0,i.jsx)(C,{status:e.diff.changeType})}),e.fileName,c&&(0,i.jsx)(s.u,{"data-testid":`${e.fileName}-item-tooltip`,id:`${e.fileName}-item-tooltip`,contentRef:d,"aria-label":e.fileName,open:!0,direction:"ne"}),!!u&&(0,i.jsx)(l.L.TrailingVisual,{children:(0,i.jsxs)("div",{className:"d-flex flex-items-center flex-row",children:[(0,i.jsx)(a.CommentIcon,{}),(0,i.jsx)("div",{className:"ml-1 text-bold fgColor-default f6",children:u<10?u:"9+"})]})})]})});function N({directory:e,depth:t=0,leadingPath:n="",activeFilePath:a,...o}){let d=n?`${n}/`:"",c=r.useRef(null),u=r.useRef(null),m=(0,j.a)({focusRowRef:u,mouseRowRef:c});if(!e.files.length&&1===e.directories.length)return(0,i.jsx)(i.Fragment,{children:e.directories.map(n=>(0,i.jsx)(N,{activeFilePath:a,depth:0===t?1:t,directory:n,leadingPath:`${d}${e.name}`,...o},n.path))});function h(){return(0,i.jsxs)(i.Fragment,{children:[e.files.map(e=>(0,i.jsx)(v,{depth:t+1,file:e,isActive:a===e.filePath,...o},e.filePath)),e.directories.map(e=>(0,i.jsx)(N,{activeFilePath:a,depth:t+1,directory:e,...o},e.path))]})}return 0===t?h():(0,i.jsxs)(l.L.Item,{ref:u,defaultExpanded:!0,id:e.path,children:[(0,i.jsx)(l.L.LeadingVisual,{children:(0,i.jsx)(l.L.DirectoryIcon,{})}),(0,i.jsx)("span",{ref:c,children:`${d}${e.name}`}),m&&(0,i.jsx)(s.u,{"data-testid":`${e.name}-directory-item-tooltip`,id:`${e.name}-directory-item-tooltip`,contentRef:u,"aria-label":`${d}${e.name}`,open:!0,direction:"ne"}),(0,i.jsx)(l.L.SubTree,{children:h()})]},e.path)}let S=(0,r.memo)(function({activeFilePath:e,diffs:t,...n}){let a=x(t);return(0,i.jsx)(l.L,{"aria-label":"File Tree",children:(0,i.jsx)(N,{activeFilePath:e,directory:a,...n})})});try{v.displayName||(v.displayName="File")}catch{}try{N.displayName||(N.displayName="Directory")}catch{}try{S.displayName||(S.displayName="DiffFileTree")}catch{}},73028:(e,t,n)=>{n.d(t,{Q6:()=>tl,jR:()=>d.j,qV:()=>ts.qV,Es:()=>ts.Es});var i=n(48055),a=n(38495),r=n(6975),l=n(46455),s=n(73290),o=n(58081),d=n(18655),c=n(92086),u=n(86010),m=n(88216),h=n(97011);let f={gridColumnTemplate:"HiddenDiffPatch-module__gridColumnTemplate--3bEGq"};function p({children:e,helpText:t,helpUrl:n,onLoadDiff:a}){let r=n&&t;return(0,i.jsx)("div",{className:"px-3 py-4 fgColor-muted",children:(0,i.jsxs)("div",{className:(0,u.Z)(f.gridColumnTemplate),children:[(0,i.jsx)("svg",{"aria-hidden":!0,height:"84",style:{maxWidth:"340px"},viewBox:"0 0 340 84",xmlns:"http://www.w3.org/2000/svg",children:(0,i.jsx)("path",{clipPath:"url(#diff-placeholder)",d:"M0 0h340v84H0z",fillRule:"evenodd",style:{fill:"var(--bgColor-muted, var(--color-canvas-subtle))"}})})," ",(0,i.jsxs)("div",{className:"d-flex flex-justify-center flex-column flex-column text-center",children:[(0,i.jsx)(m.r,{className:"h4 mx-auto",variant:"invisible",onClick:()=>a(),children:"Load Diff"}),(0,i.jsxs)(h.Z,{className:"fgColor-muted mt-1",children:[e,r&&(0,i.jsx)(s.Z,{inline:!0,href:n,children:t})]})]})]})})}try{p.displayName||(p.displayName="HiddenDiffPatch")}catch{}let g={finalLineId:"final-hunk-header-line"};function x(e,t){return e.startBlobLineNumber-t.startBlobLineNumber}function y(e,t){if("HUNK"===e.type&&e.__id===g.finalLineId)return{currentHunk:t[t.length-1],previousHunk:t[t.length-2]};let n=t.sort(x).findIndex(t=>t.startBlobLineNumber<=e.blobLineNumber&&t.endBlobLineNumber>=e.blobLineNumber);return{currentHunk:t[n],nextHunk:t[n+1],previousHunk:t[n-1]}}function b(e){let t=[],n=0;for(let i=1;i<e.length;i++){let a=e[i],r=i===e.length-1;if(a&&!(0,c.Ok)(a)){if("HUNK"===a.type){let r;let l=e[n];if(!l||(0,c.Ok)(l))continue;let s=i-1;for(;(!r||(0,c.Ok)(r))&&(r=e[s],-1!=--s););r&&!(0,c.Ok)(r)&&t.push({startBlobLineNumber:l.blobLineNumber,endBlobLineNumber:r.blobLineNumber}),a.__id===g.finalLineId&&t.push({startBlobLineNumber:a.blobLineNumber,endBlobLineNumber:a.blobLineNumber+20}),n=i;continue}if(r){let i=e[n];i&&!(0,c.Ok)(i)&&t.push({startBlobLineNumber:i.blobLineNumber,endBlobLineNumber:a.blobLineNumber})}}}return t}var C=n(63451),j=n(8930);let v={overlay:"SelectedDiffLinesOverlay-module__overlay--mWvvK",overlayOpacity:"SelectedDiffLinesOverlay-module__overlayOpacity--B9iKM"};function N({selectedLineRange:e,tableRef:t}){let[n,a]=(0,o.useState)(null),r=(0,o.useCallback)(()=>{if(!t.current)return;let e=t.current.querySelectorAll('td[data-selected="true"]');if(0===e.length){a(null);return}let n=(function(e){let t=e.parentNode;for(;null!==t;){if(t instanceof HTMLElement&&"static"!==getComputedStyle(t).position)return t;t=t.parentNode}return document.body})(t.current).getBoundingClientRect(),i=0,r=Number.MAX_SAFE_INTEGER,l=0,s=Number.MAX_SAFE_INTEGER;for(let t of e){let e=t.getBoundingClientRect();i=Math.max(i,e.bottom-n.top),r=Math.min(r,e.left-n.left),l=Math.max(l,e.right-n.left),s=Math.min(s,e.top-n.top)}a({left:r-1,height:i-s+2,top:s-1,width:l-r+2})},[t]);return((0,C.b)(()=>{r()},[e,t,r]),(0,j.y)(r,t),n)?(0,i.jsx)("div",{className:(0,u.Z)("position-absolute","borderColor-accent-emphasis",v.overlay),style:n,children:(0,i.jsx)("div",{className:(0,u.Z)("width-full","height-full","bgColor-accent-emphasis",v.overlayOpacity)})}):null}try{N.displayName||(N.displayName="SelectedDiffLinesOverlay")}catch{}let S=(0,o.createContext)(null);function w({children:e,currentHunk:t,diffEntryId:n,diffLine:a,fileAnchor:r,fileLineCount:l,filePath:s,isLeftSide:d,isRowSelected:c,isSplit:u,modifiedLineThreads:m,modifiedLineThreadsConnectionId:h,nextHunk:f,originalLineThreads:p,originalLineThreadsConnectionId:g,previousHunk:x,rowId:y}){let b=(0,o.useMemo)(()=>({currentHunk:t,diffEntryId:n,diffLine:a,fileAnchor:r,fileLineCount:l,filePath:s,isLeftSide:d,isRowSelected:c,isSplit:u,modifiedLineThreads:m,modifiedLineHasThreads:m&&m.length>0,modifiedLineThreadsConnectionId:h,nextHunk:f,originalLineThreads:p,originalLineHasThreads:p&&p.length>0,originalLineThreadsConnectionId:g,previousHunk:x,rowId:y}),[t,n,a,r,l,s,d,c,u,m,h,f,p,g,x,y]);return(0,i.jsx)(S.Provider,{value:b,children:e})}function L(){let e=(0,o.useContext)(S);if(!e)throw Error("useDiffLineContext must be used within a DiffLineContextProvider");return e}try{S.displayName||(S.displayName="DiffLineContext")}catch{}try{w.displayName||(w.displayName="DiffLineContextProvider")}catch{}function k(e,t){return e?.threads?.flatMap(e=>{let n=e?.id,i=e?.commentsData?.comments?.[0]?.author??t,a=e?.commentsData.totalCount??0,r=e?.commentsData?.__id;return n&&i?[{id:n,author:i,commentCount:a,commentsConnectionId:r,diffSide:e.diffSide,isOutdated:e.isOutdated,line:e.line,startLine:e.startLine,startDiffSide:e.startDiffSide}]:[]})??[]}var I=n(8358),E=n(17840);let GridNavigator=class GridNavigator{moveToNextItem(e,t){let n;let i=this.cellIdToGridLocation.get(this.focusedGridCell?.cellId??"");if(!i)return;let[a]=i,[,r]=i;switch(("ArrowDown"===e||"ArrowUp"===e)&&this.isHunkRow(a)&&this.savedColumnIndex&&(r=this.savedColumnIndex,this.savedColumnIndex=void 0),!0){case t&&"Home"===e:this.focusFirstGridCell();break;case t&&"End"===e:{let e=this.grid.length-1,t=this.grid[e]?.length;t&&(n=this.grid[e]?.[t-1]);break}case"ArrowUp"===e:this.isHunkRow(a-1)?(this.saveColumnIndex(r),n=this.grid[a-1]?.[0]):n=this.grid[a-1]?.[r];break;case"ArrowDown"===e:this.isHunkRow(a+1)?(this.saveColumnIndex(r),n=this.grid[a+1]?.[0]):n=this.grid[a+1]?.[r];break;case"ArrowLeft"===e:n=this.grid[a]?.[r-1];break;case"ArrowRight"===e:n=this.grid[a]?.[r+1];break;case"PageUp"===e:{this.saveColumnIndex(r);let e=this.getPreviousHunkRowIndex(a);n=this.grid[e]?.[0];break}case"PageDown"===e:{this.saveColumnIndex(r);let e=this.getNextHunkRowIndex(a),t=0;e||(e=this.grid.length-1,t=r),n=this.grid[e]?.[t];break}case"Home"===e:n=this.grid[a]?.[0];break;case"End"===e:{let e=this.grid[a];if(e&&!this.isHunkRow(a)){let t=e.length-1;n=this.grid[a]?.[t]}}}return n&&(this.focusedGridCell=n),this.focusedGridCell}reinitializeGrid(e,t){this.initializeGrid(e,t)}focusFirstGridCell(e){e&&this.cellIdToGridLocation.get(e)?this.focusGridCell(e):this.focusedGridCell=this.grid[0]?.[0]}focusGridCell(e){if(this.focusedGridCell?.cellId===e)return;let t=this.cellIdToGridLocation.get(e);if(!t)return;let[n,i]=t;this.focusedGridCell=this.grid[n]?.[i]}getNextSelectableCell(e){let t;let n=this.lastSelectedGridCell||this.focusedGridCell,i=this.cellIdToGridLocation.get(n?.cellId??"");if(!i)return;let[a,r]=i;if(("ArrowUp"!==e||!(a<=1))&&("ArrowDown"!==e||a!==this.grid.length-1)){if("ArrowUp"===e){let e=a-1;for(;!t;)t=this.getNextSelectableCellFromRow({rowIndex:e,columnIndex:r}),e--}if("ArrowDown"===e){let e=a+1;for(;!t;)t=this.getNextSelectableCellFromRow({rowIndex:e,columnIndex:r}),e++}return t&&(this.lastSelectedGridCell=t),t}}getValidSelectableRowCell(){if(this.focusedGridCell?.isHunk)return;if(!this.focusedGridCell?.isEmpty)return this.focusedGridCell;let e=this.cellIdToGridLocation.get(this.focusedGridCell.cellId)?.[0];if(e)return this.focusedGridCell.columnIndex<2?this.grid[e]?.[this.focusedGridCell.columnIndex+2]:this.grid[e]?.[this.focusedGridCell.columnIndex-2]}clearLastSelectedCell(){this.lastSelectedGridCell=void 0}getFirstCodeCell(){let e=this.grid.find(e=>e[0]&&!e[0].isHunk);return e?.find(e=>!e.isEmpty)}getLastCodeCell(){let e=this.grid.slice().reverse().find(e=>e[0]&&!e[0].isHunk);return e?.slice().reverse().find(e=>!e.isEmpty)}hasLine(e,t,n){let i=(0,c.Re)(this.fileAnchor,e,t),a=(0,c.nb)(i,0),r=this.cellIdToGridLocation.get(a);if(!r)return!1;let[l]=r;return!!n===this.isHunkRow(l)}getNextSelectableCellFromRow({rowIndex:e,columnIndex:t}){let n=this.grid[e],i=n?.[t];switch(!0){case i?.isHunk:return;case i?.orientation==="left"&&i.isEmpty:return n?.[t+2];case i?.orientation==="right"&&i.isEmpty:return n?.[t-2];default:return n?.[t]}}getNextHunkRowIndex(e){return Array.from(this.hunkRowIndexes).sort((e,t)=>e-t).find(t=>t>e)}getPreviousHunkRowIndex(e){return Array.from(this.hunkRowIndexes).sort((e,t)=>e-t).reverse().find(t=>t<e)??0}initializeGrid(e,t){this.grid=[],this.cellIdToGridLocation=new Map,this.hunkRowIndexes=new Set;for(let n=0;n<e.length;n++){let i=[],a=e[n];if(void 0!==a){if(this.isSplitDiff){let e=(t||[])[n],r=(0,c.Re)(this.fileAnchor,a,e);(0,c.Ok)(a)||"HUNK"!==a.type?this.initializeSplitDiffCodeRow({leftLine:a,rightLine:e,row:i,rowIdentifier:r,rowIndex:n}):this.initializeHunkRow(i,r,n)}else{let e=(0,c.Re)(this.fileAnchor,a,a);(0,c.Ok)(a)||"HUNK"!==a.type?this.initializeUnifiedDiffCodeRow({diffLine:a,row:i,rowIdentifier:e,rowIndex:n}):this.initializeHunkRow(i,e,n)}this.grid.push(i)}}}initializeContentCell({cellIndex:e,diffLine:t,orientation:n,row:i,rowIdentifier:a,rowIndex:r}){let l;let s=(0,c.nb)(a,e);(0,c.Ok)(t)||"left"!==n||(l=t?.left),(0,c.Ok)(t)||"right"!==n||(l=t?.right),i.push({lineNumber:l,orientation:n,isHunk:!1,isEmpty:(0,c.Ok)(t),cellId:(0,c.nb)(a,e),columnIndex:e}),this.cellIdToGridLocation.set(s,[r,e])}initializeHunkRow(e,t,n){let i=(0,c.nb)(t,0);e.push({isHunk:!0,isEmpty:!1,cellId:i,columnIndex:0}),this.cellIdToGridLocation.set(i,[n,0]),this.hunkRowIndexes.add(n)}isHunkRow(e){return this.hunkRowIndexes.has(e)}initializeSplitDiffCodeRow({leftLine:e,rightLine:t,row:n,rowIdentifier:i,rowIndex:a}){this.initializeContentCell({cellIndex:0,diffLine:e,orientation:"left",row:n,rowIdentifier:i,rowIndex:a}),this.initializeContentCell({cellIndex:1,diffLine:e,orientation:"left",row:n,rowIdentifier:i,rowIndex:a}),this.initializeContentCell({cellIndex:2,diffLine:t,orientation:"right",row:n,rowIdentifier:i,rowIndex:a}),this.initializeContentCell({cellIndex:3,diffLine:t,orientation:"right",row:n,rowIdentifier:i,rowIndex:a})}initializeUnifiedDiffCodeRow({diffLine:e,row:t,rowIdentifier:n,rowIndex:i}){let a=(0,c.Ok)(e)||"DELETION"!==e.type?"right":"left";this.initializeContentCell({cellIndex:0,diffLine:e,orientation:"left",row:t,rowIdentifier:n,rowIndex:i}),this.initializeContentCell({cellIndex:1,diffLine:e,orientation:"right",row:t,rowIdentifier:n,rowIndex:i}),this.initializeContentCell({cellIndex:2,diffLine:e,orientation:a,row:t,rowIdentifier:n,rowIndex:i})}saveColumnIndex(e){this.isHunkRow(e)||(this.savedColumnIndex=e)}constructor(e,t,n,i,a){this.fileAnchor=e,this.isSplitDiff=t,this.initializeGrid(n,i),this.focusFirstGridCell(a)}};function D(e){e&&setTimeout(()=>{0!==e.tabIndex&&(e.tabIndex=0)})}var T=n(48542);let R={ArrowLeft:T.Qw.ArrowHorizontal,ArrowDown:T.Qw.ArrowVertical,ArrowUp:T.Qw.ArrowVertical,ArrowRight:T.Qw.ArrowHorizontal,h:T.Qw.HL,j:T.Qw.JK,k:T.Qw.JK,l:T.Qw.HL,a:T.Qw.AD,s:T.Qw.WS,w:T.Qw.WS,d:T.Qw.AD,Tab:T.Qw.Tab,Home:T.Qw.HomeAndEnd,End:T.Qw.HomeAndEnd,PageUp:T.Qw.PageUpDown,PageDown:T.Qw.PageUpDown,Backspace:T.Qw.Backspace},O=T.Qw.ArrowAll|T.Qw.PageUpDown|T.Qw.HomeAndEnd|T.Qw.AD,A={ghostUser:{displayName:"Ghost",login:"ghost",avatarUrl:"https://avatars.githubusercontent.com/ghost",path:"/ghost",url:"/ghost"}};function F(e){return e in R&&(R[e]&O)>0}function _({clearSelectedDiffRowRange:e,containerRef:t,fileAnchor:n,isSplitDiff:i,leftLines:a,replaceSelectedDiffRowRangeFromGridCells:r,rightLines:l,selectedDiffRowRange:s,updateSelectedDiffRowRange:d}){var u;let m=(0,o.useRef)(),h=(0,o.useMemo)(()=>new GridNavigator(n,i,a,l,m.current?.focusedGridCell?.cellId),[n,i,a,l]);(0,o.useEffect)(()=>{m.current=h},[h]),u=m.current,(0,o.useEffect)(()=>{if(u&&document.activeElement){let e=function(e,t,n){let i=[];for(let a=0;a<t.length;a++){let r=t[a],l=n?.[a]??r,s=!(0,c.Ok)(r)&&r?.type==="HUNK";r&&l&&!e.hasLine(r,l,s)&&i.push(r)}return i}(u,a,l);if(0!==e.length){if(t.current?.contains(document.activeElement)){if("BUTTON"===document.activeElement.tagName)D(document.activeElement.closest("td"));else if("TD"===document.activeElement.tagName){let e=document.activeElement.getAttribute("data-grid-cell-id"),n=h.focusedGridCell?.cellId;if(e!==n){let e=t.current.querySelector(`[data-grid-cell-id=${n}]`);e?.focus()}}}else{let t,i,r;let l=a.indexOf(e[e.length-1]),s=a[l+1],o=e[0];s&&!(0,c.Ok)(s)&&"HUNK"===s.type&&(t=(0,c.nb)((0,c.Re)(n,s,s),0),i=document.querySelector(`[data-grid-cell-id=${t}]`),r=i?.querySelector("button[data-direction=down], button[data-direction=all]")),r||(t=(0,c.nb)((0,c.Re)(n,o,o),0),i=document.querySelector(`[data-grid-cell-id=${t}]`),r=i?.querySelector("button[data-direction=up], button[data-direction=all]")),t&&i&&(r?r.focus():i.focus(),h.focusGridCell(t),D(i))}}}},[n,a,h,l,u,t]),function(e,t){let n=(0,o.useCallback)(e=>{let n=e.target.getAttribute("data-grid-cell-id");n&&t.focusGridCell(n)},[t]);(0,o.useEffect)(()=>{let t=e.current;return t?.addEventListener("focusin",n),()=>t?.removeEventListener("focusin",n)},[e,n])}(t,h);let f=(0,o.useCallback)((t,i,a)=>{let l=h.getValidSelectableRowCell();switch(!0){case(a.metaKey||a.ctrlKey)&&"KeyA"===a.code:{let e=h.getFirstCodeCell(),t=h.getLastCodeCell();if(!e||!t)return i;return r({diffAnchor:n,focusedGridCell:e,startGridCell:e,endGridCell:t}),i}case a.shiftKey&&"ArrowDown"===a.key:{let e=h.getNextSelectableCell("ArrowDown");if(!e||!l)return i;return s?.firstSelectedLineNumber?d(n,e.lineNumber,e.orientation,!0):r({diffAnchor:n,focusedGridCell:l,startGridCell:l,endGridCell:e}),i}case a.shiftKey&&"ArrowUp"===a.key:{let e=h.getNextSelectableCell("ArrowUp");if(!e||!l)return i;return s?.firstSelectedLineNumber?d(n,e.lineNumber,e.orientation,!0):r({diffAnchor:n,focusedGridCell:l,startGridCell:e,endGridCell:l}),i}default:{let t=h.moveToNextItem(a.key,a.ctrlKey),n=t&&document.querySelector(`[data-grid-cell-id=${t.cellId}]`);return e(),h.clearLastSelectedCell(),n??void 0}}},[h,s,d,n,r,e]);return(0,E.v)({containerRef:t,bindKeys:O,getNextFocusable:f,focusableElementFilter:e=>"BUTTON"!==e.tagName,focusInStrategy:"previous"},[f]),{gridNavigator:h}}var M=n(10764);function P({leftLine:e,rightLine:t,currentSide:n}){let a=e.threadsData?.totalCount||0,r=t.threadsData?.totalCount||0,l=e.threadsData?.threads?.[0]?.commentsData.comments?.[0]?.author?.login||"",s=t.threadsData?.threads?.[0]?.commentsData.comments?.[0]?.author?.login||"",o="";1===a?o=`has conversation started by @${l}.`:a>1&&(o="has conversations.");let d="";1===r?d=`has conversation started by @${s}.`:r>1&&(d="has conversations.");let c="";if("LEFT"===n){let e=`${o.charAt(0).toUpperCase()}${o.slice(1)}`,t=`${d.length>1?"Modified line":""} ${d}`;c=`${e} ${t}`}else{let e=`${d.charAt(0).toUpperCase()}${d.slice(1)}`,t=`${o.length>1?"Original line":""} ${o}`;c=`${e} ${t}`}return 0===a&&0===r?null:(0,i.jsx)("div",{className:"sr-only","data-testid":"pr-diffline-summary",children:c.trimStart().trimEnd()})}try{P.displayName||(P.displayName="DiffLineSummary")}catch{}var $=n(34996),B=n(14136),U=n(75299),Z=n(68100),H=n(30738),V=n(85529);let G=(0,o.createContext)(null);function z({children:e,...t}){let n=!!t.commentingImplementation,a=!!t.markerNavigationImplementation;if(t.commentingEnabled!==n&&t.commentingEnabled!==a)throw Error("commentingEnabled, commentingImplementation, and markerNavigationImplementation must be passed together");let r=t?.ghostUser??A.ghostUser,l=(0,o.useMemo)(()=>({ghostUser:r,...t}),[...Object.values(t),r]);return(0,i.jsx)(G.Provider,{value:l,children:e})}function K(){let e=(0,o.useContext)(G);if(!e)throw Error("useDiffContext must be used within a DiffContextProvider");return e}try{G.displayName||(G.displayName="DiffContext")}catch{}try{z.displayName||(z.displayName="DiffContextProvider")}catch{}var q=n(54734);function W(e){return null!=e}let Q="thread",X="annotation",J=(0,o.createContext)(null);function Y({children:e,line:t}){let[n,a]=(0,o.useState)(!1),[r,l]=(0,o.useState)(),[s,d]=(0,o.useState)(),[c,u]=(0,o.useState)(),[m,h]=(0,o.useState)(),[f,p]=(0,o.useState)(),{ghostUser:g}=K(),{originalLineThreads:x,modifiedLineThreads:y,originalLineThreadsConnectionId:b,modifiedLineThreadsConnectionId:C}=L(),[j,v]=(0,o.useState)(),{threads:N,threadConnectionId:S}=et({line:t,side:j,originalLineThreads:x,modifiedLineThreads:y,originalLineThreadsConnectionId:b,modifiedLineThreadsConnectionId:C,ghostUser:g}),w=(0,o.useMemo)(()=>!!r||!!s||!!c||!!m,[r,c,s,m]),k=(0,o.useCallback)(()=>{a(!0)},[]),I=(0,o.useCallback)(()=>{a(!1)},[]),E=(0,o.useCallback)(e=>{e?p({id:e,kind:Q}):p(void 0)},[]),D=f?.kind===Q?f.id:void 0,T=f?.kind===X?f.id:void 0,R=(0,o.useCallback)(e=>{e?p({id:e,kind:X}):p(void 0)},[]),O=(0,o.useCallback)((e,t,n)=>{switch((0,q.B)(),e){case"context-menu":l(t),h(void 0),u(void 0),d(void 0);break;case"new-conversation":h({cellId:t,withSuggestedChange:n?.withSuggestedChange}),l(void 0),u(void 0),d(void 0);break;case"marker-details":u(t),l(void 0),d(void 0),h(void 0);break;case"marker-list":d(t),l(void 0),h(void 0),u(void 0)}},[]),A=(0,o.useCallback)(e=>{switch(e){case"context-menu":l(void 0);break;case"new-conversation":h(void 0);break;case"marker-details":u(void 0);break;case"marker-list":d(void 0)}},[]),F=(0,o.useCallback)(e=>(v(e),et({line:t,side:e,modifiedLineThreads:y,modifiedLineThreadsConnectionId:C,originalLineThreads:x,originalLineThreadsConnectionId:b,ghostUser:g}).threads),[t,y,C,x,b,g]),_=(0,o.useMemo)(()=>t.annotationsData?.annotations?.filter(W)??[],[t.annotationsData?.annotations]),M=(0,o.useMemo)(()=>({annotations:_,isActionBarVisible:n,showActionBar:k,hideActionBar:I,selectThreadId:E,selectAnnotationId:R,closeDialog:A,openDialog:O,anyMenuOpen:w,selectedThreadId:D,selectedAnnotationId:T,openContextMenuCell:r,openMarkersListCell:s,openMarkerDetailsCell:c,openNewConversationCell:m,threads:N,updateVisibleThreads:F,threadConnectionId:S}),[_,n,k,I,E,R,A,O,w,D,T,r,s,c,m,N,S,F]);return(0,i.jsx)(J.Provider,{value:M,children:e})}function ee(){let e=(0,o.useContext)(J);if(!e)throw Error("useMarkersDialogContext must be used within a MarkersDialogContextProvider");return e}function et({line:e,side:t,originalLineThreads:n,modifiedLineThreads:i,originalLineThreadsConnectionId:a,modifiedLineThreadsConnectionId:r,ghostUser:l}){switch(t){case"LEFT":return{threads:n||[],threadConnectionId:a};case"RIGHT":return{threads:i||[],threadConnectionId:r};case void 0:return{threads:k(e.threadsData,l),threadConnectionId:e.threadsData?.__id};default:return{threads:[],threadConnectionId:void 0}}}try{J.displayName||(J.displayName="MarkersDialogContext")}catch{}try{Y.displayName||(Y.displayName="MarkersDialogContextProvider")}catch{}var en=n(28771),ei=n(59434);function ea({cellId:e,actionBarRef:t}){let{replaceSelectedDiffRowRange:n}=(0,d.h)(),{fileAnchor:i}=L(),[a,r]=(0,o.useState)(t),{annotations:l,openDialog:s,closeDialog:c,selectedAnnotationId:u,selectAnnotationId:m,selectedThreadId:h,selectThreadId:f,openContextMenuCell:p,openNewConversationCell:g,openMarkerDetailsCell:x,openMarkersListCell:y,updateVisibleThreads:b,threads:C,threadConnectionId:j,anyMenuOpen:v}=ee(),{sendAnalyticsEvent:N}=(0,ei.z)(),S=(0,o.useMemo)(()=>g?.cellId===e,[e,g]),w=(0,o.useMemo)(()=>g?.withSuggestedChange,[g]),k=(0,o.useCallback)(t=>{s("new-conversation",e,t)},[e,s]),I=(0,o.useCallback)(()=>{k()},[k]),E=(0,o.useCallback)(()=>{r(t),k(),N("diff.start_new_conversation","PLUS_ICON")},[t,k,N]),D=(0,o.useCallback)(()=>{k({withSuggestedChange:!0}),N("diff.start_new_conversation_with_suggested_change","CELL_CONTEXT_MENU")},[k,N]),T=(0,o.useCallback)(()=>{r(t),k({withSuggestedChange:!0}),N("diff.start_new_conversation_with_suggested_change","ACTION_BAR_CONTEXT_MENU")},[t,k,N]),R=(0,o.useCallback)(()=>{c("new-conversation")},[c]),O=(0,o.useMemo)(()=>p===e,[e,p]),A=(0,o.useCallback)(()=>{s("context-menu",e)},[e,s]),F=(0,o.useCallback)(()=>{r(t),A()},[t,A]),_=(0,o.useCallback)(()=>{c("context-menu")},[c]),M=(0,o.useCallback)(()=>{O?_():A()},[_,O,A]),P=(0,o.useCallback)(()=>{r(t),M()},[t,M]),$=(0,o.useMemo)(()=>x===e?h:void 0,[e,x,h]),B=(0,o.useMemo)(()=>x===e?u:void 0,[e,x,u]),U=(0,o.useCallback)(()=>{s("marker-details",e)},[e,s]),Z=(0,o.useCallback)(()=>{c("marker-details")},[c]),H=(0,en.R)((e,t={skipLineSelection:!1})=>{if(f(e),U(),t.skipLineSelection)return;let a=C.find(t=>t.id===e);if(a&&a.diffSide&&a.line){let e=a.startLine??a.line,t=a.startDiffSide??a.diffSide;n({diffAnchor:i,endLineNumber:a.line,endOrientation:"LEFT"===a.diffSide?"left":"right",startLineNumber:e,startOrientation:"LEFT"===t?"left":"right",firstSelectedLineNumber:e,firstSelectedOrientation:"LEFT"===t?"left":"right"})}}),V=(0,en.R)((e,t={skipLineSelection:!1})=>{if(m(e),U(),t.skipLineSelection)return;let a=l.find(t=>t.id===e);a&&n({diffAnchor:i,endLineNumber:a.location.end.line,endOrientation:"right",startLineNumber:a.location.start.line,startOrientation:"right",firstSelectedLineNumber:a.location.start.line,firstSelectedOrientation:"right"})}),G=(0,o.useCallback)(()=>{s("marker-list",e)},[e,s]),z=(0,o.useCallback)(()=>{c("marker-list")},[c]),K=(0,o.useCallback)(e=>{let t=b(e);if(!t?.length&&!l.length)return;let n=t&&t[0],i=t&&1===t.length&&n&&!l.length,a=l[0],r=1===l.length&&a&&!t?.length;i?H(n.id):r?V(a.id):G()},[l,G,V,H,b]);return{isNewConversationDialogOpen:S,startNewConversation:I,startNewConversationFromActionBar:E,closeNewConversationDialog:R,startNewConversationWithSuggestedChange:D,startNewConversationFromActionBarWithSuggestedChange:T,shouldStartNewConversationWithSuggestedChange:w,isContextMenuOpen:O,openContextMenu:A,openContextMenuFromActionBar:F,closeContextMenu:_,toggleContextMenu:M,toggleContextMenuFromActionBar:P,optimizedSelectedThreadId:$,optimizedSelectedAnnotationId:B,selectThread:H,selectAnnotation:V,openMarkerDetailsDialog:U,closeConversationDetailsDialog:Z,isMarkerListDialogOpen:y===e,openMarkerListDialog:G,closeMarkerListDialog:z,openMarkerOrListDialogFromActionBar:(0,o.useCallback)(e=>{K(e),r(t)},[t,K]),openMarkerOrListDialog:(0,o.useCallback)(e=>{K(e)},[K]),annotations:l,returnFocusRef:a,threadConnectionId:j,threads:C,anyMenuOpen:v}}function er({cellRef:e}){let{showActionBar:t,hideActionBar:n,anyMenuOpen:i}=ee(),[a,r]=(0,o.useState)(!1),l=(0,o.useCallback)(()=>{t()},[t]),s=(0,o.useCallback)(t=>{!i&&(e.current&&e.current.contains(t.relatedTarget)||n())},[i,e,n]),d=(0,o.useCallback)(()=>{t()},[t]),c=(0,o.useCallback)(()=>{!i&&(e.current===document.activeElement||e.current?.contains(document.activeElement)||n())},[i,e,n]);return{isActionBarFocused:a,handleCellBlur:s,handleCellFocus:l,handleCellMouseEnter:d,handleCellMouseLeave:c,handleActionBarBlur:(0,o.useCallback)(t=>{e.current&&!i&&(e.current.contains(t.relatedTarget)?e.current===t.relatedTarget&&r(!1):(n(),r(!1)))},[i,e,n]),handleActionBarFocusCapture:(0,o.useCallback)(e=>{i||(e.stopPropagation(),r(!0))},[i]),handleActionBarKeydownCapture:(0,o.useCallback)(e=>{!i&&F(e.key)&&e.stopPropagation()},[i])}}function el(){let{nextHunk:e,currentHunk:t,previousHunk:n}=L(),{addInjectedContextLines:i}=K(),a=!!t&&0!==t.startBlobLineNumber,r=!!t&&!!e;return{expandStartOfHunk:()=>{a&&t&&i({start:Math.max(0,t.startBlobLineNumber-20),end:t.startBlobLineNumber})},expandEndOfHunk:()=>{r&&t&&i({start:t.endBlobLineNumber+1,end:t.endBlobLineNumber+1+20})},expandEndOfPreviousHunk:()=>{n&&i({start:n.endBlobLineNumber+1,end:n.endBlobLineNumber+1+20})},canExpandEndOfHunk:r,canExpandStartOfHunk:a}}var es=n(85861),eo=n(31171),ed=n(33831),ec=n(50919),eu=n(45677),em=n(14786),eh=n(79804),ef=n(90836),ep=n(26004);let eg={commentIndicatorContainer:"CommentIndicator-module__commentIndicatorContainer--L8lU3"};function ex({shouldAnimateRef:e}){let{diffLine:t}=L(),{ghostUser:n}=K();(0,o.useEffect)(()=>{e?.current&&(e.current=!1)},[e]);let a=(t.threadsData?.totalCommentsCount||0)+(t.annotationsData?.totalCount||0);if(0===a)return null;let r={},l=[];t.annotationsData?.annotations?.map(e=>{e?.annotationLevel&&l.push({id:e.id,level:e.annotationLevel})}),t.threadsData?.threads?.map(e=>e?.commentsData?.comments?.map(e=>{e?.author?r[e?.author.login]=e.author:n?.login&&(r[n.login]=n)}));let s=[...l.sort((e,t)=>(ep.kQ[e.level]?.priority||0)<(ep.kQ[t.level]?.priority||0)?-1:1).map(t=>e?.current?(0,i.jsx)(ep.CU,{annotationLevel:t.level},t.id):(0,i.jsx)(ep.rD,{annotationLevel:t.level},t.id)),...Object.keys(r).map(e=>{let t=r[e]?.login,a=r[e]?.avatarUrl??(n?.avatarUrl||" ");return(0,i.jsx)(eh.O,{alt:t,size:20,src:a},t)})].slice(0,3),d=a>9?"9+":`${a}`;return(0,i.jsxs)("div",{className:(0,u.Z)("d-flex","flex-justify-between","flex-items-center",eg.commentIndicatorContainer),children:[(0,i.jsx)(ef.Z,{disableExpand:!0,sx:{maxWidth:"40px","--avatar-stack-three-plus-min-width":"32px"},children:s}),(0,i.jsx)(h.Z,{sx:{color:"fg.default",ml:1,fontSize:0,fontWeight:400,fontVariantNumeric:"tabular-nums",width:"2ch",textAlign:"start"},children:d})]})}try{ex.displayName||(ex.displayName="CommentIndicator")}catch{}var ey=n(74121),eb=n(96797),eC=n(44042),ej=n(93498),ev=n(40516);let eN=({queryVariables:e,selectedRange:t})=>(0,i.jsx)(ev.n,{queryVariables:e,errorFallback:(0,i.jsx)(eS,{}),suspenseFallback:(0,i.jsx)(ew,{}),componentProps:{selectedRange:t},Component:eL}),eS=()=>(0,i.jsxs)(em.S.Item,{disabled:!0,children:[(0,i.jsx)(em.S.LeadingVisual,{children:(0,i.jsx)(V.AlertIcon,{})}),"Copilot failed to load"]}),ew=()=>(0,i.jsxs)(em.S.Item,{disabled:!0,children:[(0,i.jsx)(em.S.LeadingVisual,{children:(0,i.jsx)(ey.Z,{size:"small"})}),"Copilot is loading..."]}),eL=({fileDiffReference:e,selectedRange:t})=>{let n=(0,o.useMemo)(()=>{let n={...e};return t&&(n.selectedRange={start:`${t?.startOrientation[0]?.toUpperCase()??""}${t?.startLineNumber}`,end:`${t?.endOrientation[0]?.toUpperCase()??""}${t?.endLineNumber}`}),n},[e,t]);return(0,i.jsxs)(eu.P,{children:[(0,i.jsx)(eu.P.Anchor,{children:(0,i.jsxs)(em.S.Item,{children:[(0,i.jsx)(em.S.LeadingVisual,{children:(0,i.jsx)(V.CopilotIcon,{})}),"Copilot"]})}),(0,i.jsx)(eu.P.Overlay,{children:(0,i.jsxs)(em.S,{children:[(0,i.jsx)(eC.u,{fileDiffReference:n,eventContext:{prx:!0}}),(0,i.jsx)(ej.m,{fileDiffReference:n,eventContext:{prx:!0}}),(0,i.jsx)(eb.l,{fileDiffReference:n,eventContext:{prx:!0}})]})})]})};try{eN.displayName||(eN.displayName="CopilotDiffChatContextMenu")}catch{}try{eS.displayName||(eS.displayName="MenuItemError")}catch{}try{ew.displayName||(ew.displayName="MenuItemLoading")}catch{}try{eL.displayName||(eL.displayName="BaseCopilotDiffChatContextMenu")}catch{}var ek=n(96567);let eI={left:"L",right:"R"},eE="Start conversation",eD="Suggest change";function eT(e,t,n){let i=n&&!(0,c.FY)(t)?eI.left:eI.right;return`${e} on line ${i}${t.blobLineNumber}`}function eR({handleStartConversationWithSuggestedChange:e,handleStartConversation:t}){let n,a,r;let{selectedDiffRowRange:l,selectedDiffLines:s,replaceSelectedDiffRowRange:u}=(0,d.h)(),{commentingEnabled:m}=K(),{diffLine:h,isLeftSide:f,isSplit:p}=L(),g=(0,o.useMemo)(()=>s.leftLines[0],[s.leftLines]),x=(0,o.useMemo)(()=>s.leftLines[s.leftLines.length-1],[s.leftLines]),y=(0,o.useMemo)(()=>s.leftLines.every(e=>!(0,c.Ok)(e)&&"DELETION"!==e.type),[s.leftLines]),b=(0,o.useMemo)(()=>s.rightLines[0],[s.rightLines]),C=(0,o.useMemo)(()=>s.rightLines[s.rightLines.length-1],[s.rightLines]),j=(0,o.useMemo)(()=>0===s.rightLines.length,[s.rightLines]),v=(0,o.useMemo)(()=>0===s.leftLines.length,[s.leftLines]),N=(0,o.useMemo)(()=>!(s.leftLines.find(e=>!(0,c.Ok)(e)&&!(0,c.FY)(e)&&"INJECTED_CONTEXT"!==e.type)||s.rightLines.find(e=>!(0,c.Ok)(e)&&!(0,c.FY)(e)&&"INJECTED_CONTEXT"!==e.type)),[s.leftLines,s.rightLines]),S=(0,o.useCallback)((n,i)=>{!(!l||!x||!g||(0,c.Ok)(x)||(0,c.Ok)(g))&&g.left&&x.left&&(u({diffAnchor:l.diffAnchor,endLineNumber:x.left,endOrientation:"left",startLineNumber:g.left,startOrientation:"left",firstSelectedLineNumber:g.left,firstSelectedOrientation:"left"}),i?.withSuggestedChange?e():t())},[l,x,g,u,e,t]),w=(0,o.useCallback)((n,i)=>{!(!l||!C||!b||(0,c.Ok)(C)||(0,c.Ok)(b))&&b.right&&C.right&&(u({diffAnchor:l.diffAnchor,endLineNumber:C.right,endOrientation:"right",startLineNumber:b.right,startOrientation:"right",firstSelectedLineNumber:b.right,firstSelectedOrientation:"right"}),i?.withSuggestedChange?e():t())},[l,C,b,u,e,t]),k=(0,o.useMemo)(()=>!!l&&(l.startOrientation!==l.endOrientation||l.startLineNumber!==l.endLineNumber),[l]);if(!m)return null;let I=!1,E=!1;if(l&&k){let t=eI[l.startOrientation],s=eI[l.endOrientation];return r=` on lines ${t}${l.startLineNumber}-${s}${l.endLineNumber}`,!(0,c.Ok)(g)&&!(0,c.Ok)(x)&&g&&x&&(I=!0,n=g.left===x.left?j?` on line L${g.left}`:`, original line L${g.left}`:j?` on lines L${g.left}-L${x.right}`:`, original lines L${g.left}-L${x.left}`),!(0,c.Ok)(b)&&!(0,c.Ok)(C)&&b&&C&&(E=!0,a=b.right===C.right?v||p&&N?` on line R${b.right}`:`, modified line R${C.right}`:v||p&&N?` on lines R${b.right}-R${C.right}`:`, modified lines R${b.right}-R${C.right}`),(0,i.jsx)(i.Fragment,{children:p?(0,i.jsx)(i.Fragment,{children:N?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(em.S.Item,{onSelect:w,children:[(0,i.jsx)(em.S.LeadingVisual,{children:(0,i.jsx)(V.PlusIcon,{})}),eE+a,(0,i.jsx)(em.S.TrailingVisual,{children:(0,i.jsx)(ek.u,{keys:"Alt+n"})})]}),(0,i.jsxs)(em.S.Item,{onSelect:e=>w(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(em.S.LeadingVisual,{children:(0,i.jsx)(V.PlusCircleIcon,{})}),eD+a]})]}):(0,i.jsxs)(i.Fragment,{children:[I?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(em.S.Item,{onSelect:S,children:[(0,i.jsx)(em.S.LeadingVisual,{children:(0,i.jsx)(V.PlusIcon,{})}),eE+n,(0,i.jsx)(em.S.TrailingVisual,{children:(0,i.jsx)(ek.u,{keys:j?"Alt+n":"Alt+Shift+N"})})]}),y&&(0,i.jsxs)(em.S.Item,{onSelect:e=>S(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(em.S.LeadingVisual,{children:(0,i.jsx)(V.PlusCircleIcon,{})}),eD+n]})]}):null,E?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(em.S.Item,{onSelect:w,children:[(0,i.jsx)(em.S.LeadingVisual,{children:(0,i.jsx)(V.PlusIcon,{})}),eE+a,(0,i.jsx)(em.S.TrailingVisual,{children:(0,i.jsx)(ek.u,{keys:"Alt+n"})})]}),(0,i.jsxs)(em.S.Item,{onSelect:e=>w(e,{withSuggestedChange:!0}),children:[(0,i.jsx)(em.S.LeadingVisual,{children:(0,i.jsx)(V.PlusCircleIcon,{})}),eD+a]})]}):null]})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Z.hj,{commandId:"pull-requests-diff-view:start-conversation-current",leadingVisual:(0,i.jsx)(V.PlusIcon,{}),children:eE+r}),"DELETION"!==h.type&&y&&(0,i.jsxs)(em.S.Item,{onSelect:e,children:[(0,i.jsx)(em.S.LeadingVisual,{children:(0,i.jsx)(V.PlusCircleIcon,{})}),eD+r]})]})})}return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(Z.hj,{commandId:"pull-requests-diff-view:start-conversation-current",leadingVisual:(0,i.jsx)(V.PlusIcon,{}),children:eT(eE,h,f)}),"DELETION"!==h.type&&(0,i.jsxs)(em.S.Item,{onSelect:e,children:[(0,i.jsx)(em.S.LeadingVisual,{children:(0,i.jsx)(V.PlusCircleIcon,{})}),eT(eD,h,f)]})]})}try{eR.displayName||(eR.displayName="StartConversationContextMenuItems")}catch{}function eO({showStartConversation:e,shouldShowCopilot:t,handleViewMarkersSelection:n,startConversationCurrentLine:a,startConversationWithSuggestedChange:r}){return(0,i.jsxs)(i.Fragment,{children:[e&&(0,i.jsx)(eR,{handleStartConversation:a,handleStartConversationWithSuggestedChange:r}),(0,i.jsx)(eM,{handleViewMarkersSelection:n}),t&&(0,i.jsx)(eF,{}),(0,i.jsx)(eU,{}),(0,i.jsx)(e_,{}),(0,i.jsx)(Z.hj,{commandId:"pull-requests-diff-view:copy-anchor-link",leadingVisual:(0,i.jsx)(V.LinkIcon,{})}),(0,i.jsx)(eZ,{}),(0,i.jsx)(eH,{})]})}function eA(){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eZ,{}),(0,i.jsx)(e_,{})]})}let eF=()=>{let{diffEntryId:e}=L(),{subjectId:t,oldCommitOid:n,newCommitOid:a}=K(),{selectedDiffRowRange:r}=(0,d.h)();return e&&t&&n&&a?(0,i.jsx)(eN,{selectedRange:r,queryVariables:{diffEntryId:e,pullRequestId:t,startOid:n,endOid:a}}):null};function e_(){let{fileAnchor:e}=L();return(0,i.jsxs)(em.S.Item,{onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${e}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"a",code:"KeyA",ctrlKey:!0}))})},children:[(0,i.jsx)(em.S.LeadingVisual,{children:(0,i.jsx)(V.MultiSelectIcon,{})}),"Select all",(0,i.jsx)(em.S.TrailingVisual,{children:(0,i.jsx)(ek.u,{keys:"Mod+a"})})]})}function eM({handleViewMarkersSelection:e}){let{commentingEnabled:t}=K(),{isSplit:n}=L();return t?n?(0,i.jsx)(eP,{handleViewMarkersSelection:e}):(0,i.jsx)(e$,{onSelect:()=>e()}):null}function eP({handleViewMarkersSelection:e}){let{originalLineHasThreads:t,modifiedLineHasThreads:n,isLeftSide:a}=L(),{annotations:r}=ee(),l=r.length>0;return a?(0,i.jsxs)(i.Fragment,{children:[t&&(0,i.jsx)(eB,{text:"View markers",onSelect:()=>e("LEFT")}),(n||l)&&(0,i.jsx)(eB,{text:"View markers, modified line",onSelect:()=>e("RIGHT")})]}):(0,i.jsxs)(i.Fragment,{children:[(n||l)&&(0,i.jsx)(eB,{text:"View markers",onSelect:()=>e("RIGHT")}),t&&(0,i.jsx)(eB,{text:"View markers, original line",onSelect:()=>e("LEFT")})]})}function e$({onSelect:e}){let{ghostUser:t}=K(),{diffLine:n}=L(),{annotations:a}=ee();return n&&k(n.threadsData,t).length>0||a.length>0?(0,i.jsx)(eB,{text:"View markers",onSelect:()=>e()}):null}function eB({onSelect:e,text:t}){return(0,i.jsxs)(em.S.Item,{onSelect:e,children:[(0,i.jsx)(em.S.LeadingVisual,{children:(0,i.jsx)(V.CommentDiscussionIcon,{})}),t]})}function eU(){return(0,i.jsx)("div",{onMouseDown:e=>{window.getSelection()?.toString()!==""&&e.preventDefault()},children:(0,i.jsx)(Z.hj,{commandId:"pull-requests-diff-view:copy-code",leadingVisual:(0,i.jsx)(V.CopyIcon,{})})})}function eZ(){let{canExpandStartOfHunk:e,canExpandEndOfHunk:t}=el();return(0,i.jsxs)(i.Fragment,{children:[e&&(0,i.jsx)(Z.hj,{commandId:"pull-requests-diff-view:expand-hunk-up",leadingVisual:(0,i.jsx)(V.FoldUpIcon,{})}),t&&(0,i.jsx)(Z.hj,{commandId:"pull-requests-diff-view:expand-hunk-down",leadingVisual:(0,i.jsx)(V.FoldDownIcon,{})})]})}function eH(){let{previousHunk:e,nextHunk:t}=L(),{fileAnchor:n}=L();return(0,i.jsxs)(i.Fragment,{children:[t?(0,i.jsxs)(em.S.Item,{"aria-keyshortcuts":"PageDown",onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${n}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"PageDown"}))})},children:[(0,i.jsx)(em.S.LeadingVisual,{children:(0,i.jsx)(V.MoveToBottomIcon,{})}),"Go to next hunk",(0,i.jsx)(em.S.TrailingVisual,{children:"Page Down"})]}):null,e?(0,i.jsxs)(em.S.Item,{"aria-keyshortcuts":"PageUp",onSelect:()=>{setTimeout(()=>{document.querySelector(`table[data-diff-anchor="${n}"]`)?.dispatchEvent(new KeyboardEvent("keydown",{key:"PageUp"}))})},children:[(0,i.jsx)(em.S.LeadingVisual,{children:(0,i.jsx)(V.MoveToTopIcon,{})}),"Go to previous hunk",(0,i.jsx)(em.S.TrailingVisual,{children:"Page Up"})]}):null]})}try{eO.displayName||(eO.displayName="CellContextMenu")}catch{}try{eA.displayName||(eA.displayName="EmptyCellContextMenu")}catch{}try{eF.displayName||(eF.displayName="CopilotListItems")}catch{}try{e_.displayName||(e_.displayName="SelectAllListItem")}catch{}try{eM.displayName||(eM.displayName="ViewMarkerListItems")}catch{}try{eP.displayName||(eP.displayName="SplitDiffMarkersListItems")}catch{}try{e$.displayName||(e$.displayName="UnifiedDiffMarkerListItem")}catch{}try{eB.displayName||(eB.displayName="MarkerListItem")}catch{}try{eU.displayName||(eU.displayName="CopyContentListItems")}catch{}try{eZ.displayName||(eZ.displayName="ExpandHunksListItems")}catch{}try{eH.displayName||(eH.displayName="JumpToHunkListItems")}catch{}var eV=n(30953);function eG({authorAvatarUrl:e,authorLogin:t,sx:n}){return(0,i.jsx)(eV.K,{altText:`${t}'s avatar image with pending indicator`,icon:V.DotFillIcon,iconColor:"var(--fgColor-attention, var(--color-attention-fg))",square:!1,src:e,backgroundSx:{backgroundColor:"var(--bgColor-default, var(--color-canvas-default))",boxShadow:"0 0 0 .1px var(--bgColor-default, var(--color-canvas-default))"},sx:{alignItems:"center",display:"flex",opacity:.5,...n}})}try{eG.displayName||(eG.displayName="InProgressCommentIndicator")}catch{}let ez={position:"absolute",right:"-16px",top:"0px",zIndex:2},eK="24px",eq="30px",eW=(0,o.forwardRef)(function({authorAvatarUrl:e,authorLogin:t,cellId:n,cellRef:a,showStartConversation:r,hasDraftComment:l,shouldShowCopilot:s=!0},d){let c=(0,o.useRef)(null),u=(0,o.useRef)(null),{commentingEnabled:h}=K(),{diffLine:f,isRowSelected:p}=L(),g=(0,o.useRef)(null),x=c.current?c:u;(0,eo.z)(d,x);let y=f.threadsData?.totalCommentsCount||0,b=f.annotationsData?.totalCount||0,{isActionBarFocused:C,handleActionBarBlur:j,handleActionBarFocusCapture:v,handleActionBarKeydownCapture:N}=er({cellRef:a}),{annotations:S,isContextMenuOpen:w,openMarkerOrListDialogFromActionBar:k,startNewConversationFromActionBar:I,startNewConversationFromActionBarWithSuggestedChange:E,anyMenuOpen:D,threads:T,toggleContextMenu:R,toggleContextMenuFromActionBar:O}=ea({cellId:n,actionBarRef:g}),A=(0,o.useCallback)(e=>{p&&e.preventDefault()},[p]);return(0,i.jsx)("div",{"aria-hidden":!C,style:{...ez},className:"d-flex flex-row",children:(0,i.jsxs)(ed.Z,{onBlur:j,onClick:A,onFocusCapture:v,onKeyDownCapture:N,children:[h&&(0,i.jsxs)(i.Fragment,{children:[y+b>0&&(0,i.jsx)(m.r,{ref:c,"aria-expanded":D,"aria-haspopup":"true","aria-label":"View conversations",size:"small",sx:{pt:0,pb:0,px:1,height:eK},onClick:e=>{(1===T.length||1===S.length)&&e.preventDefault(),k()},children:(0,i.jsx)(ex,{})}),r&&(0,i.jsx)(i.Fragment,{children:l?(0,i.jsx)(m.r,{"aria-label":"Start conversation (comment in progress)",size:"small",sx:{pt:0,pb:0,px:1,width:eq,height:eK},onClick:I,children:(0,i.jsx)(eG,{authorAvatarUrl:e,authorLogin:t})}):(0,i.jsx)(ec.h,{"aria-label":"Start conversation",ref:u,icon:V.PlusIcon,size:"small",sx:{width:eq,height:eK,color:"fg.muted"},onClick:I})})]}),(0,i.jsx)(ec.h,{ref:g,"aria-haspopup":"true","aria-label":"More actions",icon:V.TriangleDownIcon,size:"small",sx:{width:eK,height:eK,color:"fg.muted"},onClick:O}),(0,i.jsx)(eu.P,{anchorRef:g,open:w,onOpenChange:R,children:(0,i.jsx)(eu.P.Overlay,{width:"medium",children:(0,i.jsx)(em.S,{children:(0,i.jsx)(eO,{shouldShowCopilot:s,showStartConversation:r,handleViewMarkersSelection:k,startConversationCurrentLine:I,startConversationWithSuggestedChange:E})})})})]})})});function eQ(e){let{rowId:t}=L();if(t)return(0,c.nb)(t,e)}function eX(e,t){let{selectedDiffRowRange:n}=(0,d.h)();return(0,o.useMemo)(()=>{let i="Add a comment to",a=!!n&&n.startLineNumber!==n.endLineNumber;if(n&&a){let e={left:"L",right:"R"},t=e[n.startOrientation],a=e[n.endOrientation];i+=n.startLineNumber!==n.endLineNumber?` lines ${t}${n.startLineNumber} to ${a}${n.endLineNumber}`:` line ${t}${n.startLineNumber}`}else{let n=t&&!(0,c.FY)(e)?"L":"R";i+=` line ${n}${e.blobLineNumber}`}return i},[e,t,n])}eW.displayName="ActionBar";let eJ=(0,o.forwardRef)(function({children:e,ContextMenu:t,className:n,columnIndex:a,handleDiffCellClick:r,handleDiffSideCellSelectionBlocking:l,lineAnchor:s,commentDialogOpen:u,startConversation:m,...h},f){let{diffLine:p,isRowSelected:g,isLeftSide:x,isSplit:y}=L(),b=(0,o.useRef)(null);(0,o.useImperativeHandle)(f,()=>b.current,[]);let[C,j]=(0,o.useState)(!1),{clearSelectedDiffRowRange:v,selectedDiffRowRange:N}=(0,d.h)(),{fileAnchor:S,filePath:w}=L(),{expandStartOfHunk:k,expandEndOfHunk:I,expandEndOfPreviousHunk:E}=el(),{getUnifiedDiffLineCode:D,getSplitDiffSingleLineCode:T,getSplitDiffMultiLineCode:R}=function(e){let{selectedDiffRowRange:t,selectedDiffLines:n,getDiffLinesByDiffAnchor:i}=(0,d.h)();return{getUnifiedDiffLineCode:()=>{let n=i(e);if(!n||!t)return"";let{startOrientation:a,endOrientation:r,startLineNumber:l,endLineNumber:s}=t,o=0,d=0;return n.length>1&&(o=n.findIndex(e=>"left"===a?e.left===l:e.right===l),d=n.findIndex(e=>"left"===r?e.left===s:e.right===s)),(0,c.aS)(n.slice(o,d+1))},getSplitDiffSingleLineCode:(t,n)=>{if(!t||!n)return"";let a=i(e)?.find(e=>"left"===t?e.left===n:e.right===n);return a?(0,c.aS)([a]):""},getSplitDiffMultiLineCode:e=>void 0===e?"":"left"===e?(0,c.aS)(n.leftLines):(0,c.aS)(n.rightLines)}}(S),O=(0,o.useRef)(null),A=(0,H.U)(e=>{if(!e.target)return;let t=e.target;!C||O.current?.contains(t)||b.current?.contains(t)||2!==e.button?b.current?.contains(t)&&e.target.closest("button")?.contains(t)&&j(!1):j(!1)});(0,o.useEffect)(()=>{C?document.addEventListener("mousedown",A):document.removeEventListener("mousedown",A)},[A,C]),(0,o.useEffect)(()=>()=>document.removeEventListener("mousedown",A),[]);let F=()=>!!document.getElementById("conversation-dialog"),_=()=>!(u||C||F())&&(!g&&N&&v(),j(!0),!0),M=(0,o.useCallback)(e=>{e.shiftKey&&e.preventDefault(),l?.(e)},[l]);return(0,i.jsxs)(Z.FU,{as:"td",commands:{"github:open-context-menu":_,"pull-requests-diff-view:copy-code":()=>{let e=window.getSelection();if(e&&""!==e.toString()){document.execCommand("copy");return}if(y){void 0===N||N?.startOrientation===N?.endOrientation&&N?.startLineNumber===N?.endLineNumber?(0,B.z)(T(x?"left":"right",x?p?.left:p?.right)):(0,B.z)(R(x?"left":"right"));return}(0,B.z)(D())},"pull-requests-diff-view:expand-all-hunks":()=>{let e=document.querySelector(`.js-expand-all-difflines-button[data-file-path="${w}"]`);e?.dispatchEvent(new MouseEvent("click",{bubbles:!0,cancelable:!0}))},"pull-requests-diff-view:expand-hunk-up":k,"pull-requests-diff-view:expand-hunk-down":()=>{if(p?.type==="HUNK"){E();return}I()},"pull-requests-diff-view:copy-anchor-link":()=>{let e=(0,c.K8)({line:p,range:N,fileAnchor:S});e&&(0,B.z)(e)},"pull-requests-diff-view:start-conversation-current":m},ref:b,"data-grid-cell-id":eQ(a),"data-line-anchor":s,"data-selected":g,role:"gridcell",style:{userSelect:"none",position:"relative"},tabIndex:-1,valign:"top",className:n?`focusable-grid-cell ${n} ${a<3?"left-side":""}`:"focusable-grid-cell",onBlur:e=>e.target.ariaSelected="false",onClick:r,onContextMenu:e=>{_()&&e.preventDefault()},onFocus:e=>e.target.ariaSelected="true",onMouseDown:M,...h,children:[e,t&&C&&(0,i.jsx)(eu.P,{anchorRef:b,open:!0,onOpenChange:j,children:(0,i.jsx)(eu.P.Overlay,{width:e?"medium":"small",children:(0,i.jsx)(em.S,{children:t})})})]})});function eY(){return(0,i.jsx)("div",{className:"hunk-kebab-icon pr-2 pb-1",children:(0,i.jsx)(V.KebabHorizontalIcon,{})})}function e0({columnIndex:e,lineAnchor:t,handleDiffCellClick:n,handleDiffSideCellSelectionBlocking:a,filePath:l,tabSize:s,diffLineSummary:m,shouldShowCopilot:h}){let{diffLine:f,fileAnchor:p,isLeftSide:g}=L(),{getTextIndent:x,getPaddingLeft:y}=(0,o.useMemo)(()=>(0,r.pE)(f.text,s),[f,s]),[b,C]=(0,c.Tb)(f.html,f.type),j=C&&["+","-"].includes(C),{isActionBarVisible:v}=ee(),{selectedDiffRowRange:N,selectedDiffLines:S}=(0,d.h)(),{commentBatchPending:w,commentingEnabled:k,commentingImplementation:I,markerNavigationImplementation:E,repositoryId:D,subjectId:T,subject:R,viewerData:O}=K(),{hasPersistedComment:A}=(0,$.uN)({diffSide:g?"LEFT":"RIGHT",filePath:l,line:f.blobLineNumber,subjectId:T,fileLevelComment:!1}),F=(0,o.useMemo)(()=>{var e;return e=O.viewerCanComment,k&&e&&(0,c.$D)(f,S)},[k,O,f,S]),_=(0,o.useRef)(null),M=(0,o.useRef)(null),P=(0,c.uJ)({shouldAlignRight:A||!F}),B=!!f.threadsData?.threads?.length||!!f.annotationsData?.annotations?.length,Z=(0,c.FE)({hasThreads:B}),H=eX(f,!!g),V=eQ(e),{handleCellBlur:G,handleCellFocus:z,handleCellMouseEnter:q,handleCellMouseLeave:W}=er({cellRef:M}),{annotations:Q,isNewConversationDialogOpen:X,shouldStartNewConversationWithSuggestedChange:J,startNewConversation:Y,startNewConversationWithSuggestedChange:et,openMarkerOrListDialog:en,selectAnnotation:ei,selectThread:el,isMarkerListDialogOpen:eo,closeNewConversationDialog:ed,closeMarkerListDialog:ec,closeConversationDetailsDialog:eu,returnFocusRef:em,optimizedSelectedAnnotationId:eh,optimizedSelectedThreadId:ef,threadConnectionId:ep,threads:eg}=ea({cellId:V,actionBarRef:_});(0,o.useEffect)(()=>{if(!E)return;let{activeGlobalMarkerID:e,onActivateGlobalMarkerNavigation:t}=E;if(e){let n=eg.map(e=>e.id),i=Q.map(e=>e.id);n.includes(e)?(el(e,{skipLineSelection:!0}),t()):i.includes(e)&&(ei(e,{skipLineSelection:!0}),t())}},[el,eg,E,Q,ei]);let ey=(0,es.C)(I?.suggestedChangesEnabled,f,J),eb=(0,o.useRef)(!0),{ghostUser:eC}=K();return(0,i.jsxs)(eJ,{ref:M,columnIndex:e,commentDialogOpen:X,handleDiffCellClick:n,handleDiffSideCellSelectionBlocking:a,lineAnchor:t,startConversation:Y,ContextMenu:(0,i.jsx)(eO,{shouldShowCopilot:h,showStartConversation:F,handleViewMarkersSelection:en,startConversationCurrentLine:Y,startConversationWithSuggestedChange:et}),className:(0,u.W)(`diff-text-cell ${g?"left-side-diff-cell":"right-side-diff-cell"}`,{"border-right":g&&"HUNK"!==f.type}),style:{backgroundColor:e4(f.type,!1),paddingRight:Z},onBlur:G,onFocus:z,onMouseEnter:q,onMouseLeave:W,children:[(0,i.jsxs)("code",{className:(0,u.W)("diff-text syntax-highlighted-line",{addition:"ADDITION"===f.type,deletion:"DELETION"===f.type}),children:[j&&(0,i.jsx)("span",{className:"diff-text-marker",children:C}),(0,i.jsx)(U.sF,{html:b,className:(0,u.W)("diff-text-inner",{"color-fg-muted":"HUNK"===f.type}),style:{paddingLeft:y(),textIndent:x()}})]}),v&&(0,i.jsx)(eW,{shouldShowCopilot:h,authorAvatarUrl:O.avatarUrl,authorLogin:O.login,ref:_,cellId:V,cellRef:M,hasDraftComment:A,showStartConversation:F}),I&&E&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)($.sR,{annotations:Q,batchPending:w,batchingEnabled:I.batchingEnabled,commentingImplementation:{...I,deleteComment:({onCompleted:e,...t})=>{I&&f&&I.deleteComment({...t,onCompleted:()=>{e?.(),eg.length<=1&&(eu(),setTimeout(()=>M.current?.focus()))},filePath:l})}},conversationAnchorRef:M,conversationListAnchorRef:em,conversationListThreads:eg,fileAnchor:p,filePath:l,isMarkerListOpen:eo,repositoryId:D,returnFocusRef:em,selectedAnnotationId:eh,selectedThreadId:ef,subjectId:T,subject:R,suggestedChangesConfig:ey,threadsConnectionId:ep,onCloseConversationDialog:eu,onCloseConversationList:ec,onAnnotationSelected:ei,onThreadSelected:el,markerNavigationImplementation:E,viewerData:O,ghostUser:eC}),(0,i.jsx)($.VM,{addCommentDialogTitle:H,anchorRef:M,batchPending:w,batchingEnabled:I.batchingEnabled,commentBoxConfig:I.commentBoxConfig,filePath:l,isLeftSide:!!g,isOpen:X,lineNumber:f.blobLineNumber,repositoryId:D,returnFocusRef:em,subjectId:T,suggestedChangesConfig:ey,threadsConnectionId:ep,viewerData:O,onAddComment:({onCompleted:e,threadsConnectionId:t,...n})=>{if(!I||!f)return;let{leftLines:i,rightLines:a}=S;if(N){let e="left"===N.endOrientation?i:a,n=e[e.length-1];n&&(0,c.R8)(n)&&n.threadsData?.__id&&(t=n.threadsData?.__id)}I.addThread({...n,diffLine:f,isLeftSide:g,selectedDiffRowRange:N,threadsConnectionId:t,onCompleted:(t,n)=>{e?.(t,n),el(t)}})},onCloseCommentDialog:ed})]}),!v&&(0,i.jsxs)("div",{"aria-hidden":"true",style:{right:P},className:"position-absolute top-0 d-flex user-select-none",children:[(0,i.jsx)(ex,{shouldAnimateRef:eb}),A&&(0,i.jsx)(eG,{authorAvatarUrl:O.avatarUrl,authorLogin:O.login,sx:{ml:"9px",mt:"2px",height:"20px"}})]}),m]})}function e1({children:e,columnIndex:t,handleDiffCellClick:n,handleDiffSideCellSelectionBlocking:a,filePath:r,shouldShowCopilot:l,...s}){let u=(0,o.useRef)(null),m=eQ(t),{commentBatchPending:h,commentingEnabled:f,commentingImplementation:p,repositoryId:g,subject:x,subjectId:y,markerNavigationImplementation:b,viewerData:C}=K(),{diffLine:j,fileAnchor:v,isLeftSide:N}=L(),{selectedDiffRowRange:S,selectedDiffLines:w}=(0,d.h)(),k=eX(j,!!N),I=(0,o.useMemo)(()=>{var e;return e=C.viewerCanComment,f&&e&&(0,c.$D)(j,w)},[f,C,j,w]),{handleCellBlur:E,handleCellFocus:D,handleCellMouseEnter:T,handleCellMouseLeave:R}=er({cellRef:u}),{ghostUser:O}=K(),{annotations:A,isNewConversationDialogOpen:F,shouldStartNewConversationWithSuggestedChange:_,startNewConversation:M,startNewConversationWithSuggestedChange:P,openMarkerOrListDialog:B,isMarkerListDialogOpen:U,closeConversationDetailsDialog:Z,closeMarkerListDialog:H,selectAnnotation:V,selectThread:G,closeNewConversationDialog:z,returnFocusRef:q,optimizedSelectedThreadId:W,optimizedSelectedAnnotationId:Q,threadConnectionId:X,threads:J}=ea({cellId:m,actionBarRef:u}),Y=(0,es.C)(p?.suggestedChangesEnabled,j,_);return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(eJ,{ref:u,className:"diff-line-number",columnIndex:t,commentDialogOpen:F,handleDiffCellClick:n,handleDiffSideCellSelectionBlocking:a,startConversation:M,style:{backgroundColor:e4(j.type,!0),textAlign:"center"},ContextMenu:(0,i.jsx)(eO,{shouldShowCopilot:l,showStartConversation:I,handleViewMarkersSelection:B,startConversationCurrentLine:M,startConversationWithSuggestedChange:P}),onBlur:E,onFocus:D,onMouseEnter:T,onMouseLeave:R,...s,children:(0,i.jsx)("code",{children:e})}),p&&b&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)($.sR,{annotations:A,batchPending:h,batchingEnabled:p.batchingEnabled,commentingImplementation:{...p,deleteComment:({onCompleted:e,...t})=>{p&&j&&p.deleteComment({...t,onCompleted:()=>{e?.(),J.length<=1&&(Z(),setTimeout(()=>u.current?.focus()))},filePath:r})}},conversationAnchorRef:u,conversationListAnchorRef:q,conversationListThreads:J,fileAnchor:v,filePath:r,isMarkerListOpen:U,repositoryId:g,returnFocusRef:q,selectedAnnotationId:Q,selectedThreadId:W,subjectId:y,subject:x,suggestedChangesConfig:Y,threadsConnectionId:X,markerNavigationImplementation:b,onCloseConversationDialog:Z,onCloseConversationList:H,onThreadSelected:G,onAnnotationSelected:V,viewerData:C,ghostUser:O}),(0,i.jsx)($.VM,{addCommentDialogTitle:k,align:"start",anchorRef:u,batchPending:h,batchingEnabled:p.batchingEnabled,commentBoxConfig:p.commentBoxConfig,filePath:r,isLeftSide:!!N,isOpen:F,lineNumber:j.blobLineNumber,repositoryId:g,returnFocusRef:q,subjectId:y,suggestedChangesConfig:Y,threadsConnectionId:X,viewerData:C,onAddComment:({onCompleted:e,threadsConnectionId:t,...n})=>{if(!p||!j)return;let{leftLines:i,rightLines:a}=w;if(S){let e="left"===S.endOrientation?i:a,n=e[e.length-1];n&&(0,c.R8)(n)&&n.threadsData?.__id&&(t=n.threadsData?.__id)}p.addThread({...n,diffLine:j,selectedDiffRowRange:S,threadsConnectionId:t,onCompleted:(t,n)=>{e?.(t,n),G(t)}})},onCloseCommentDialog:z})]})]})}function e2({ContextMenu:e,renderHunkButton:t}){let n=(0,o.useRef)(null),[a,r]=function(e){let[t,n]=(0,o.useState)(!1),[i,a]=(0,o.useState)(!1),r=(0,o.useCallback)(t=>{e.current&&e.current.contains(t.relatedTarget)||n(!1)},[e]),l=(0,o.useCallback)(()=>{e.current===document.activeElement&&n(!0)},[e]),s=(0,o.useCallback)(t=>{e.current&&!e.current.contains(t.relatedTarget)&&n(!1),a(!1)},[e]);return[{onFocus:l,onBlur:r},{"aria-hidden":!i,tabIndex:t?0:-1,onBlur:s,onFocusCapture:(0,o.useCallback)(e=>{e.stopPropagation(),a(!0)},[]),onKeyDownCapture:(0,o.useCallback)(e=>{F(e.key)&&e.stopPropagation()},[])}]}(n),{diffLine:l}=L();return(0,i.jsx)(eJ,{ref:n,ContextMenu:e,colSpan:4,columnIndex:0,style:{backgroundColor:"var(--bgColor-accent-muted, var(--color-accent-subtle))",flexGrow:1},...a,children:(0,i.jsxs)("div",{className:"d-flex flex-row",children:[t?.(r)??(0,i.jsx)(eY,{}),(0,i.jsx)("code",{className:"diff-text-cell hunk",children:(0,i.jsx)(U.sF,{className:"diff-text-inner color-fg-muted",html:l.html})})]})})}function e8({columnIndex:e,showRightBorder:t}){return(0,i.jsx)(eJ,{ContextMenu:(0,i.jsx)(eA,{}),className:(0,u.W)("empty-diff-line",{"border-right":t}),columnIndex:e})}function e4(e,t=!1){switch(e){case"ADDITION":return t?"var(--diffBlob-addition-bgColor-num, var(--color-diff-blob-addition-num-bg))":"var(--diffBlob-addition-bgColor-line, var(--color-diff-blob-addition-line-bg))";case"DELETION":return t?"var(--diffBlob-deletion-bgColor-num, var(--color-diff-blob-deletion-num-bg))":"var(--diffBlob-deletion-bgColor-line, var(--color-diff-blob-deletion-line-bg))";case"HUNK":case"EMPTY":return t?"var(--diffBlob-hunk-bgColor-num, var(--color-diff-blob-hunk-num-bg))":"var(--bgColor-accent-muted, var(--color-accent-subtle))";default:return}}try{eJ.displayName||(eJ.displayName="Cell")}catch{}try{eY.displayName||(eY.displayName="HunkKebabIcon")}catch{}try{e0.displayName||(e0.displayName="ContentCell")}catch{}try{e1.displayName||(e1.displayName="LineNumberCell")}catch{}try{e2.displayName||(e2.displayName="HunkCell")}catch{}try{e8.displayName||(e8.displayName="EmptyCell")}catch{}let e5=({handleDiffSideCellSelectionBlocking:e,handleDiffRowClick:t,lineAnchor:n,diffLineSummary:a,filePath:r,shouldShowCopilot:l})=>{let{diffLine:s,isLeftSide:d,isSplit:c}=L(),{viewerData:u}=K(),{tabSizePreference:m}=u,h="ADDITION"!==s.type,f=!c||d,p=f&&!h,g="DELETION"!==s.type,x=!c||!d,y=x&&!g,b=(0,o.useCallback)(e=>{s.left&&t(e,s.left,"left",e.shiftKey)},[t,s.left]),C=(0,o.useCallback)(e=>{s.right&&t(e,s.right,"right",e.shiftKey)},[t,s.right]),j=(0,o.useCallback)(()=>{e&&e("left")},[e]),v=(0,o.useCallback)(()=>{e&&e("right")},[e]);return(0,i.jsxs)(Y,{line:s,children:[f&&(0,i.jsx)(e1,{shouldShowCopilot:l,columnIndex:0,filePath:r,handleDiffCellClick:p?C:b,handleDiffSideCellSelectionBlocking:v,children:h&&s.left}),x&&(0,i.jsx)(e1,{shouldShowCopilot:l,columnIndex:c?2:1,filePath:r,handleDiffCellClick:y?b:C,handleDiffSideCellSelectionBlocking:j,children:g&&s.right}),(0,i.jsx)(e0,{shouldShowCopilot:l,columnIndex:c?d?1:3:2,diffLineSummary:a,filePath:r,handleDiffCellClick:d?b:C,lineAnchor:n,tabSize:m,handleDiffSideCellSelectionBlocking:d?v:j})]})},e9=({fileAnchor:e,filePath:t,handleDiffRowClick:n,handleDiffSideCellSelectionBlocking:a,diffLineSummary:r,shouldShowCopilot:s})=>{let{diffLine:o,isLeftSide:d}=L();if((0,c.Ok)(o))return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(e8,{columnIndex:d?0:2}),(0,i.jsx)(e8,{columnIndex:d?1:3,showRightBorder:d})]});let u=d?"left":(0,l.Jn)(o.type),m="left"===u?o.left:o.right,h=(0,l._N)(e,u,m??0);switch(o.type){case"HUNK":return null;case"ADDITION":case"DELETION":case"CONTEXT":case"INJECTED_CONTEXT":return(0,i.jsx)(e5,{shouldShowCopilot:s,diffLineSummary:r,filePath:t,handleDiffRowClick:n,handleDiffSideCellSelectionBlocking:a,lineAnchor:h});default:throw Error(`cannot handle type ${o.type}`)}};try{e5.displayName||(e5.displayName="CodeDiffLine")}catch{}try{e9.displayName||(e9.displayName="DiffLineSide")}catch{}let e3={height:"20px",py:1};function e6({direction:e,icon:t,label:n,onClick:a,sx:r,...l}){let{sendAnalyticsEvent:s}=(0,ei.z)();return(0,i.jsx)(ec.h,{...l,"aria-label":l["aria-label"]??n,"data-direction":e,icon:t,sx:{bg:"var(--diffBlob-hunk-bgColor-num, var(--color-diff-blob-hunk-num-bg))",color:"fg.default",border:"none",borderRadius:0,boxShadow:"none",lineHeight:"30px",width:"var(--line-number-cell-width)",outline:"none",py:0,":hover:not([disabled])":{bg:"accent.emphasis",color:"fg.onEmphasis"},...r},onClick:()=>{a(),s("file_entry.expand_hunk","FILE_EXPANDER_BUTTON")}})}function e7({nextLine:e,prevLine:t}){let{fileLineCount:n,diffLine:a}=L(),{expandStartOfHunk:r,expandEndOfPreviousHunk:l}=el(),s=!t,d=!e,u=0===a.blobLineNumber,m=s||d,h=d&&a.blobLineNumber===n,f=(0,o.useMemo)(()=>!m&&!(a.blobLineNumber<=0)&&(a.blobLineNumber-t.blobLineNumber<=20||e.blobLineNumber-a.blobLineNumber>=20),[m,a,e,t]),p=(0,o.useMemo)(()=>!m&&!h&&a.blobLineNumber-t.blobLineNumber>20,[m,h,a,t]),g=(0,o.useMemo)(()=>!(a.blobLineNumber<=0)&&!u&&!!s,[s,u,a]),x=(0,o.useMemo)(()=>!s&&!h&&!!d,[s,d,h]),y=(0,o.useMemo)(()=>{switch(!0){case f:return"expand-all";case p:return"expand-up-and-down";case g:return"expand-up";case x:return"expand-down"}},[f,p,g,x]),b=()=>r(),C=()=>l(),j=()=>r();return(0,i.jsx)(e2,{renderHunkButton:n=>{switch(y){case"expand-all":return(0,i.jsx)(e6,{...n,direction:"all",icon:V.UnfoldIcon,label:`Expand file from line ${t?.blobLineNumber||""} to line ${e?.blobLineNumber||""}`,onClick:j});case"expand-up-and-down":return(0,i.jsxs)("div",{className:"d-flex flex-column",children:[(0,i.jsx)(e6,{...n,direction:"down",icon:V.FoldDownIcon,label:`Expand file down from line ${t?.blobLineNumber||""}`,sx:e3,onClick:C}),(0,i.jsx)(e6,{...n,direction:"up",icon:V.FoldUpIcon,label:`Expand file up from line ${e?.blobLineNumber||""}`,sx:e3,onClick:b})]});case"expand-up":return(0,i.jsx)(e6,{...n,direction:"up",icon:V.FoldUpIcon,label:`Expand file up from line ${e?.blobLineNumber||""}`,onClick:b});case"expand-down":return(0,i.jsx)(e6,{...n,direction:"down",icon:V.FoldDownIcon,label:`Expand file down from line ${t?.blobLineNumber||""}`,onClick:C});default:return null}},ContextMenu:(0,i.jsx)(te,{handleCopyContent:()=>{let[e]=(0,c.Tb)((0,c.dW)(a.html),a.type);(0,B.z)(e)},handleExpandAbove:b,handleExpandAll:j,handleExpandBelow:C,shouldCopyContent:!!a.html,shouldExpandAbove:p||g,shouldExpandBelow:p||x})})}function te({shouldExpandBelow:e,shouldExpandAbove:t,shouldCopyContent:n,handleExpandAll:a,handleExpandBelow:r,handleExpandAbove:l,handleCopyContent:s}){let o={includeShiftKey:!0,key:"["},d={key:"]"},u={key:"["},m={key:"C"};return(0,i.jsx)(eu.P.Overlay,{width:"medium",children:(0,i.jsxs)(em.S,{children:[(0,i.jsxs)(em.S.Item,{"aria-keyshortcuts":(0,c.EH)(o),onSelect:a,children:[(0,i.jsx)(em.S.LeadingVisual,{children:(0,i.jsx)(V.UnfoldIcon,{})}),"Expand all",(0,i.jsx)(em.S.TrailingVisual,{children:(0,i.jsx)("span",{children:`${(0,c._k)(o)}`})})]}),t?(0,i.jsxs)(em.S.Item,{"aria-keyshortcuts":(0,c.EH)(d),onSelect:l,children:[(0,i.jsx)(em.S.LeadingVisual,{children:(0,i.jsx)(V.FoldUpIcon,{})}),"Expand above",(0,i.jsx)(em.S.TrailingVisual,{children:(0,i.jsx)("span",{children:`${(0,c._k)(d)}`})})]}):null,e?(0,i.jsxs)(em.S.Item,{"aria-keyshortcuts":(0,c.EH)(u),onSelect:r,children:[(0,i.jsx)(em.S.LeadingVisual,{children:(0,i.jsx)(V.FoldDownIcon,{})}),"Expand below",(0,i.jsx)(em.S.TrailingVisual,{children:(0,i.jsx)("span",{children:`${(0,c._k)(u)}`})})]}):null,(0,i.jsx)(eH,{}),n?(0,i.jsxs)(em.S.Item,{"aria-keyshortcuts":(0,c.EH)(m),onSelect:s,children:[(0,i.jsx)(em.S.LeadingVisual,{children:(0,i.jsx)(V.CopyIcon,{})}),"Copy",(0,i.jsx)(em.S.TrailingVisual,{children:(0,i.jsx)("span",{children:`${(0,c._k)(m)}`})})]}):null]})})}try{e6.displayName||(e6.displayName="ExpandButtonLine")}catch{}try{e7.displayName||(e7.displayName="ExpandableHunkHeaderDiffLine")}catch{}try{te.displayName||(te.displayName="HunkContextMenu")}catch{}let tt=(0,o.memo)(function({clearSelectedDiffRowRange:e,diffEntryId:t,diffLines:n,fileAnchor:a,fileLineCount:r,filePath:l,handleDiffRowClick:s,handleDiffSideCellSelectionBlocking:d,replaceSelectedDiffRowRangeFromGridCells:u,selectedDiffRowRange:m,tableRef:h,updateDiffLines:f,updateSelectedDiffRowRange:p,shouldShowCopilot:g}){let{leftLines:x,rightLines:C}=(0,o.useMemo)(()=>(function(e){let t=[],n=[],i=()=>{for(;t.length<n.length;)t.push(M.s);for(;n.length<t.length;)n.push(M.s)};for(let a of e)switch(a.type){case"ADDITION":n.push(a);break;case"DELETION":t.push(a);break;case"CONTEXT":case"INJECTED_CONTEXT":i();let[e,r]=function(e){let t=e.threadsData?.threads?.filter(e=>e?.diffSide==="LEFT")??null,n={...e,threadsData:{...e.threadsData,threads:t,totalCommentsCount:t?.reduce((e,t)=>e+(t?.commentsData?.totalCount??0),0)??0,totalCount:t?.length??0},annotationsData:{totalCount:0,annotations:[]}},i=e.threadsData?.threads?.filter(e=>e?.diffSide==="RIGHT")??null;return[n,{...e,threadsData:{...e.threadsData,threads:i,totalCommentsCount:i?.reduce((e,t)=>e+(t?.commentsData?.totalCount??0),0)??0,totalCount:i?.length??0}}]}(a);t.push(e),n.push(r);break;case"HUNK":i(),t.push(a),n.push(a)}return i(),{leftLines:t,rightLines:n}})(n),[n]),{ghostUser:j}=K();_({clearSelectedDiffRowRange:e,containerRef:h,fileAnchor:a,isSplitDiff:!0,leftLines:x,replaceSelectedDiffRowRangeFromGridCells:u,rightLines:C,selectedDiffRowRange:m,updateSelectedDiffRowRange:p});let v=(0,o.useMemo)(()=>{if(m)return(0,I.Z)({selectedDiffRowRange:m,leftLines:x,rightLines:C})},[m,x,C]);(0,o.useEffect)(()=>{f(a,n)},[n,a,f]);let N=(0,o.useMemo)(()=>b(x),[x]),S=[];for(let e=0;e<x.length;e++){let n=x[e],u=C[e],m=x[e-1],h=(0,c.Ok)(x[e+1])?C[e+1]:x[e+1],f=(0,c.R8)(n)&&"HUNK"===n.type,p=(0,c.Re)(a,n,u),b=(0,c.Ok)(n)?(0,c.Ok)(u)?void 0:u:n;if(!b)continue;let L=(0,c.Ok)(n)?void 0:n.threadsData,I=(0,c.Ok)(u)?void 0:u.threadsData,{currentHunk:E,nextHunk:D,previousHunk:T}=y(b,N),R={currentHunk:E,diffEntryId:t,fileAnchor:a,fileLineCount:r,filePath:l,isRowSelected:v?.isRowSelected(n)||v?.isRowSelected(u),modifiedLineThreads:k(I,j),modifiedLineThreadsConnectionId:I?.__id,nextHunk:D,originalLineThreads:k(L,j),originalLineThreadsConnectionId:L?.__id,previousHunk:T,rowId:p,isSplit:!0};S.push((0,i.jsx)(o.Fragment,{children:(0,i.jsx)("tr",{className:"diff-line-row",children:f?(0,i.jsx)(w,{...R,diffLine:b,children:(0,i.jsx)(e7,{nextLine:h,prevLine:m})}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(w,{...R,diffLine:n,isLeftSide:!0,children:(0,i.jsx)(e9,{shouldShowCopilot:g,fileAnchor:a,filePath:l,handleDiffRowClick:s,handleDiffSideCellSelectionBlocking:d,diffLineSummary:(0,i.jsx)(P,{currentSide:"LEFT",leftLine:n,rightLine:u})})}),(0,i.jsx)(w,{...R,diffLine:u,children:(0,i.jsx)(e9,{shouldShowCopilot:g,fileAnchor:a,filePath:l,handleDiffRowClick:s,handleDiffSideCellSelectionBlocking:d,diffLineSummary:(0,i.jsx)(P,{currentSide:"RIGHT",leftLine:n,rightLine:u})})})]})})},p))}return(0,i.jsx)(i.Fragment,{children:S})});try{tt.displayName||(tt.displayName="SplitDiffLines")}catch{}let tn=(0,o.memo)(function({clearSelectedDiffRowRange:e,diffEntryId:t,diffLines:n,fileLineCount:a,fileAnchor:r,filePath:s,tableRef:d,selectedDiffRowRange:u,handleDiffRowClick:m,updateDiffLines:h,updateSelectedDiffRowRange:f,replaceSelectedDiffRowRangeFromGridCells:p,shouldShowCopilot:g}){_({clearSelectedDiffRowRange:e,containerRef:d,fileAnchor:r,isSplitDiff:!1,leftLines:n,replaceSelectedDiffRowRangeFromGridCells:p,selectedDiffRowRange:u,updateSelectedDiffRowRange:f});let x=(0,o.useMemo)(()=>{if(u)return(0,I.Z)({selectedDiffRowRange:u,leftLines:n})},[u,n]),C=(0,o.useMemo)(()=>b(n.map(e=>e)),[n]);(0,o.useEffect)(()=>{h(r,n)},[n,r,h]);let j=n.map((e,d)=>{let u=n[d+1],h=n[d-1],f="HUNK"===e.type,p=(0,l._N)(r,(0,l.Jn)(e.type),e.blobLineNumber),{currentHunk:b,nextHunk:j,previousHunk:v}=y(e,C),N={diffEntryId:t,diffLine:e,currentHunk:b,fileAnchor:r,fileLineCount:a,filePath:s,isLeftSide:"DELETION"===e.type,isRowSelected:x?.isRowSelected(e),isSplit:!1,nextHunk:j,previousHunk:v,rowId:(0,c.Re)(r,e,e)};return(0,i.jsx)(o.Fragment,{children:(0,i.jsx)("tr",{className:"diff-line-row",children:(0,i.jsx)(w,{...N,children:f?(0,i.jsx)(e7,{nextLine:u,prevLine:h},d):(0,i.jsx)(e5,{shouldShowCopilot:g,diffLineSummary:(0,i.jsx)("div",{}),filePath:s,handleDiffRowClick:m,lineAnchor:p},d)})})},d)});return(0,i.jsx)(i.Fragment,{children:j})});try{tn.displayName||(tn.displayName="UnifiedDiffLines")}catch{}let ti={tableLayoutFixed:"DiffLines-module__tableLayoutFixed--YZcIJ"};var ta=n(71207);function tr({diffAnchor:e,children:t}){return(0,i.jsx)("div",{className:"fgColor-muted p-2","data-diff-anchor":e,children:t})}let tl=(0,o.memo)(function({diffEntryData:e,diffLinesManuallyUnhidden:t,baseHelpUrl:n,onHandleLoadDiff:m,shouldShowCopilot:h=!0,...f}){let x=(0,o.useRef)(null),[y,b]=(0,o.useState)(null),C=e.newTreeEntry?.lineCount??e.oldTreeEntry?.lineCount??0,j=(0,o.useMemo)(()=>{let t=e.diffLines[e.diffLines.length-1];return t?.blobLineNumber&&t.blobLineNumber<C?e.diffLines.concat({__id:g.finalLineId,blobLineNumber:t.blobLineNumber+1,left:null,right:null,type:"HUNK",html:"",text:""}):e.diffLines},[e.diffLines,C]),{diffViewPreference:v,tabSizePreference:S}=f.viewerData,{selectedDiffRowRange:w,replaceSelectedDiffRowRange:L,replaceSelectedDiffRowRangeFromGridCells:k,clearSelectedDiffRowRange:I,updateDiffLines:E,updateSelectedDiffRowRange:D}=(0,d.h)(),T=`diff-${e.pathDigest}`,R=T===w?.diffAnchor;(0,o.useEffect)(()=>{if(!R)return;let e=(0,c.VB)(w,j);e&&e!==w&&L(e)},[j,w,R,L]);let O=ta.iG?.location.search,A=(0,o.useMemo)(()=>"split"===new URLSearchParams(O).get("diff")||"split"===v,[O,v]),F=(0,l.Gi)(j),_=(0,o.useCallback)(e=>{b(e)},[b]),M=(0,o.useCallback)((e,t,n,i)=>{!function(e){let t=document.getElementById("__primerPortalRoot__");return!!t&&!!e&&t.contains(e)}(e.target)&&(e.defaultPrevented||D(T,t,n,i))},[T,D]);if(e.isBinary)return(0,i.jsx)(tr,{diffAnchor:T,children:"Binary file not shown."});if((0,a.PW)(e))return(0,i.jsx)(tr,{diffAnchor:T,children:"File renamed without changes."});if((0,a.vY)(e))return(0,i.jsx)(tr,{diffAnchor:T,children:"File copied without changes."});if((0,a.DC)(e.status,e.oldTreeEntry?.mode,e.newTreeEntry?.mode))return(0,i.jsx)(tr,{diffAnchor:T,children:"File mode changed."});if((0,a.V_)(e))return(0,i.jsx)(tr,{diffAnchor:T,children:(0,a.zR)(e.truncatedReason)});if((0,a._R)(e))return(0,i.jsx)(tr,{diffAnchor:T,children:"Whitespace-only changes."});if(!t&&(0,a.eb)(e))return(0,i.jsx)(p,{onLoadDiff:m,children:"This file was deleted."});if(!t&&(0,a.l3)(e))return(0,i.jsxs)(p,{helpText:"customizing how changed files appear on GitHub.",helpUrl:`${n}/github/administering-a-repository/customizing-how-changed-files-appear-on-github`,onLoadDiff:m,children:["Some generated files are not rendered by default. Learn more about"," "]});if(t&&e.isTooBig&&0===e.diffLines.length)return(0,i.jsxs)(tr,{diffAnchor:T,children:["Diff is too big to render. To view,"," ",(0,i.jsx)(s.Z,{inline:!0,href:`${n}/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally`,children:"check out this pull request locally."})]});if(!t&&e.isTooBig)return e.diffLines.length>0?(0,i.jsx)(p,{onLoadDiff:m,children:"Large diffs are not rendered by default."}):(0,i.jsxs)(tr,{diffAnchor:T,children:["Diff is too big to render. To view,"," ",(0,i.jsx)(s.Z,{inline:!0,href:`${n}/pull-requests/collaborating-with-pull-requests/reviewing-changes-in-pull-requests/checking-out-pull-requests-locally`,children:"check out this pull request locally."})]});let P={clearSelectedDiffRowRange:I,diffEntryId:e.objectId,diffLines:j,fileAnchor:T,fileLineCount:C,filePath:e.path,handleDiffRowClick:M,handleDiffSideCellSelectionBlocking:_,replaceSelectedDiffRowRangeFromGridCells:k,selectedDiffRowRange:R?w:null,tableRef:x,updateDiffLines:E,updateSelectedDiffRowRange:D,shouldShowCopilot:h};return e.diffLines?(0,i.jsxs)(z,{...f,children:[R&&(0,i.jsx)(N,{selectedLineRange:w,tableRef:x}),(0,i.jsx)("table",{ref:x,className:(0,u.Z)("tab-size","width-full",ti.tableLayoutFixed),"data-block-diff-cell-selection":y,"data-diff-anchor":T,"data-tab-size":S,"data-testid":"diff-content","data-paste-markdown-skip":!0,role:"grid",style:{"--line-number-cell-width":`${F}px`},children:A?(0,i.jsx)(r.iZ,{lineWidth:F,children:(0,i.jsx)(tt,{...P})}):(0,i.jsx)(r.wj,{lineWidth:F,children:(0,i.jsx)(tn,{...P})})})]}):null});try{tr.displayName||(tr.displayName="PlainTextStatus")}catch{}try{tl.displayName||(tl.displayName="DiffLines")}catch{}var ts=n(59889)},8358:(e,t,n)=>{n.d(t,{Z:()=>r});var i=n(46455),a=n(92086);function r({selectedDiffRowRange:e,leftLines:t,rightLines:n}){let r=!!n,{startOrientation:l,endOrientation:s}=e;if(e.startLineNumber===e.endLineNumber&&e.startOrientation===e.endOrientation)return{isRowSelected:()=>!1,selectedRightLines:[],selectedLeftLines:[]};let o=m(l).findIndex(t=>(0,a.nI)(t,e.startLineNumber,e.startOrientation)),d=m(s).findIndex(t=>(0,a.nI)(t,e.endLineNumber,e.endOrientation)),c=o>=0&&d>=0;function u(e){if(!c||(0,a.Ok)(e))return!1;let t=m((0,i.Jn)(e.type)).indexOf(e);return t>=o&&t<=d}function m(e){return r&&"left"!==("string"==typeof e?e:(0,i.Jn)(e.type))?n:t}let h=m("left").filter(e=>u(e)),f=m("right").filter(e=>u(e));return{isRowSelected:u,selectedRightLines:f,selectedLeftLines:h}}},59889:(e,t,n)=>{function i(e,t){return`${"left"===t?"L":"R"}${e}`}function a(e){let t=e.match(/^#?(diff-[a-f0-9]+)/);return t?.[1]}function r(e){let t=e.match(/^#?(r\d+)/),n=t?.[1];return n?parseInt(n.slice(1)):void 0}function l(e){let t=e.match(/^#annotation_(\d+)/),n=t?.[1];return n?parseInt(n):void 0}function s(e){let t=function(e){let t=e.match(/^#?(diff-[a-f0-9]+)(L|R)(\d+)(?:-(L|R)(\d+))?$/i);if(null!=t&&6===t.length)return t;let n=e.match(/^#?(discussion-diff-[0-9]+)(L|R)(\d+)(?:-(L|R)(\d+))?$/i);return null!=n&&6===n.length?n:null}(e);if(t){let e=t[1],n=t[2]?"L"===t[2]?"left":"right":void 0,i=t[3]?parseInt(t[3]):void 0;if(!e||!n||void 0===i)return;return{diffAnchor:e,startOrientation:n,startLineNumber:i,endOrientation:(t[4]?"L"===t[4]?"left":"right":void 0)??n,endLineNumber:(t[5]?parseInt(t[5]):void 0)??i,firstSelectedLineNumber:i,firstSelectedOrientation:n}}}function o(e){c(d(e))}function d(e){let t=i(e.startLineNumber,e.startOrientation),n=`${e.diffAnchor}${t}`;if(e.endLineNumber!==e.startLineNumber||e.endOrientation!==e.startOrientation){let t=i(e.endLineNumber,e.endOrientation);n+=`-${t}`}return n}function c(e){let t=`#${e}`;if(t===window.location.hash)return;let n=window.location.href;history.replaceState({...history.state},"",t),window.dispatchEvent(new HashChangeEvent("hashchange",{newURL:window.location.href,oldURL:n}))}n.d(t,{Es:()=>r,LA:()=>a,Lh:()=>d,Ze:()=>c,fI:()=>o,qV:()=>l,rn:()=>s})},92086:(e,t,n)=>{n.d(t,{$D:()=>N,EH:()=>j,Ek:()=>p,FE:()=>b,FY:()=>h,K8:()=>x,Ok:()=>u,R8:()=>m,Re:()=>d,Tb:()=>f,VB:()=>o,_k:()=>y,aS:()=>S,dW:()=>g,nI:()=>s,nb:()=>c,uJ:()=>C});var i=n(46455),a=n(51505),r=n(10764),l=n(59889);function s(e,t,n){return"left"===n?!u(e)&&e.left===t:!u(e)&&(0,i.Jn)(e.type)===n&&e.right===t}function o(e,t){if(!e)return;if(!t)return e;let n=!1,i=!1,a=!1;for(let r of t)if(r&&(i||(i=s(r,e.startLineNumber,e.startOrientation)),a||(a=s(r,e.endLineNumber,e.endOrientation)),(n=a&&!i)||i&&a))break;return n?{...e,startLineNumber:e.endLineNumber,startOrientation:e.endOrientation,endLineNumber:e.startLineNumber,endOrientation:e.startOrientation,firstSelectedLineNumber:e.endLineNumber}:e}function d(e,t,n){let i=`-${u(t)||"number"!=typeof t.left?"empty":t.left}`,a=n?`-${u(n)||"number"!=typeof n.right?"empty":n.right}`:"";return`${e}${i}${a}`}function c(e,t){return`${e}-${t}`}function u(e){return!!e&&e===r.s}function m(e){return!!e&&e!==r.s}function h(e){return"CONTEXT"===e.type}function f(e,t){let n;switch(t){case"ADDITION":n="+";break;case"DELETION":n="-";break;case"CONTEXT":case"INJECTED_CONTEXT":n=" "}if(!n||!e.startsWith(n))return[e,void 0];let i=e[0];return[e.substring(1),i]}function p(e){let t=[],n=[],i=()=>{for(;t.length<n.length;)t.push(r.s);for(;n.length<t.length;)n.push(r.s)};for(let a of e)switch(a.type){case"ADDITION":n.push(a);break;case"DELETION":t.push(a);break;case"CONTEXT":case"INJECTED_CONTEXT":case"HUNK":i(),t.push(a),n.push(a)}return i(),{leftLines:t,rightLines:n}}function g(e){return new DOMParser().parseFromString(e,"text/html").documentElement.textContent||""}function x({line:e,range:t,fileAnchor:n}){let i;let{origin:a,pathname:r}=window.location;if(t?i=(0,l.Lh)(t):e&&(i=function(e,t){let n=["HUNK","CONTEXT","INJECTED_CONTEXT","DELETION"].includes(e.type),i=n?e.left:e.right,a=n?"left":"right";if(null!==i)return(0,l.Lh)({diffAnchor:t,endLineNumber:i,endOrientation:a,startLineNumber:i,startOrientation:a,firstSelectedLineNumber:i,firstSelectedOrientation:a})}(e,n)),i)return`${a}${r}#${i}`}function y({includeControlKey:e=!0,includeShiftKey:t,includeOptionKey:n,key:i}){let r=e?`${(0,a.eE)()?"\u2318":"Ctrl + "}`:"";return n&&(r+=`${(0,a.eE)()?"\u2325":"Alt + "}`),t&&(r+=`${(0,a.eE)()?"\u21E7":"Shift + "}`),r+=i}function b({hasThreads:e}){return e?"96px":"30px"}function C({shouldAlignRight:e}){return e?"11px":"40px"}function j({includeControlKey:e=!0,includeShiftKey:t,includeOptionKey:n,key:i}){let r="";return e&&(r+=(0,a.eE)()?"Command+":"Control+"),n&&(r+=(0,a.eE)()?"Option+":"Alt+"),t&&(r+="Shift+"),r+=i}let v=["ADDITION","DELETION","CONTEXT"],N=(e,t)=>{if(!e)return!1;let n=t.leftLines.concat(t.rightLines);return n.length>0&&n.includes(e)?n.every(e=>!u(e)&&v.includes(e.type)):!u(e)&&v.includes(e.type)},S=e=>e?e.filter(e=>!u(e)).map(e=>{let[t]=f(g(e.html),e.type);return t}).join("\n"):""},28771:(e,t,n)=>{n.d(t,{R:()=>r});var i=n(63451),a=n(58081);let r=e=>{let t=(0,a.useRef)(e);return(0,i.b)(()=>(t.current=e,()=>t.current=null),[e]),(0,a.useCallback)((...e)=>t.current?.(...e),[])}},85861:(e,t,n)=>{n.d(t,{C:()=>c,w:()=>d});var i=n(58081),a=n(18655),r=n(92086),l=n(59434),s=n(28771),o=n(79295);function d(e){let t=(0,o.aF)(e),n=(e.subject?.diffLines??[]).filter(e=>t?e.left&&e.left>=t.startLineNumber&&e.left<=t.endLineNumber||e.right&&e.right>=t.startLineNumber&&e.right<=t.endLineNumber:[]),i=n.every(e=>"DELETION"!==e.type),a=n?.map(e=>r.Tb(e.text,e.type)[0]).join("\n");return{isValidSuggestionRange:n.length>0&&!!i,showSuggestChangesButton:!1,sourceContentFromDiffLines:a,onInsertSuggestedChange:()=>{},shouldInsertSuggestedChange:!1}}function c(e,t,n){let{sendAnalyticsEvent:o}=(0,l.z)(),{getDiffLinesFromLineRange:d,selectedDiffRowRange:c}=(0,a.h)(),u=(0,s.R)(function(n,i){if(!e)return;let a=function(e){if(!e)return"DELETION"!==t.type;if("right"===e.startOrientation&&"right"===e.endOrientation)return!0;if(e.startLineNumber===e.endLineNumber&&e.startOrientation===e.endOrientation)return"DELETION"!==t.type;let n=d(e)?.selectedLeftLines;return!!n?.every(e=>"empty-diff-line"!==e&&"DELETION"!==e.type)}(n);return{isValidSuggestionRange:a,showSuggestChangesButton:a,sourceContentFromDiffLines:a?function(e){let n=d(e)?.selectedRightLines;if(e&&n&&n.length>1)return(0,r.aS)(n);if(!t)return"";let[i]=(0,r.Tb)(t.text,t.type);return i}(n):void 0,onInsertSuggestedChange:()=>{o("diff.add_suggested_change","ADD_SUGGESTED_CHANGE_BUTTON")},shouldInsertSuggestedChange:i}});return(0,i.useMemo)(()=>({selectedDiffRowRange:c,configureSuggestedChangesFromLineRange:u,shouldStartNewConversationWithSuggestedChange:n}),[c,u,n])}},10764:(e,t,n)=>{n.d(t,{s:()=>i});let i="empty-diff-line"},87274:(e,t,n)=>{n.d(t,{C:()=>r,x:()=>a});var i=n(71207);let a=i.n4?.readyState==="interactive"||i.n4?.readyState==="complete"?Promise.resolve():new Promise(e=>{i.n4?.addEventListener("DOMContentLoaded",()=>{e()})}),r=i.n4?.readyState==="complete"?Promise.resolve():new Promise(e=>{i.iG?.addEventListener("load",e)})},86862:(e,t,n)=>{n.d(t,{R:()=>a});var i=n(72375);let a=({items:e,filter:t,key:n,secondaryKey:a})=>{let r=e.map(e=>[(0,i.EW)(t,n(e)),e]);return a&&(r=r.map(([e,n])=>[Math.max(e,(0,i.EW)(t,a(n))),n])),r.filter(([e])=>e>i.w6).sort(([e,t],[i,a])=>i===e?n(t).localeCompare(n(a)):i-e).map(([,e])=>e)}},72375:(e,t,n)=>{n.d(t,{EW:()=>s,VJ:()=>l,w6:()=>r});var i=n(47142);let a=1/0,r=-1/0,l=1,s=(e,t,n=l)=>{let s=e.trim().toLowerCase(),o=t.trim().toLowerCase();if(s===o)return a;if(0===o.length||0===s.length)return r;let d=(0,i.Gs)(s,o);return d===1/0&&s!==o?r:o.startsWith(s)||o.endsWith(s)?d+n:d}},40940:(e,t,n)=>{n.d(t,{I:()=>i});let i=(0,n(58081).createContext)(null)},7533:(e,t,n)=>{n.d(t,{l:()=>a});var i=n(12599);function a(e={}){let t;let n=(0,i.lX)({...e,v5Compat:!0}),a=[],r=!1;function l(e){if(a.length>0)for(let t of a)t({retry(){e()}});else e()}return n.listen(e=>{if(r){r=!1;return}if(e.action===i.aU.Pop&&a.length&&null!==e.delta&&a.length>0){let t=e.delta;for(let e of(r=!0,n.go(-1*t),a))e({retry(){n.go(t)}})}else t?.(e)}),{get action(){return n.action},get location(){return n.location},createHref:e=>n.createHref(e),createURL:e=>n.createURL(e),encodeLocation:e=>n.encodeLocation(e),push(e,t){l(()=>n.push(e,t))},replace(e,t){l(()=>n.replace(e,t))},go(e){l(()=>n.go(e))},listen(e){if(t)throw Error("A history only accepts one active listener");return t=e,()=>{t=void 0}},block:e=>(a.push(e),()=>{a=a.filter(t=>t!==e)})}}},18448:(e,t,n)=>{n.d(t,{t:()=>i});let i={"Workers not ready":"Alloy is warming its workers. This is expected during deploys and should resolve shortly."}},76888:(e,t,n)=>{let i;n.d(t,{Z:()=>s});var a=n(58081);let r=globalThis.document;function l(e){return{colorMode:function(e){switch(e){case"light":return"day";case"dark":return"night";default:return"auto"}}(e.colorMode),dayScheme:e.lightTheme,nightScheme:e.darkTheme}}let s=r?function(){let{documentElement:e}=r,[t,n]=(0,a.useState)(()=>l(e.dataset));return(0,a.useEffect)(()=>{let t=new MutationObserver(()=>n(l(e.dataset)));return t.observe(e,{attributes:!0,attributeFilter:["data-color-mode","data-light-theme","data-dark-theme"]}),()=>t.disconnect()},[e]),t}:function(){return l(i||{})}},54508:(e,t,n)=>{n.d(t,{A:()=>s,k:()=>l});var i=n(15205),a=n(71207);let r=(0,i.Z)(function(){return a.n4?.head?.querySelector('meta[name="runtime-environment"]')?.content||""}),l=(0,i.Z)(function(){return"enterprise"===r()}),s="webpack-react-next"},56363:(e,t,n)=>{n.d(t,{Z:()=>l,_:()=>s});var i=n(71207),a=n(43786);let r=class NoOpStorage{getItem(){return null}setItem(){}removeItem(){}clear(){}key(){return null}get length(){return 0}};function l(e,t={throwQuotaErrorsOnSet:!1},n=i.iG,l=e=>e,s=e=>e){let o;try{if(!n)throw Error();o=n[e]||new r}catch{o=new r}let{throwQuotaErrorsOnSet:d}=t;function c(e){t.sendCacheStats&&(0,a.b)({incrementKey:e})}function u(e){try{if(o.removeItem(e),t.ttl){let t=`${e}:expiry`;o.removeItem(t)}}catch(e){}}return{getItem:function(e,t=new Date().getTime()){try{let n=o.getItem(e);if(!n)return null;let i=`${e}:expiry`,a=Number(o.getItem(i));if(a&&t>a)return u(e),u(i),c("SAFE_STORAGE_VALUE_EXPIRED"),null;return c("SAFE_STORAGE_VALUE_WITHIN_TTL"),l(n)}catch(e){return null}},setItem:function(e,n,i=new Date().getTime()){try{if(o.setItem(e,s(n)),t.ttl){let n=`${e}:expiry`,a=i+t.ttl;o.setItem(n,a.toString())}}catch(e){if(d&&e instanceof Error&&e.message.toLowerCase().includes("quota"))throw e}},removeItem:u,clear:o.clear,key:o.key,get length(){return o.length}}}function s(e){return l(e,{throwQuotaErrorsOnSet:!1},i.iG,JSON.parse,JSON.stringify)}},43786:(e,t,n)=>{n.d(t,{B:()=>m,b:()=>o});var i=n(71207),a=n(87274),r=n(54508),l=n(18515);let s=[];function o(e,t=!1,n=.5){if(!0!==(0,l.cr)("BROWSER_STATS_DISABLED")){if(n<0||n>1)throw RangeError("Sampling probability must be between 0 and 1");void 0===e.timestamp&&(e.timestamp=new Date().getTime()),e.loggedIn=!!i.n4?.head?.querySelector('meta[name="user-login"]')?.content,e.staff=m(),e.bundler=r.A,Math.random()<n&&s.push(e),t?u():c()}}let d=null;async function c(){await a.C,null==d&&(d=window.requestIdleCallback(u))}function u(){if(d=null,!s.length)return;let e=i.n4?.head?.querySelector('meta[name="browser-stats-url"]')?.content;if(e){for(let t of function(e){let t=[],n=e.map(e=>JSON.stringify(e));for(;n.length>0;)t.push(function(e){let t=e.shift(),n=[t],i=t.length;for(;e.length>0&&i<=65536;){let t=e[0].length;if(i+t<=65536){let a=e.shift();n.push(a),i+=t}else break}return n}(n));return t}(s))!function(e,t){try{navigator.sendBeacon&&navigator.sendBeacon(e,t)}catch{}}(e,`{"stats": [${t.join(",")}] }`);s=[]}}function m(){return!!i.n4?.head?.querySelector('meta[name="user-staff"]')?.content}i.n4?.addEventListener("pagehide",u),i.n4?.addEventListener("visibilitychange",u)},63987:(e,t,n)=>{n.d(t,{L:()=>r});var i=n(48055),a=n(20756);function r({status:e,oid:t,repo:n,badgeProps:r={},descriptionString:l=""}){let[s,o]=(0,a.fQ)(t,n);return e?(0,i.jsx)(a.vC,{disablePopover:!1,size:"small",statusRollup:e,buttonSx:{height:"18px",color:"fg.muted",p:0},combinedStatus:s,descriptionText:l,onWillOpenPopup:o,...r}):null}try{r.displayName||(r.displayName="AsyncChecksStatusBadge")}catch{}},81950:(e,t,n)=>{n.d(t,{y:()=>z,W:()=>K});var i=n(48055),a=n(63143),r=n(52674),l=n(37589),s=n(71207),o=n(85529),d=n(42483),c=n(51461),u=n(88216),m=n(54901),h=n(86010),f=n(58081),p=n(22326),g=n(87623),x=n(61113);let y={"commit-discussion-comments":"Comment-module__commit-discussion-comments--WaMOe","discussion-comments-rose":"Comment-module__discussion-comments-rose--v1SXb"};var b=n(40584),C=n(46008);let j=()=>{let e=(0,f.useMemo)(()=>Math.floor(3*Math.random())+1,[]);return(0,i.jsx)(d.Z,{sx:{display:"flex",flexDirection:"row",gap:2},children:(0,i.jsx)(d.Z,{sx:{border:"1px solid",borderColor:"neutral.muted",borderRadius:6,backgroundColor:"canvas.default",boxShadow:"shadow.small",overflowX:"auto",flexGrow:1},children:(0,i.jsxs)(d.Z,{sx:{display:"flex",gap:2,m:3,flexDirection:"column"},children:[(0,i.jsxs)(d.Z,{sx:{display:"flex",gap:2,flexDirection:"row",alignItems:"center"},children:[(0,i.jsx)(C.o,{variant:"elliptical",height:"xl",width:"xl"}),(0,i.jsx)(C.o,{variant:"rounded",height:"sm",width:"150px"})]}),[...Array(e)].map((e,t)=>(0,i.jsx)(C.o,{variant:"rounded",height:"sm",width:"random"},t)),(0,i.jsx)(b.m,{})]})})})};try{j.displayName||(j.displayName="CommentLoading")}catch{}var v=n(20868),N=n(10397),S=n(28292),w=n(47121),L=n(94470),k=n(90044),I=n(51246),E=n(24167),D=n(12582),T=n(5833),R=n(29360);let O=(0,f.forwardRef)(({initialMarkdown:e,commitOid:t,onCancel:n,onSave:a,referenceId:l,buttonText:s,commentContent:o},d)=>{let[c,u]=(0,f.useState)(!1),m=(0,f.useRef)(null),h=(0,f.useRef)(void 0),p=(0,r.H)(),g=(0,f.useCallback)(()=>{},[]),{markdownBody:x,resetMarkdownBody:y,markdownValidationResult:b,handleMarkdownBodyChanged:C}=(0,R.Z)({commentBoxRef:m,markdownComposerRef:d,onChange:g,onCancel:()=>{},referenceId:l});(0,f.useEffect)(()=>{e&&!x&&C(e)},[e]),(0,f.useEffect)(()=>{o&&h.current!==o&&(C(o),h.current=o,setTimeout(()=>{m.current&&(m.current?.scrollIntoView(),m.current?.focus())},0))},[o]);let j=async()=>{u(!0),await a(x,y),u(!1)};return(0,i.jsx)(T.q,{ref:m,validationResult:b,disabled:c,onChange:e=>{C(e)},onCancel:()=>{C(e??""),n&&n()},onSave:j,saveButtonText:s,saveButtonTrailingIcon:!1,value:x,teamHovercardsEnabled:!0,fileUploadsEnabled:!0,subject:{type:"commit",id:{id:t},repository:{databaseId:p.id,nwo:p.ownerLogin,slashCommandsEnabled:!1}}})});function A({comment:e,commitOid:t,onCancel:n,onUpdate:a}){let{editComment:r}=(0,D.f)(),l=(0,f.useRef)(null),s=async t=>{let n=await r(t,e);n.updatedFields&&a({...e,...n.updatedFields})};return(0,i.jsx)(O,{commitOid:t,initialMarkdown:e.body,ref:l,onSave:s,onCancel:n,referenceId:`${t}-${e.id}`,buttonText:"Update comment"})}O.displayName="CommitCommentEditor";try{A.displayName||(A.displayName="UpdateCommitComment")}catch{}function F({comments:e,commit:t,locked:n,deleteComment:a,setComments:r,setNewCommentContent:l}){let s=t=>{r(e.map(e=>e.id===t.id?t:e))};return 0===e.length?null:(0,i.jsx)("div",{className:"d-flex flex-column gap-3",children:e.map(e=>(0,i.jsx)(_,{comment:e,commit:t,locked:n,deleteComment:a,setComment:s,setNewCommentContent:l},e.id))})}function _({comment:e,commit:t,locked:n,deleteComment:a,setComment:l,setNewCommentContent:s}){let o=(0,r.H)(),d=`/${(0,p.j9)(o.ownerLogin)}/${(0,p.j9)(o.name)}/commit_comment`,c=(0,k.F)(d,"delete"),[u,m]=(0,f.useState)(!1),[h,x]=(0,f.useState)(e.isHidden),y=(0,f.useRef)(null),C=async()=>{if(!confirm("Are you sure you want to delete this?"))return;let t=new FormData;t.append("_method","delete"),t.append("authenticity_token",c),t.append("commit_comment[id]",e.id.toString()),(await (0,g.Q)(d,{method:"POST",body:t})).ok&&a(e)},j=async t=>{let n=new FormData;n.append("_method","put"),n.append("classifier",t),(await (0,g.Q)(`/${(0,p.j9)(o.ownerLogin)}/${(0,p.j9)(o.name)}/commit_comment/${e.id}/minimize`,{method:"POST",body:n,headers:{Accept:"application/json"}})).ok&&(l({...e,isHidden:!0,minimizedReason:t}),x(!0))},v=async()=>{let t=new FormData;t.append("_method","put"),(await (0,g.Q)(`/${(0,p.j9)(o.ownerLogin)}/${(0,p.j9)(o.name)}/commit_comment/${e.id}/unminimize`,{method:"POST",body:t,headers:{Accept:"application/json"}})).ok&&(l({...e,isHidden:!1,minimizedReason:null}),x(!1))},N=t.authors.length>0?t.authors[0]?.login:"",S={...(0,I.WU)(e,t,o),referenceText:(0,E.Q)(t.oid)};return(0,i.jsxs)("div",{className:"border rounded-2",ref:y,id:e.urlFragment,children:[(0,i.jsx)(M,{comment:S,commentAuthorLogin:e.author.login,commentSubjectAuthorLogin:N,commentSubjectType:"commit",avatarUrl:e.author.avatarUrl,isMinimized:h,editComment:()=>{m(!0)},onReplySelect:s,onMinimize:x,navigate:()=>{},hideComment:j,unhideComment:v,deleteComment:C,commentRef:y,showEditHistory:e.viewerCanReadUserContentEdits&&!!e.lastUserContentEdit,commitComment:e}),h?null:u?(0,i.jsx)("div",{className:"m-2",children:(0,i.jsx)(A,{comment:e,commitOid:t.oid,onUpdate:e=>{l(e),m(!1)},onCancel:()=>m(!1)})}):(0,i.jsxs)("div",{className:"d-flex flex-column m-3 gap-3",style:{gap:"12px"},children:[(0,i.jsx)("div",{className:"markdown-body","data-turbolinks":"false",children:(0,i.jsx)(w.a,{disabled:!1,verifiedHTML:e.htmlBody,markdownValue:e.body,onChange:()=>{},onLinkClick:()=>{},teamHovercardsEnabled:!0})}),(0,i.jsx)(f.Suspense,{fallback:(0,i.jsx)(b.m,{}),children:(0,i.jsx)(L.ReactionViewerQueryComponent,{id:e.relayId,subjectLocked:n})})]})]})}function M({hideActions:e,...t}){let n=null;if(t.showEditHistory){let e=t.commitComment;n=(0,i.jsx)(f.Suspense,{fallback:null,children:(0,i.jsx)(S.nU,{id:e.relayId})})}return(0,i.jsx)(v.l,{...t,actions:e?void 0:(0,i.jsx)(N.p,{...t,editHistoryComponent:n})})}try{F.displayName||(F.displayName="ExistingCommitComments")}catch{}try{_.displayName||(_.displayName="ExistingCommitComment")}catch{}try{M.displayName||(M.displayName="CommitCommentHeader")}catch{}var P=n(12008),$=n(59148);function B({commitOid:e,locked:t,onClose:n}){let a=(0,r.H)(),{helpUrl:l}=(0,P.M)(),[s,o]=(0,f.useState)(!1),d=t?"Unlock":"Lock",u=async()=>{(await (0,g.Q)(`${(0,p.jP)({owner:a.ownerLogin,repo:a.name,commitish:e})}/lock`,{method:"PUT",headers:{Accept:"application/json"}})).ok?n(!0):o(!0)},m=async()=>{(await (0,g.v)(`${(0,p.jP)({owner:a.ownerLogin,repo:a.name,commitish:e})}/unlock`,{method:"PUT",headers:{Accept:"application/json"}})).ok?n(!1):o(!0)};return(0,i.jsxs)($.V,{onClose:()=>n(),width:"large",title:`${d} conversation on this commit`,footerButtons:[{content:`${d} conversation`,buttonType:"danger",sx:{width:"100%"},onClick:t?m:u}],children:[s&&(0,i.jsxs)(c.Z,{className:"mb-2",variant:"danger",children:["There was an error ",d.toLocaleLowerCase(),"ing this conversation. Please try again."]}),(0,i.jsxs)("p",{children:[d,"ing the conversation means:"]}),(0,i.jsx)("ul",{className:"ml-4",children:t?(0,i.jsxs)("li",{children:[(0,i.jsx)("strong",{children:"Everyone"})," will be able to comment on this commit once more."]}):(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)("li",{children:["Other users ",(0,i.jsx)("strong",{children:"can\u2019t add new comments"})," to this commit."]}),a.isOrgOwned?(0,i.jsxs)("li",{children:["You and other members of teams with\xa0",(0,i.jsx)("a",{href:`${l}/articles/what-are-the-different-access-permissions`,children:"write access"}),"\xa0 to this repository ",(0,i.jsx)("strong",{children:"can still leave comments"})," that others can see."]}):(0,i.jsxs)("li",{children:["You and other collaborators\xa0",(0,i.jsx)("a",{href:"<%= GitHub.help_url %>/articles/what-are-the-different-access-permissions",children:"with access"}),"\xa0to this repository ",(0,i.jsx)("strong",{children:"can still leave comments"})," that others can see."]})]})}),(0,i.jsxs)("p",{className:"mb-0 mt-2",children:["You can always this ",t?"lock":"unlock"," commit again in the future."]})]})}try{B.displayName||(B.displayName="LockConversationDialog")}catch{}var U=n(62016),Z=n(68892),H=n(75308);function V({commitOid:e,onAddComment:t,newCommentContent:n,canComment:r,locked:l,repoArchived:s}){let{addComment:d}=(0,D.f)(),c=(0,f.useRef)(null),u=async(e,n)=>{let i=await d(e);i.comment&&(t(i.comment),n())},m=(0,Z.A)(s,l);return(0,i.jsxs)("div",{className:"d-flex flex-column gap-2 pt-3",children:[(0,i.jsx)(H.Z,{as:"h2",className:"h4",children:"Add a comment"}),r?(0,i.jsx)("div",{id:a.YD.issueCommentComposer,children:(0,i.jsx)(O,{commitOid:e,ref:c,onSave:u,referenceId:`new-discussion-comment-${e}`,commentContent:n,buttonText:"Comment on this commit"})}):(0,i.jsx)(U.b,{icon:o.LockIcon,reason:m})]})}try{V.displayName||(V.displayName="NewCommitComment")}catch{}function G({commitOid:e,subscribed:t}){let n;let[a,l]=(0,f.useState)(t),[s,d]=(0,f.useState)(!1),c=(0,r.H)(),m=(0,k.F)("/notifications/thread","post");n=s?`You're now ${a?"subscribed":"unsubscribed"} to this thread.`:a?"You're receiving notifications because you're subscribed to this thread.":"You're not receiving notifications from this thread.";let h=async()=>{let t=new FormData;t.append("repository_id",c.id.toString()),t.append("thread_id",e),t.append("thread_class","Commit"),t.append("id",a?"unsubscribe":"subscribe"),t.append("authenticity_token",m??""),(await (0,g.Q)("/notifications/thread",{method:"POST",body:t})).ok&&(l(!a),d(!0))};return(0,i.jsxs)("div",{className:"d-flex flex-items-center border rounded-2 p-2 gap-2",children:[(0,i.jsx)(u.r,{onClick:h,size:"small",leadingVisual:a?o.BellSlashIcon:o.BellIcon,children:a?"Unsubscribe":"Subscribe"}),(0,i.jsx)("span",{className:"f6 fgColor-muted",children:n})]})}try{G.displayName||(G.displayName="NotificationsFooter")}catch{}let z="comments";function K({commit:e,commentInfo:t}){let n=(0,r.H)(),o=(0,l.x)(),{comments:m,setComments:b,commentCount:C,setCommentCount:v,hasMoreComments:N,subscribed:S,loadDiscussionComments:w,loaded:L,didError:k}=function(e,t){let[n,i]=(0,f.useState)([]),[a,r]=(0,f.useState)(!1),[l,s]=(0,f.useState)(null),[o,d]=(0,f.useState)(void 0),[c,u]=(0,f.useState)(!1),m=(0,f.useCallback)(async n=>{r(!1),u(!1);let a=await (0,g.v)((0,p.Oc)({owner:t.ownerLogin,repo:t.name,commitOid:e.oid,beforeCommentId:n}));if(a.ok){let e=await a.json();n?i(t=>[...e.comments,...t]):i(e.comments),s({canLoadMoreComments:e.canLoadMoreComments,subscribed:e.subscribed}),d(e.commentCount),r(!0),u(!1)}else u(!0)},[t.ownerLogin,t.name,e.oid]);return(0,f.useEffect)(()=>{a||m()},[m]),{comments:n,setComments:i,commentCount:o,setCommentCount:d,hasMoreComments:l?.canLoadMoreComments,subscribed:l?.subscribed,loadDiscussionComments:m,loaded:a,didError:c}}(e,n),[I,E]=(0,f.useState)(void 0),[D,T]=(0,f.useState)(t.locked),R=(0,f.useMemo)(()=>(0,x.i)(e.oid,n.id),[e.oid,n.id]);return(0,f.useEffect)(()=>{if(s.iG?.location.hash){let e=s.iG.location.hash.slice(1);if(m.find(t=>t.urlFragment===e)){let t=document.getElementById(e);t&&(t.scrollIntoView(),t.focus())}}},[m]),(0,i.jsxs)(d.Z,{className:(0,h.Z)(["d-flex flex-column gap-2 pt-3",a.Ec.commentsContainer,y["commit-discussion-comments"]]),children:[(0,i.jsx)(q,{commitOid:e.oid,commentCount:C,canLock:t.canLock,locked:D,setLocked:T}),L?N?(0,i.jsx)(u.r,{className:"width-full",onClick:()=>w(m[0]?.id.toString()),children:"Load more comments"}):null:k?(0,i.jsxs)(c.Z,{className:"d-flex flex-justify-between flex-items-center",variant:"danger",children:[(0,i.jsx)("span",{children:"Failed to load comments."}),(0,i.jsx)(u.r,{onClick:()=>w(),children:"Retry"})]}):(0,i.jsx)(j,{}),(0,i.jsx)(F,{comments:m,commit:e,locked:D,deleteComment:e=>{b(m.filter(t=>t.id!==e.id)),v((C??0)-1)},setComments:b,setNewCommentContent:E}),R?(0,i.jsx)("div",{className:"text-center",children:[...Array(38)].map((e,t)=>(0,i.jsx)("img",{alt:"rose",src:"/images/icons/emoji/rose.png",className:y["discussion-comments-rose"]},`rose-${t}`))}):null,L||0!==m.length?(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(V,{commitOid:e.oid,onAddComment:e=>{b([...m,e]),v((C??0)+1)},newCommentContent:I,canComment:t.canComment,locked:D,repoArchived:t.repoArchived}),o?(0,i.jsx)(G,{commitOid:e.oid,subscribed:S??!1}):null]}):null]})}function q({commitOid:e,commentCount:t,locked:n,setLocked:a,canLock:r}){let[l,s]=(0,f.useState)(!1);return(0,i.jsxs)("div",{className:"d-flex flex-items-center flex-justify-between",id:z,children:[(0,i.jsxs)("h2",{className:"sr-only",children:[t," commit comments"]}),(0,i.jsxs)("div",{className:"d-flex flex-items-center",children:[(0,i.jsx)("div",{className:"h4 pr-2",children:"Comments"}),void 0!==t&&(0,i.jsx)(m.Z,{children:t})]}),r&&(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(u.r,{leadingVisual:n?o.KeyIcon:o.LockIcon,variant:"invisible",onClick:()=>s(!0),children:[n?"Unlock":"Lock"," conversation"]}),l&&(0,i.jsx)(B,{commitOid:e,locked:n,onClose:e=>{s(!1),void 0!==e&&a(e)}})]})]})}try{K.displayName||(K.displayName="DiscussionComments")}catch{}try{q.displayName||(q.displayName="DiscussionCommentsHeader")}catch{}},47422:(e,t,n)=>{n.d(t,{C:()=>l});var i=n(48055),a=n(53924),r=n(40663);function l({commit:e,repo:t,children:n,settings:l}){return(0,i.jsxs)(a.C,{authors:e.authors,committer:e.committer,committerAttribution:e.committerAttribution,repo:t,includeVerbs:!0,authorSettings:{fontWeight:"normal",fontColor:"fg.muted",avatarSize:16,...l},children:[(0,i.jsx)(r.Z,{sx:{pl:1},datetime:e.committedDate,tense:"past"}),n]})}try{l.displayName||(l.displayName="CommitAttribution")}catch{}},42664:(e,t,n)=>{n.d(t,{Gh:()=>u,LL:()=>m,Zb:()=>c});var i=n(48055),a=n(54421),r=n(46008),l=n(42483),s=n(21449),o=n(8152),d=n(63987);let c="62px";function u({deferredData:e}){let{helpUrl:t}=(0,o.J)(),n=(0,s.NN)();return(0,i.jsxs)(i.Fragment,{children:[n&&(0,i.jsx)(r.o,{variant:"rounded",sx:{display:["none","flex"],width:c}}),!n&&e&&(0,i.jsx)(a.G,{commitOid:e.oid,hasSignature:!0,verificationStatus:e.verifiedStatus,signature:{helpUrl:t,...e.signatureInformation}})]})}function m({deferredData:e,oid:t,repository:n}){let a=(0,s.NN)(),o="";try{o=e?.statusCheckStatus?.short_text?.split("checks")[0]?.trim()||""}catch{}return(0,i.jsxs)(i.Fragment,{children:[a&&(0,i.jsx)(r.o,{variant:"rounded",sx:{display:["none","flex"],width:"20px"}}),!a&&e?.statusCheckStatus&&(0,i.jsx)(l.Z,{sx:{display:["none","inherit"],ml:1},children:"\xb7"}),(0,i.jsx)(l.Z,{sx:{display:["none","inherit"]},children:(0,i.jsx)(d.L,{oid:t,status:e?.statusCheckStatus?.state,descriptionString:o,repo:n})})]})}try{u.displayName||(u.displayName="SignedCommitBadge")}catch{}try{m.displayName||(m.displayName="CommitChecksStatusBadge")}catch{}},20748:(e,t,n)=>{n.d(t,{c:()=>h});var i=n(48055),a=n(85529),r=n(98833),l=n(92582),s=n(75308);let o={none:{},bottom:{pb:0},top:{pt:0}},d=()=>(0,i.jsx)(r.Z,{icon:a.GitCommitIcon}),c={height:"16px",mt:2};function u({children:e,leadingVisual:t,clipTimeline:n="none",sx:a={}}){let r=o[n],s=t||["bottom","top"].includes(n)?{}:c;return(0,i.jsxs)(l.Z.Item,{sx:{ml:5,py:"12px",...r,...a},children:[(0,i.jsx)(l.Z.Badge,{sx:{backgroundColor:"canvas.default",mr:0,...s},children:t??(0,i.jsx)(d,{})}),(0,i.jsx)(l.Z.Body,{sx:{mt:0},children:e})]})}function m({title:e,as:t,...n}){return(0,i.jsx)(s.Z,{as:t,sx:{fontWeight:"normal",fontSize:1,px:2,py:1},...n,children:e})}let h=Object.assign(u,{Heading:m});try{d.displayName||(d.displayName="DefaultLeadingVisual")}catch{}try{u.displayName||(u.displayName="TimelineRowComponent")}catch{}try{m.displayName||(m.displayName="TimelineRowHeading")}catch{}try{h.displayName||(h.displayName="TimelineRow")}catch{}},32190:(e,t,n)=>{n.d(t,{J:()=>l});var i=n(48055),a=n(14136),r=n(24167);function l({sha:e,direction:t="s"}){return(0,i.jsx)(a.m,{textToCopy:e,ariaLabel:`Copy full SHA for ${(0,r.Q)(e)}`,tooltipProps:{direction:t,anchorSide:"outside-bottom"},size:"small",avoidStyledComponent:!0,hasPortalTooltip:!0})}try{l.displayName||(l.displayName="CopySHA")}catch{}},99318:(e,t,n)=>{n.d(t,{s:()=>a});var i=n(48055);function a({children:e,className:t=""}){return(0,i.jsx)("div",{className:`border rounded-2 color-border-default d-flex flex-column ${t}`,children:e})}try{a.displayName||(a.displayName="Panel")}catch{}},21449:(e,t,n)=>{n.d(t,{E3:()=>u,EZ:()=>d,Hp:()=>o,Mh:()=>r,NN:()=>c,wI:()=>l});var i=n(48055),a=n(58081);let r={deferredCommits:[],renameHistory:null,loading:!0},l={deferredCommits:[],renameHistory:null,loading:!1},s=(0,a.createContext)(r);function o({children:e,deferredData:t}){return(0,i.jsx)(s.Provider,{value:t,children:e})}function d(e){let t=(0,a.useContext)(s);return t.deferredCommits?.find(t=>t.oid===e)}function c(){return(0,a.useContext)(s).loading}function u(){return(0,a.useContext)(s).renameHistory}try{s.displayName||(s.displayName="DeferredCommitDataContext")}catch{}try{o.displayName||(o.displayName="DeferredCommitDataProvider")}catch{}},1998:(e,t,n)=>{n.d(t,{h:()=>R});var i=n(48055),a=n(12461),r=n(58081),l=n(99318),s=n(80810),o=n(20756),d=n(22326),c=n(75299),u=n(21449),m=n(47422),h=n(77461),f=n(85529),p=n(65379),g=n(88216),x=n(24167),y=n(81950);let b=r.memo(C);function C({repo:e,oid:t}){let n=`browse-repo-${(0,x.Q)(t)}`;return(0,i.jsx)(p.Z,{"aria-label":"Browse repository at this point",id:n,direction:"sw",children:(0,i.jsx)("a",{"aria-labelledby":n,href:(0,d.Qi)({repo:e,action:"tree",commitish:t}),className:"Button Button--iconOnly Button--invisible Button--small","data-testid":"commit-row-browse-repo",children:(0,i.jsx)(f.CodeIcon,{})})})}let j=r.memo(v);function v({repo:e,oid:t,path:n}){if(!n)return null;let a=`view-code-${(0,x.Q)(t)}`;return(0,i.jsx)(p.Z,{"aria-label":"View code at this point",id:a,direction:"sw",children:(0,i.jsx)("a",{"aria-labelledby":a,href:(0,d.C9)({owner:e.ownerLogin,repo:e.name,commitish:t,filePath:n}),className:"Button Button--iconOnly Button--invisible Button--small","data-testid":"commit-row-view-code",children:(0,i.jsx)(f.FileCodeIcon,{})})})}function N({buildCommitPath:e=d.jP,repo:t,oid:n,softNavToCommit:a}){let r=e({owner:t.ownerLogin,repo:t.name,commitish:n}),l={variant:"invisible",size:"small",sx:{fontFamily:"var(--fontStack-monospace)",color:"fg.muted"}};return(0,i.jsx)(p.Z,{"aria-label":"View commit details",direction:"s",children:a?(0,i.jsx)(g.r,{as:h.r,to:r,...l,children:(0,x.Q)(n)}):(0,i.jsx)("a",{className:"Button--invisible Button--small Button text-mono",href:r,...l,children:(0,i.jsx)("span",{className:"Button-content",children:(0,i.jsx)("span",{className:"Button-label color-fg-muted",children:(0,x.Q)(n)})})})})}function S({showDescription:e,setShowDescription:t,oid:n}){let a=(0,x.Q)(n),r=`show-description-${a}`;return(0,i.jsx)(p.Z,{"aria-label":`${e?"Hide":"Show"} description for ${a}`,id:r,direction:"se",className:"ml-1",children:(0,i.jsx)("button",{className:"Button Button--iconOnly Button--invisible Button--small","data-testid":"commit-row-show-description-button","aria-labelledby":r,"aria-pressed":e,"aria-expanded":e,onClick:n=>{n.preventDefault(),t(!e)},children:(0,i.jsx)(f.EllipsisIcon,{})})})}function w({count:e,repo:t,oid:n}){let a=`comment-count-${(0,x.Q)(n)}`;return e?(0,i.jsx)(p.Z,{"aria-label":`View ${e} commit comment${e>1?"s":""}`,id:a,direction:"sw",children:(0,i.jsx)("a",{"aria-labelledby":a,href:`${(0,d.jP)({owner:t.ownerLogin,repo:t.name,commitish:n})}#${y.y}`,className:"Button Button--invisible Button--small","data-testid":"commit-row-comments",children:(0,i.jsxs)("span",{className:"Button-content color-fg-muted",children:[(0,i.jsx)(f.CommentIcon,{}),(0,i.jsx)("span",{className:"Button-label",children:e})]})})}):null}try{b.displayName||(b.displayName="BrowseRepositoryAtThisPoint")}catch{}try{C.displayName||(C.displayName="WrappedBrowseRepositoryAtThisPoint")}catch{}try{j.displayName||(j.displayName="ViewCodeAtThisPoint")}catch{}try{v.displayName||(v.displayName="WrappedViewCodeAtThisPoint")}catch{}try{N.displayName||(N.displayName="ViewCommitDetails")}catch{}try{S.displayName||(S.displayName="ToggleCommitDescription")}catch{}try{w.displayName||(w.displayName="CommitCommentCount")}catch{}var L=n(42664),k=n(32190);let I=(0,r.lazy)(()=>n.e("ui_packages_commits_components_Commits_CommitActionBar_tsx").then(n.bind(n,5703)).then(e=>({default:e.CommitActionBar})));function E({buildCommitPath:e,commit:t,repo:n,path:l,softNavToCommit:h}){let[f,p]=(0,r.useState)(!1),g=(0,r.useRef)(null),x=(0,d.jP)({owner:n.ownerLogin,repo:n.name,commitish:t.oid}),[y,C]=(0,o.fQ)(t.oid,n),[v,E]=(0,r.useState)(!1),D=(0,u.EZ)(t.oid);return(0,r.useEffect)(()=>{f&&g.current&&g.current.textContent&&(0,s.x)(g.current.textContent)},[g,f]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsxs)(a.HC,{"data-testid":"commit-row-item",sx:{":first-child":{borderTopLeftRadius:2,borderTopRightRadius:2},":last-child":{borderBottomLeftRadius:2,borderBottomRightRadius:2}},title:(0,i.jsx)(a.HC.Title,{value:t.shortMessage,markdownValue:t.shortMessageMarkdownLink,href:x,containerSx:{display:"inline"},headerSx:{display:"inline"},children:t.bodyMessageHtml&&(0,i.jsx)(S,{showDescription:f,setShowDescription:p,oid:t.oid})}),metadata:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(a.HC.Metadata,{children:(0,i.jsx)(w,{oid:t.oid,repo:n,count:D?.commentCount??0})}),(0,i.jsx)(a.HC.Metadata,{sx:{minWidth:L.Zb},children:(0,i.jsx)(L.Gh,{deferredData:D})}),(0,i.jsxs)(a.HC.Metadata,{variant:"primary",sx:{px:0,display:["none","flex"],gap:2},children:[(0,i.jsxs)("div",{className:"d-flex",children:[(0,i.jsx)(N,{buildCommitPath:e,oid:t.oid,repo:n,softNavToCommit:h}),(0,i.jsx)(k.J,{sha:t.oid})]}),(0,i.jsx)(j,{repo:n,oid:t.oid,path:l}),(0,i.jsx)(b,{repo:n,oid:t.oid})]})]}),secondaryActions:(0,i.jsx)(r.Suspense,{children:(0,i.jsx)(I,{buildCommitPath:e,commit:t,repo:n,path:l,setDialogOpen:E,fetchCheckDetails:C,deferredData:D})}),children:[(0,i.jsx)("div",{className:"px-2"}),(0,i.jsxs)(a.HC.MainContent,{children:[f&&t.bodyMessageHtml&&(0,i.jsx)(a.HC.Description,{children:(0,i.jsx)(c.WZ,{ref:g,html:t.bodyMessageHtml,className:"ws-pre-wrap extended-commit-description-container",sx:{pb:2,wordBreak:"break-word",fontFamily:"var(--fontStack-monospace)"}})}),(0,i.jsx)(a.HC.Description,{children:(0,i.jsx)(m.C,{commit:t,repo:n,children:(0,i.jsx)(L.LL,{repository:n,deferredData:D,oid:t.oid})})})]})]}),D?.statusCheckStatus&&v&&(0,i.jsx)(o.AF,{combinedStatus:y,isOpen:v,onDismiss:()=>{E(!1)}})]})}try{I.displayName||(I.displayName="CommitActionBar")}catch{}try{E.displayName||(E.displayName="CommitRow")}catch{}var D=n(20748);function T({buildCommitPath:e,commits:t,title:n,shouldClipTimeline:s,repo:o,currentBlobPath:d="",softNavToCommit:c}){let u=(0,r.useId)();return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(D.c,{clipTimeline:s?"top":"none",children:(0,i.jsx)(D.c.Heading,{as:"h3",id:u,title:`Commits on ${n}`,"data-testid":"commit-group-title"})}),(0,i.jsx)(l.s,{children:(0,i.jsx)(a.Bv,{title:n,titleHeaderTag:"h3",ariaLabelledBy:u,children:t.map(t=>(0,i.jsx)(E,{buildCommitPath:e,commit:t,repo:o,path:d,softNavToCommit:c},t.oid))},n)})]})}try{T.displayName||(T.displayName="CommitGroup")}catch{}function R({buildCommitPath:e,leadingContent:t,commitGroups:n,trailingContent:a,deferredCommitData:r=u.wI,repository:l,currentBlobPath:s,shouldClipTimeline:o=!0,softNavToCommit:d=!1}){return(0,i.jsxs)(u.Hp,{deferredData:r,children:[t,n.map((t,n)=>(0,i.jsx)(T,{title:t.title,buildCommitPath:e,commits:t.commits,shouldClipTimeline:o&&0===n,currentBlobPath:s,repo:l,softNavToCommit:d},t.title)),a]})}try{R.displayName||(R.displayName="Commits")}catch{}},98399:(e,t,n)=>{n.d(t,{q:()=>p});var i=n(48055),a=n(12159),r=n(79804),l=n(85529),s=n(98833),o=n(42483),d=n(97011),c=n(79902),u=n(88216),m=n(43360),h=n(26004);let f={[m.A.Failure]:(0,i.jsx)(s.Z,{icon:l.StopIcon,sx:{fill:"danger.fg"}}),[m.A.Warning]:(0,i.jsx)(s.Z,{icon:l.AlertIcon,sx:{fill:"attention.fg"}}),[m.A.Notice]:(0,i.jsx)(s.Z,{icon:l.InfoIcon,sx:{fill:"fg.muted"}})};function p({annotation:e,ghostUser:t=a.H.ghostUser}){let n=e.checkSuite.app;return(0,i.jsxs)(o.Z,{sx:{borderLeft:"6px solid",borderColor:h.kQ[e.annotationLevel].primaryColor,p:4},children:[(0,i.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center",mb:2},children:[f[e.annotationLevel],(0,i.jsx)(d.Z,{sx:{fontWeight:600,color:"fg.muted",fontSize:0,pl:2},children:h.kQ[e.annotationLevel].ariaLabel})]}),(0,i.jsx)(d.Z,{sx:{color:h.kQ[e.annotationLevel].primaryColor,fontWeight:600,fontSize:1},children:e.title}),(0,i.jsx)(o.Z,{sx:{mb:3,mt:1},children:e.message&&(0,i.jsx)(d.Z,{sx:{fontFamily:"var(--fontStack-monospace)",fontSize:0,display:"-webkit-box",overflow:"hidden","-webkit-box-orient":"vertical","-webkit-line-clamp":"8",maxWidth:"unset"},children:e.message})}),(0,i.jsxs)(o.Z,{sx:{display:"flex",alignItems:"center",justifyContent:"space-between"},children:[(0,i.jsxs)(o.Z,{sx:{flexGrow:2},children:[(0,i.jsx)(r.O,{src:n?.logoUrl??t.avatarUrl,alt:`${n?.name??t.login} avatar image`,"data-testid":"check-suite-app-avatar"}),(0,i.jsxs)(c.Z,{sx:{ml:2,maxWidth:"300px"},inline:!0,title:`${e.checkSuite.name} / ${e.checkRun.name}`,children:[(0,i.jsx)(d.Z,{sx:{fontWeight:600,fontSize:0},children:e.checkSuite.name})," /"," ",(0,i.jsx)(d.Z,{sx:{fontSize:0},children:e.checkRun.name})]})]}),e.checkRun.detailsUrl&&(0,i.jsx)(u.r,{as:"a",href:e.checkRun.detailsUrl,size:"small",children:"View details"})]})]})}try{p.displayName||(p.displayName="Annotation")}catch{}},26004:(e,t,n)=>{n.d(t,{CU:()=>o,kQ:()=>d,rD:()=>l});var i=n(48055),a=n(15388),r=n(43360);function l({annotationLevel:e,...t}){let{icon:n,...a}=d[e];return function({fill:e,stroke:t,ariaLabel:n,svgHtml:a,className:r}){return(0,i.jsx)("svg",{"aria-label":n,className:r,fill:e,height:"24",stroke:t,strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",style:{boxShadow:"none"},viewBox:"0 0 24 24",width:"24",xmlns:"http://www.w3.org/2000/svg",children:a})}({...n,...a,...t})}let s=(0,a.F4)(["0%{opacity:0;}100%{opacity:1;}"]),o=(0,a.ZP)(l).withConfig({displayName:"AnnotationIcon__AnimatedAnnotationIcon",componentId:"sc-306ab24a-0"})(["animation:"," 0.1s ease-in;"],s),d={[r.A.Failure]:{priority:1,ariaLabel:"Check failure",primaryColor:"danger.fg",icon:{fill:"var(--bgColor-danger-emphasis, var(--color-danger-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"15",x2:"9",y1:"9",y2:"15"}),(0,i.jsx)("line",{x1:"9",x2:"15",y1:"9",y2:"15"})]})}},[r.A.Warning]:{priority:2,ariaLabel:"Check warning",primaryColor:"attention.fg",icon:{fill:"var(--bgColor-attention-emphasis, var(--color-attention-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"8",y2:"12"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"16",y2:"16"})]})}},[r.A.Notice]:{priority:3,ariaLabel:"Check notice",primaryColor:"fg.muted",icon:{fill:"var(--bgColor-neutral-emphasis, var(--color-neutral-emphasis))",stroke:"var(--fgColor-onEmphasis, var(--color-fg-on-emphasis))",svgHtml:(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)("circle",{cx:"12",cy:"12",r:"10"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"16",y2:"12"}),(0,i.jsx)("line",{x1:"12",x2:"12",y1:"8",y2:"8"})]})}}};try{l.displayName||(l.displayName="AnnotationIcon")}catch{}try{o.displayName||(o.displayName="AnimatedAnnotationIcon")}catch{}},40516:(e,t,n)=>{n.d(t,{E:()=>m,n:()=>f});var i=n(48055),a=n(80855),r=n(96463),l=n(58081),s=n(22578),o=n(75170);let d=n(16790),c=n(93212),u=n(19236),m=({children:e})=>{let{viewer:t}=(0,s.useLazyLoadQuery)(d,{});return t.isCopilotDotcomChatEnabled?(0,i.jsx)(i.Fragment,{children:e}):null},h=({Component:e,componentProps:t,queryVariables:n})=>{let{pullRequest:r}=(0,s.useLazyLoadQuery)(c,n),{diffEntry:l}=(0,s.useLazyLoadQuery)(u,n);(0,a.q)(r?.comparison),(0,a.q)(l);let d=(0,o.U)(r.comparison,l);return d?(0,i.jsx)(e,{fileDiffReference:d,...t}):null},f=({Component:e,componentProps:t,queryVariables:n,errorFallback:a=null,suspenseFallback:s=null})=>(0,i.jsx)(r.S,{fallback:a,children:(0,i.jsx)(l.Suspense,{fallback:s,children:(0,i.jsx)(m,{children:(0,i.jsx)(h,{Component:e,componentProps:t,queryVariables:n})})})});try{m.displayName||(m.displayName="CopilotCodeChatAccessLoader")}catch{}try{h.displayName||(h.displayName="CopilotCodeChatReferenceLoader")}catch{}try{f.displayName||(f.displayName="DiffChatWrapper")}catch{}},96797:(e,t,n)=>{n.d(t,{l:()=>o});var i=n(48055),a=n(51927),r=n(79697),l=n(88049),s=n(14786);let o=({fileDiffReference:e,eventContext:t,afterSelect:n})=>{let{addToast:o}=(0,l.V6)();return(0,i.jsx)(s.S.Item,{onSelect:()=>{(0,a.cw)(e),o({message:"Reference added to thread",type:"success"}),(0,r.qP)("copilot.file-diff.add",t),n?.()},children:"Attach to current thread"})};try{o.displayName||(o.displayName="DiffLinesAttachMenuItem")}catch{}},44042:(e,t,n)=>{n.d(t,{u:()=>o});var i=n(48055),a=n(51927),r=n(85355),l=n(79697),s=n(14786);let o=({fileDiffReference:e,leadingVisual:t,eventContext:n,afterSelect:o})=>(0,i.jsxs)(s.S.Item,{onSelect:()=>{(0,a.L4)({intent:r.A9.conversation,references:[e]}),(0,l.qP)("copilot.file-diff.discuss",n),o?.()},children:[t&&(0,i.jsx)(s.S.LeadingVisual,{children:t}),"Ask about this diff"]});try{o.displayName||(o.displayName="DiffLinesDiscussMenuItem")}catch{}},93498:(e,t,n)=>{n.d(t,{m:()=>o});var i=n(48055),a=n(51927),r=n(85355),l=n(79697),s=n(14786);let o=({fileDiffReference:e,eventContext:t,afterSelect:n})=>(0,i.jsx)(s.S.Item,{onSelect:()=>{(0,a.L4)({content:"Explain",intent:r.A9.explainFileDiff,references:[e]}),(0,l.qP)("copilot.file-diff.explain",t),n?.()},children:"Explain"});try{o.displayName||(o.displayName="DiffLinesExplainMenuItem")}catch{}},50429:(e,t,n)=>{n.d(t,{Fh:()=>f,LG:()=>p,ir:()=>h});var i=n(48055),a=n(85529),r=n(51526),l=n(45677),s=n(50919),o=n(74121),d=n(14786),c=n(58081),u=n(86010);let m={filterLoadingHeight:"FileFilter-module__filterLoadingHeight--cW8BP"},h="No extension";function f({filterText:e,onFilterTextChange:t}){return(0,i.jsxs)("div",{className:"d-flex flex-nowrap gap-2",children:[(0,i.jsx)(r.Z,{block:!0,"aria-label":"Filter files\u2026",leadingVisual:a.SearchIcon,placeholder:"Filter files\u2026",value:e,onChange:e=>t?.(e.target.value)}),(0,i.jsxs)(l.P,{children:[(0,i.jsx)(l.P.Anchor,{children:(0,i.jsx)(s.h,{"aria-label":"Filter",icon:a.SlidersIcon,className:"flex-shrink-0"})}),(0,i.jsx)(l.P.Overlay,{className:(0,u.Z)(m.filterLoadingHeight),children:(0,i.jsx)("div",{className:(0,u.Z)("d-flex","flex-column","flex-justify-center","flex-items-center",m.filterLoadingHeight),children:(0,i.jsx)(o.Z,{size:"medium"})})})]})]})}function p({filterText:e,onFilterTextChange:t,fileExtensions:n,unselectedFileExtensions:o,onFilterChange:u,additionalFilterGroups:m}){let[f,p]=(0,c.useState)(e),g=(e,t)=>{u?.(e?"selectFileExtension":"unselectFileExtension",{extension:t})},x=Array.from(n||[]).filter(e=>e!==h).sort(),y=e=>!o?.has(e),b=n?.has(h);return(0,i.jsxs)("div",{className:"d-flex flex-nowrap gap-2",children:[(0,i.jsx)(r.Z,{block:!0,"aria-label":"Filter files\u2026",leadingVisual:a.SearchIcon,placeholder:"Filter files\u2026",value:f,onChange:e=>{p(e.target.value),t?.(e.target.value)}}),(0,i.jsxs)(l.P,{children:[(0,i.jsx)(l.P.Anchor,{children:(0,i.jsx)(s.h,{"aria-label":"Filter",icon:a.SlidersIcon,className:"flex-shrink-0"})}),(0,i.jsx)(l.P.Overlay,{children:(0,i.jsxs)(d.S,{children:[(0,i.jsxs)(d.S.Group,{selectionVariant:"multiple",children:[(0,i.jsx)(d.S.GroupHeading,{children:"File extensions"}),x.map(e=>{let t=y(e);return(0,i.jsx)(d.S.Item,{selected:t,onSelect:()=>g(!t,e),children:`${e}`},e)}),b&&(0,i.jsx)(d.S.Item,{selected:y(h),onSelect:()=>g(!y(h),h),children:h},h)]}),m]})})]})]})}try{f.displayName||(f.displayName="FileFilterLoading")}catch{}try{p.displayName||(p.displayName="FileFilterShared")}catch{}},18655:(e,t,n)=>{n.d(t,{h:()=>m,j:()=>f});var i=n(48055),a=n(80810),r=n(71207),l=n(58081),s=n(8358),o=n(59889),d=n(28771),c=n(92086);let u=(0,l.createContext)(null);function m(){let e=(0,l.useContext)(u);if(!e)throw Error("useSelectedDiffRowRange must be used within a SelectedDiffRowRangeContext");return e}function h(e){e.startLineNumber===e.endLineNumber&&e.startOrientation===e.endOrientation?(0,a.x)(`${"left"===e.startOrientation?"L":"R"}${e.startLineNumber} selected.`):(0,a.x)(`${"left"===e.startOrientation?"L":"R"}${e.startLineNumber} to ${"left"===e.endOrientation?"L":"R"}${e.endLineNumber} selected.`)}function f({children:e}){let t=(0,l.useRef)(new Map),n=(0,d.R)(e=>{if(!e)return;let n=e.diffAnchor,i=t.current.get(n);if(!i)return;let{leftLines:a,rightLines:r}=(0,c.Ek)(i);return(0,s.Z)({selectedDiffRowRange:e,leftLines:a,rightLines:r})}),[m,f]=(0,l.useState)(()=>(0,o.rn)(r.ssrSafeLocation.hash)),[p,g]=(0,l.useState)(()=>{if(m){let e=n(m);if(e)return{leftLines:e.selectedLeftLines,rightLines:e.selectedRightLines||[]}}return{leftLines:[],rightLines:[]}}),x=(0,d.R)(e=>{let t=n(e);g(t?{leftLines:t.selectedLeftLines,rightLines:t.selectedRightLines||[]}:{leftLines:[],rightLines:[]})}),y=(0,d.R)((e,t,n,i)=>{if(!t||!n)return;let a=i&&m&&m.diffAnchor===e?t<=m.firstSelectedLineNumber?{...m,startLineNumber:t,startOrientation:n,endLineNumber:m.firstSelectedLineNumber,endOrientation:m.firstSelectedOrientation}:{...m,startLineNumber:m.firstSelectedLineNumber,startOrientation:m.firstSelectedOrientation,endLineNumber:t,endOrientation:n}:{diffAnchor:e,endLineNumber:t,endOrientation:n,startLineNumber:t,startOrientation:n,firstSelectedLineNumber:t,firstSelectedOrientation:n};h(a),f(a),x(a),(0,o.fI)(a)}),b=(0,d.R)(e=>{h(e),f(e),x(e),(0,o.fI)(e)}),C=(0,d.R)(({diffAnchor:e,startGridCell:t,endGridCell:n,focusedGridCell:i})=>{b({diffAnchor:e,endLineNumber:n.lineNumber,endOrientation:n.orientation,firstSelectedLineNumber:i.lineNumber,firstSelectedOrientation:i.orientation,startLineNumber:t.lineNumber,startOrientation:t.orientation})}),j=(0,d.R)(()=>{m&&(f(void 0),x(void 0),(0,a.x)("Selection Cleared"),history.replaceState({},"",window.location.pathname+window.location.search))}),v=(0,d.R)((e,n)=>{t.current.set(e,n),m?.diffAnchor===e&&x(m)}),N=(0,d.R)(e=>t.current.get(e)),S=(0,l.useMemo)(()=>({selectedDiffRowRange:m,updateSelectedDiffRowRange:y,clearSelectedDiffRowRange:j,replaceSelectedDiffRowRange:b,replaceSelectedDiffRowRangeFromGridCells:C,updateDiffLines:v,selectedDiffLines:p,getDiffLinesFromLineRange:n,getDiffLinesByDiffAnchor:N}),[m,y,j,b,C,p,v,n,N]);return(0,i.jsx)(u.Provider,{value:S,children:e})}try{u.displayName||(u.displayName="SelectedDiffRowRange")}catch{}try{f.displayName||(f.displayName="SelectedDiffRowRangeContextProvider")}catch{}},73216:(e,t,n)=>{n.d(t,{i:()=>l});var i=n(48055),a=n(58081),r=n(40940);function l({routes:e,history:t,children:n}){let l=(0,a.useMemo)(()=>({routes:e,history:t}),[e,t]);return(0,i.jsx)(r.I.Provider,{value:l,children:n})}try{l.displayName||(l.displayName="AppContextProvider")}catch{}},53167:(e,t,n)=>{n.d(t,{R:()=>f});var i=n(48055),a=n(18),r=n(8386),l=n(76888),s=n(58081),o=n(72962),d=n(18515);function c({children:e}){let t=(0,d.KM)(),n=s.useMemo(()=>{let e={};for(let n of t)n.startsWith("primer_react_")&&(e[n]=!0);return e},[]);return(0,i.jsx)(o.T,{flags:n,children:e})}try{c.displayName||(c.displayName="PrimerFeatureFlags")}catch{}var u=n(88049),m=n(47658);let h={};function f({appName:e,children:t,wasServerRendered:n}){let{colorMode:s,dayScheme:o,nightScheme:d}=(0,l.Z)();return(0,i.jsx)(a.DJ,{wasServerRendered:n,children:(0,i.jsx)(m.n,{appName:e,category:"",metadata:h,children:(0,i.jsx)(c,{children:(0,i.jsx)(r.f6,{colorMode:s,dayScheme:o,nightScheme:d,preventSSRMismatch:!0,children:(0,i.jsx)(u.sS,{children:t})})})})})}try{f.displayName||(f.displayName="BaseProviders")}catch{}},80491:(e,t,n)=>{n.d(t,{P:()=>p});var i=n(48055),a=n(58081),r=n(88049),l=n(85529),s=n(70697),o=n(41905);let d={info:"",success:"Toast--success",error:"Toast--error"},c={info:(0,i.jsx)(l.InfoIcon,{}),success:(0,i.jsx)(l.CheckIcon,{}),error:(0,i.jsx)(l.StopIcon,{})},u=({message:e,timeToLive:t,icon:n,type:r="info",role:l="log"})=>{let[u,m]=a.useState(!0),{safeSetTimeout:h}=(0,s.Z)();return(0,a.useEffect)(()=>{t&&h(()=>m(!1),t-300)},[h,t]),(0,i.jsx)(o.h,{children:(0,i.jsx)("div",{className:"p-1 position-fixed bottom-0 left-0 mb-3 ml-3",children:(0,i.jsxs)("div",{className:`Toast ${d[r]} ${u?"Toast--animateIn":"Toast--animateOut"}`,id:"ui-app-toast","data-testid":`ui-app-toast-${r}`,role:l,children:[(0,i.jsx)("span",{className:"Toast-icon",children:n||c[r]}),(0,i.jsx)("span",{className:"Toast-content",children:e})]})})})};try{u.displayName||(u.displayName="Toast")}catch{}function m(){let{toasts:e,persistedToast:t}=(0,a.useContext)(r.Ww);return(0,i.jsxs)(i.Fragment,{children:[e.map((e,t)=>(0,i.jsx)(u,{message:e.message,icon:e.icon,timeToLive:r.hw,type:e.type,role:e.role},t)),t&&(0,i.jsx)(u,{message:t.message,icon:t.icon,type:t.type,role:t.role})]})}try{m.displayName||(m.displayName="Toasts")}catch{}var h=n(18448);function f({ssrError:e}){let{addToast:t}=(0,r.V6)(),n=h.t[e.textContent||""];return(0,a.useEffect)(()=>{n||t({type:"error",message:"SSR failed, see console for error details (Staff Only)"})},[]),null}try{f.displayName||(f.displayName="SSRErrorToast")}catch{}function p({ssrError:e}){return(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(m,{}),e&&(0,i.jsx)(f,{ssrError:e})]})}try{p.displayName||(p.displayName="CommonElements")}catch{}},40584:(e,t,n)=>{n.d(t,{m:()=>r});var i=n(48055),a=n(46008);function r(){return(0,i.jsx)("div",{className:"d-flex flex-wrap gap-1",children:(0,i.jsx)(a.o,{variant:"elliptical",height:"28px",width:"28px"})})}try{r.displayName||(r.displayName="ReactionViewerLoading")}catch{}},46008:(e,t,n)=>{n.d(t,{o:()=>u});var i=n(42483),a=n(42379),r=n(15173),l=n(15388);let s=(0,l.F4)(["0%{transform:translateX(-100%);}50%{transform:translateX(100%);}100%{transform:translateX(100%);}"]),o=(0,l.iv)(["animation:"," 1.5s infinite linear;"],s),d=(0,l.F4)(["0%{opacity:.3;}10%{opacity:1;}100%{opacity:.3;}"]),c=(0,l.iv)(["animation:"," 2s infinite linear;"],d),u=(0,l.ZP)(i.Z).withConfig({displayName:"LoadingSkeleton",componentId:"sc-bcbf24f9-0"})(["position:relative;overflow:hidden;mask-image:radial-gradient(white,black);",";&::after{",";background:linear-gradient(90deg,transparent,",",transparent);content:'';position:absolute;transform:translateX(-100%);bottom:0;left:0;right:0;top:0;}background-color:",";border-radius:",";display:block;height:1.2em;"," width:",";height:",";",""],({animationStyle:e})=>"pulse"===e&&c,({animationStyle:e})=>"pulse"!==e&&o,(0,a.U2)("colors.neutral.subtle"),(0,a.U2)("colors.neutral.subtle"),({theme:e,variant:t})=>{switch(t){case"rounded":return(0,a.U2)("radii.1")(e);case"pill":return"100px";case"elliptical":return"50%";default:return"0"}},({variant:e})=>"elliptical"===e&&{borderRadius:"50%"},({width:e})=>{switch(e){case"random":return`${Math.floor(40*Math.random()+40)}%`;case"xl":return"32px";case"lg":return"24px";case"md":return"20px";case"sm":return"16px";default:return e}},({height:e})=>{switch(e){case"xl":return"32px";case"lg":return"24px";case"md":return"20px";case"sm":return"16px";default:return e}},r.Z);try{u.displayName||(u.displayName="LoadingSkeleton")}catch{}}}]);
//# sourceMappingURL=ui_packages_diff-file-header_diff-file-header_ts-ui_packages_diff-file-tree_diff-file-tree_ts-e2f8a0-36e9ac264e6c.js.map